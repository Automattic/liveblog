"use strict";(globalThis.wpJsonpLiveBlog=globalThis.wpJsonpLiveBlog||[]).push([[672],{43(t,e,n){n.d(e,{Q:()=>s});var r=n(9325),i=n(4439),o=n(1609);function s({hasStrictIndent:t=!1}){const[e]=(0,i.DF)();return(0,o.useEffect)(()=>{if(!e.hasNodes([r.v5,r.YW]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[e]),(0,o.useEffect)(()=>{if(t)return(0,r.Js)(e)},[e,t]),n=e,(0,o.useEffect)(()=>(0,r.cz)(n),[n]),null;var n}},83(t,e,n){n.d(e,{a:()=>d});var r=n(4439),i=n(1609),o=n(790),s=n(5745),l=n(3105);const c="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,a=(0,i.forwardRef)(function({editor:t,ariaActiveDescendant:e,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:s,ariaErrorMessage:l,ariaExpanded:a,ariaInvalid:u,ariaLabel:d,ariaLabelledBy:f,ariaMultiline:h,ariaOwns:g,ariaRequired:p,autoCapitalize:m,className:_,id:y,role:v="textbox",spellCheck:x=!0,style:S,tabIndex:C,"data-testid":b,...T},k){const[N,E]=(0,i.useState)(t.isEditable()),w=(0,i.useCallback)(e=>{e&&e.ownerDocument&&e.ownerDocument.defaultView?t.setRootElement(e):t.setRootElement(null)},[t]),O=(0,i.useMemo)(()=>function(...t){return e=>{for(const n of t)"function"==typeof n?n(e):null!=n&&(n.current=e)}}(k,w),[w,k]);return c(()=>(E(t.isEditable()),t.registerEditableListener(t=>{E(t)})),[t]),(0,o.jsx)("div",{"aria-activedescendant":N?e:void 0,"aria-autocomplete":N?n:"none","aria-controls":N?r:void 0,"aria-describedby":s,...null!=l?{"aria-errormessage":l}:{},"aria-expanded":N&&"combobox"===v?!!a:void 0,...null!=u?{"aria-invalid":u}:{},"aria-label":d,"aria-labelledby":f,"aria-multiline":h,"aria-owns":N?g:void 0,"aria-readonly":!N||void 0,"aria-required":p,autoCapitalize:m,className:_,contentEditable:N,"data-testid":b,id:y,ref:O,role:v,spellCheck:x,style:S,tabIndex:C,...T})});function u(t){return t.getEditorState().read((0,s.yl)(t.isComposing()))}const d=(0,i.forwardRef)(function(t,e){const{placeholder:n,...i}=t,[s]=(0,r.DF)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a,{editor:s,...i,ref:e}),null!=n&&(0,o.jsx)(f,{editor:s,content:n})]})});function f({content:t,editor:e}){const n=function(t){const[e,n]=(0,i.useState)(()=>u(t));return c(()=>{function e(){const e=u(t);n(e)}return e(),(0,l.Sd)(t.registerUpdateListener(()=>{e()}),t.registerEditableListener(()=>{e()}))},[t]),e}(e),[r,s]=(0,i.useState)(e.isEditable());if((0,i.useLayoutEffect)(()=>(s(e.isEditable()),e.registerEditableListener(t=>{s(t)})),[e]),!n)return null;let a=null;return"function"==typeof t?a=t(r):null!==t&&(a=t),null===a?null:(0,o.jsx)("div",{"aria-hidden":!0,children:a})}},290(t,e,n){n.d(e,{G:()=>d});var r=n(4439),i=n(8129),o=n(3105),s=n(8832);function l(t){t.undoStack=[],t.redoStack=[],t.current=null}function c(t,e,n){const r=function(t,e){let n=Date.now(),r=0;return(i,o,l,c,a,u)=>{const d=Date.now();if(u.has(s.n0X))return r=0,n=d,2;const f=function(t,e,n,r,i){if(null===t||0===n.size&&0===r.size&&!i)return 0;const o=e._selection,l=t._selection;if(i)return 1;if(!((0,s.I2P)(o)&&(0,s.I2P)(l)&&l.isCollapsed()&&o.isCollapsed()))return 0;const c=function(t,e,n){const r=t._nodeMap,i=[];for(const t of e){const e=r.get(t);void 0!==e&&i.push(e)}for(const[t,e]of n){if(!e)continue;const n=r.get(t);void 0===n||(0,s.hVZ)(n)||i.push(n)}return i}(e,n,r);if(0===c.length)return 0;if(c.length>1){const n=e._nodeMap,r=n.get(o.anchor.key),i=n.get(l.anchor.key);return r&&i&&!t._nodeMap.has(r.__key)&&(0,s.kFe)(r)&&1===r.__text.length&&1===o.anchor.offset?2:0}const a=c[0],u=t._nodeMap.get(a.__key);if(!(0,s.kFe)(u)||!(0,s.kFe)(a)||u.__mode!==a.__mode)return 0;const d=u.__text,f=a.__text;if(d===f)return 0;const h=o.anchor,g=l.anchor;if(h.key!==g.key||"text"!==h.type)return 0;const p=h.offset,m=g.offset,_=f.length-d.length;return 1===_&&m===p-1?2:-1===_&&m===p+1?3:-1===_&&m===p?4:0}(i,o,c,a,t.isComposing()),h=(()=>{const h=null===l||l.editor===t,g=u.has(s.bMH);if(!g&&h&&u.has(s.T40))return 0;if(null===i)return 1;const p=o._selection;if(!(c.size>0||a.size>0))return null!==p?0:2;const m="number"==typeof e?e:e.peek();return!1===g&&0!==f&&f===r&&d<n+m&&h||1===c.size&&function(t,e,n){const r=e._nodeMap.get(t),i=n._nodeMap.get(t),o=e._selection,l=n._selection;return!((0,s.I2P)(o)&&(0,s.I2P)(l)&&"element"===o.anchor.type&&"element"===o.focus.type&&"text"===l.anchor.type&&"text"===l.focus.type||!(0,s.kFe)(r)||!(0,s.kFe)(i)||r.__parent!==i.__parent)&&JSON.stringify(e.read(()=>r.exportJSON()))===JSON.stringify(n.read(()=>i.exportJSON()))}(Array.from(c)[0],i,o)?0:1})();return n=d,r=f,h}}(t,n),i=(0,o.Sd)(t.registerCommand(s.ZKf,()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==r.length){const i=e.current,o=r.pop();null!==i&&(n.push(i),t.dispatchCommand(s.WWb,!0)),0===r.length&&t.dispatchCommand(s.KfJ,!1),e.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:s.n0X})}}(t,e),!0),s.jZM),t.registerCommand(s.V30,()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==n.length){const i=e.current;null!==i&&(r.push(i),t.dispatchCommand(s.KfJ,!0));const o=n.pop();0===n.length&&t.dispatchCommand(s.WWb,!1),e.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:s.n0X})}}(t,e),!0),s.jZM),t.registerCommand(s.SKc,()=>(l(e),!1),s.jZM),t.registerCommand(s.t5V,()=>(l(e),t.dispatchCommand(s.WWb,!1),t.dispatchCommand(s.KfJ,!1),!0),s.jZM),t.registerUpdateListener(({editorState:n,prevEditorState:i,dirtyLeaves:o,dirtyElements:l,tags:c})=>{const a=e.current,u=e.redoStack,d=e.undoStack,f=null===a?null:a.editorState;if(null!==a&&n===f)return;const h=r(i,n,a,o,l,c);if(1===h)0!==u.length&&(e.redoStack=[],t.dispatchCommand(s.WWb,!1)),null!==a&&(d.push({...a}),t.dispatchCommand(s.KfJ,!0));else if(2===h)return;e.current={editor:t,editorState:n}}));return i}const a=(0,s.vE9)({build:(t,{delay:e,createInitialHistoryState:n,disabled:r})=>(0,i.v)({delay:e,disabled:r,historyState:n(t)}),config:(0,s.lVE)({createInitialHistoryState:function(){return{current:null,redoStack:[],undoStack:[]}},delay:300,disabled:"undefined"==typeof window}),name:"@lexical/history/History",register:(t,e,n)=>{const r=n.getOutput();return(0,i.QZ)(()=>r.disabled.value?void 0:c(t,r.historyState.value,r.delay))}});(0,s.vE9)({dependencies:[(0,s.O0w)(a,{createInitialHistoryState:()=>{throw new Error("SharedHistory did not inherit parent history")},disabled:!0})],name:"@lexical/history/SharedHistory",register(t,e,n){const{output:r}=n.getDependency(a),o=function(t){return t?(0,i.xT)(t,a.name):null}(t._parentEditor);if(!o)return()=>{};const s=o.output;return(0,i.QZ)(()=>(0,i.vA)(()=>{r.delay.value=s.delay.value,r.historyState.value=s.historyState.value,r.disabled.value=s.disabled.value}))}});var u=n(1609);function d({delay:t,externalHistoryState:e}){const[n]=(0,r.DF)();return function(t,e,n=1e3){const r=(0,u.useMemo)(()=>e||{current:null,redoStack:[],undoStack:[]},[e]);(0,u.useEffect)(()=>c(t,r,n),[n,t,r])}(n,e,t),null}},1497(t,e,n){n.d(e,{Db:()=>l,FJ:()=>u,Ou:()=>v,k_:()=>d,yW:()=>g});var r=n(3105),i=n(8832),o=n(8129);const s=new Set(["http:","https:","mailto:","sms:","tel:"]);class l extends i.fGB{__url;__target;__rel;__title;static getType(){return"link"}static clone(t){return new l(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",e={},n){super(n);const{target:r=null,rel:i=null,title:o=null}=e;this.__url=t,this.__target=r,this.__rel=i,this.__title=o}createDOM(t){const e=document.createElement("a");return this.updateLinkDOM(null,e,t),(0,r.ZB)(e,t.theme.link),e}updateLinkDOM(t,e,n){if((0,i.nYP)(e)){t&&t.__url===this.__url||(e.href=this.sanitizeUrl(this.__url));for(const n of["target","rel","title"]){const r=`__${n}`,i=this[r];t&&t[r]===i||(i?e[n]=i:e.removeAttribute(n))}}}updateDOM(t,e,n){return this.updateLinkDOM(t,e,n),!1}static importDOM(){return{a:t=>({conversion:c,priority:1})}}static importJSON(t){return a().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=y(t);try{const e=new URL(y(t));if(!s.has(e.protocol))return"about:blank"}catch(e){return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const e=this.getWritable();return e.__url=t,e}getTarget(){return this.getLatest().__target}setTarget(t){const e=this.getWritable();return e.__target=t,e}getRel(){return this.getLatest().__rel}setRel(t){const e=this.getWritable();return e.__rel=t,e}getTitle(){return this.getLatest().__title}setTitle(t){const e=this.getWritable();return e.__title=t,e}insertNewAfter(t,e=!0){const n=a(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,e),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,e,n){if(!(0,i.I2P)(e))return!1;const r=e.anchor.getNode(),o=e.focus.getNode();return this.isParentOf(r)&&this.isParentOf(o)&&e.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function c(t){let e=null;if((0,i.nYP)(t)){const n=t.textContent;(null!==n&&""!==n||t.children.length>0)&&(e=a(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function a(t="",e){return(0,i.pTq)(new l(t,e))}function u(t){return t instanceof l}class d extends l{__isUnlinked;constructor(t="",e={},n){super(t,e,n),this.__isUnlinked=void 0!==e.isUnlinked&&null!==e.isUnlinked&&e.isUnlinked}static getType(){return"autolink"}static clone(t){return new d(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const e=this.getWritable();return e.__isUnlinked=t,e}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,e,n){return super.updateDOM(t,e,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return f().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,e=!0){const n=this.getParentOrThrow().insertNewAfter(t,e);if((0,i.ff4)(n)){const t=f(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(t),t}return null}}function f(t="",e){return(0,i.pTq)(new d(t,e))}function h(t){return t instanceof d}const g=(0,i.guI)("TOGGLE_LINK_COMMAND");function p(t,e){if("element"===t.type){const n=t.getNode();return(0,i.ff4)(n)||function(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[t.offset+e]||null}return null}function m(t,e={}){let n;if(t&&"object"==typeof t){const{url:r,...i}=t;n=r,e={...i,...e}}else n=t;const{target:r,title:o}=e,s=void 0===e.rel?"noreferrer":e.rel,l=(0,i.vJq)();if(null===l||!(0,i.I2P)(l)&&!(0,i.RTZ)(l))return;if((0,i.RTZ)(l)){const t=l.getNodes();if(0===t.length)return;return void t.forEach(t=>{if(null===n){const e=(0,i.BtT)(t,t=>!h(t)&&u(t));e&&(e.insertBefore(t),0===e.getChildren().length&&e.remove())}else{const e=(0,i.BtT)(t,t=>!h(t)&&u(t));if(e)e.setURL(n),void 0!==r&&e.setTarget(r),void 0!==s&&e.setRel(s);else{const e=a(n,{rel:s,target:r});t.insertBefore(e),e.append(t)}}})}const c=l.extract();if(null===n){const t=new Set;return void c.forEach(e=>{const n=e.getParent();if(u(n)&&!h(n)){const e=n.getKey();if(t.has(e))return;!function(t,e){const n=new Set(e.filter(e=>t.isParentOf(e)).map(t=>t.getKey())),r=t.getChildren(),i=r.filter(t=>n.has(t.getKey()));if(i.length===r.length)return r.forEach(e=>t.insertBefore(e)),void t.remove();const o=r.findIndex(t=>n.has(t.getKey())),s=r.findLastIndex(t=>n.has(t.getKey())),l=0===o,c=s===r.length-1;if(l)i.forEach(e=>t.insertBefore(e));else if(c)for(let e=i.length-1;e>=0;e--)t.insertAfter(i[e]);else{for(let e=i.length-1;e>=0;e--)t.insertAfter(i[e]);const e=r.slice(s+1);if(e.length>0){const n=a(t.getURL(),{rel:t.getRel(),target:t.getTarget(),title:t.getTitle()});i[i.length-1].insertAfter(n),e.forEach(t=>n.append(t))}}}(n,c),t.add(e)}})}const d=new Set,f=t=>{d.has(t.getKey())||(d.add(t.getKey()),t.setURL(n),void 0!==r&&t.setTarget(r),void 0!==s&&t.setRel(s),void 0!==o&&t.setTitle(o))};if(1===c.length){const t=c[0],e=(0,i.BtT)(t,u);if(null!==e)return f(e)}!function(t){const e=(0,i.vJq)();if(!(0,i.I2P)(e))return t();const n=(0,i.CaD)(e),r=n.isBackward(),o=p(n.anchor,r?-1:0),s=p(n.focus,r?0:-1);if(t(),o||s){const t=(0,i.vJq)();if((0,i.I2P)(t)){const e=t.clone();if(o){const t=o.getParent();t&&e.anchor.set(t.getKey(),o.getIndexWithinParent()+(r?1:0),"element")}if(s){const t=s.getParent();t&&e.focus.set(t.getKey(),s.getIndexWithinParent()+(r?0:1),"element")}(0,i.n1P)((0,i.CaD)(e))}}}(()=>{let t=null;for(const e of c){if(!e.isAttached())continue;const l=(0,i.BtT)(e,u);if(l){f(l);continue}if((0,i.ff4)(e)){if(!e.isInline())continue;if(u(e)){if(!(h(e)||null!==t&&t.getParentOrThrow().isParentOf(e))){f(e),t=e;continue}for(const t of e.getChildren())e.insertBefore(t);e.remove();continue}}const c=e.getPreviousSibling();u(c)&&c.is(t)?c.append(e):(t=a(n,{rel:s,target:r,title:o}),e.insertAfter(t),t.append(e))}})}const _=/^\+?[0-9\s()-]{5,}$/;function y(t){return t.match(/^[a-z][a-z0-9+.-]*:/i)||t.match(/^[/#.]/)?t:t.includes("@")?`mailto:${t}`:_.test(t)?`tel:${t}`:`https://${t}`}function v(t,e){return(0,r.Sd)((0,o.QZ)(()=>t.registerCommand(g,t=>{const n=e.validateUrl.peek(),r=e.attributes.peek();if(null===t)return m(null),!0;if("string"==typeof t)return!(void 0!==n&&!n(t)||(m(t,r),0));{const{url:e,target:n,rel:i,title:o}=t;return m(e,{...r,rel:i,target:n,title:o}),!0}},i.AcJ)),(0,o.QZ)(()=>{const n=e.validateUrl.value;if(!n)return;const o=e.attributes.value;return t.registerCommand(i.waI,e=>{const s=(0,i.vJq)();if(!(0,i.I2P)(s)||s.isCollapsed()||!(0,r.xj)(e,ClipboardEvent))return!1;if(null===e.clipboardData)return!1;const l=e.clipboardData.getData("text");return!!n(l)&&!s.getNodes().some(t=>(0,i.ff4)(t))&&(t.dispatchCommand(g,{...o,url:l}),e.preventDefault(),!0)},i.AcJ)}))}const x=(0,i.vE9)({build:(t,e,n)=>(0,o.v)(e),config:{attributes:void 0,validateUrl:void 0},mergeConfig(t,e){const n=(0,i.Tc1)(t,e);return t.attributes&&(n.attributes=(0,i.Tc1)(t.attributes,n.attributes)),n},name:"@lexical/link/Link",nodes:()=>[l],register:(t,e,n)=>v(t,n.getOutput())});function S(t,e){for(let n=0;n<e.length;n++){const r=e[n](t);if(r)return r}return null}(0,i.vE9)({build:(t,e,n)=>(0,o.v)(e),config:(0,i.lVE)({disabled:!1,newTab:!1}),dependencies:[x],name:"@lexical/link/ClickableLink",register:(t,e,n)=>function(t,e,n={}){const r=n=>{const r=n.target;if(!(0,i.vAA)(r))return;const o=(0,i.scG)(r);if(null===o)return;let s=null,l=null;if(o.update(()=>{const t=(0,i.xL4)(r);if(null!==t){const n=(0,i.BtT)(t,i.ff4);if(!e.disabled.peek())if(u(n))s=n.sanitizeUrl(n.getURL()),l=n.getTarget();else{const t=function(t,e){let n=t;for(;null!=n;){if(e(n))return n;n=n.parentNode}return null}(r,i.nYP);null!==t&&(s=t.href,l=t.target)}}}),null===s||""===s)return;const c=t.getEditorState().read(i.vJq);if((0,i.I2P)(c)&&!c.isCollapsed())return void n.preventDefault();const a="auxclick"===n.type&&1===n.button;window.open(s,e.newTab.peek()||a||n.metaKey||n.ctrlKey||"_blank"===l?"_blank":"_self"),n.preventDefault()},o=t=>{1===t.button&&r(t)};return t.registerRootListener((t,e)=>{null!==e&&(e.removeEventListener("click",r),e.removeEventListener("mouseup",o)),null!==t&&(t.addEventListener("click",r,n),t.addEventListener("mouseup",o,n))})}(t,n.getOutput())});const C=/[.,;\s]/;function b(t){return C.test(t)}function T(t){return b(t[t.length-1])}function k(t){return b(t[0])}function N(t){let e=t.getPreviousSibling();return(0,i.ff4)(e)&&(e=e.getLastDescendant()),null===e||(0,i.wH$)(e)||(0,i.kFe)(e)&&T(e.getTextContent())}function E(t){let e=t.getNextSibling();return(0,i.ff4)(e)&&(e=e.getFirstDescendant()),null===e||(0,i.wH$)(e)||(0,i.kFe)(e)&&k(e.getTextContent())}function w(t,e,n,r){return!!(t>0?b(n[t-1]):N(r[0]))&&(e<n.length?b(n[e]):E(r[r.length-1]))}function O(t,e,n){const r=[],i=[],o=[];let s=0,l=0;const c=[...t];for(;c.length>0;){const t=c[0],a=t.getTextContent().length,u=l;l+a<=e?(r.push(t),s+=a):u>=n?o.push(t):i.push(t),l+=a,c.shift()}return[s,r,i,o]}function M(t,e,n,r){const o=f(r.url,r.attributes);if(1===t.length){let s,l=t[0];0===e?[s,l]=l.splitText(n):[,s,l]=l.splitText(e,n);const c=(0,i.sTu)(r.text);return c.setFormat(s.getFormat()),c.setDetail(s.getDetail()),c.setStyle(s.getStyle()),o.append(c),s.replace(o),l}if(t.length>1){const r=t[0];let s,l=r.getTextContent().length;0===e?s=r:[,s]=r.splitText(e);const c=[];let a;for(let e=1;e<t.length;e++){const r=t[e],i=r.getTextContent().length,o=l;if(o<n)if(l+i<=n)c.push(r);else{const[t,e]=r.splitText(n-o);c.push(t),a=e}l+=i}const u=(0,i.vJq)(),d=u?u.getNodes().find(i.kFe):void 0,f=(0,i.sTu)(s.getTextContent());return f.setFormat(s.getFormat()),f.setDetail(s.getDetail()),f.setStyle(s.getStyle()),o.append(f,...c),d&&d===s&&((0,i.I2P)(u)?f.select(u.anchor.offset,u.focus.offset):(0,i.RTZ)(u)&&f.select(0,f.getTextContent().length)),s.replace(o),a}}function P(t,e,n){const r=t.getChildren(),o=r.length;for(let e=0;e<o;e++){const o=r[e];if(!(0,i.kFe)(o)||!o.isSimpleText())return A(t),void n(null,t.getURL())}const s=t.getTextContent(),l=S(s,e);if(null===l||l.text!==s)return A(t),void n(null,t.getURL());if(!N(t)||!E(t))return A(t),void n(null,t.getURL());const c=t.getURL();if(c!==l.url&&(t.setURL(l.url),n(l.url,c)),l.attributes){const e=t.getRel();e!==l.attributes.rel&&(t.setRel(l.attributes.rel||null),n(l.attributes.rel||null,e));const r=t.getTarget();r!==l.attributes.target&&(t.setTarget(l.attributes.target||null),n(l.attributes.target||null,r))}}function A(t){const e=t.getChildren();for(let n=e.length-1;n>=0;n--)t.insertAfter(e[n]);return t.remove(),e.map(t=>t.getLatest())}const D={changeHandlers:[],matchers:[]};(0,i.vE9)({config:D,dependencies:[x],mergeConfig(t,e){const n=(0,i.Tc1)(t,e);for(const r of["matchers","changeHandlers"]){const i=e[r];Array.isArray(i)&&(n[r]=[...t[r],...i])}return n},name:"@lexical/link/AutoLink",register:function(t,e=D){const{matchers:n,changeHandlers:o}=e,s=(t,e)=>{for(const n of o)n(t,e)};return(0,r.Sd)(t.registerNodeTransform(i.Ey8,t=>{const e=t.getParentOrThrow(),r=t.getPreviousSibling();if(h(e)&&!e.getIsUnlinked())P(e,n,s);else if(!u(e)){if(t.isSimpleText()&&(k(t.getTextContent())||!h(r))){const e=function(t){const e=[t];let n=t.getNextSibling();for(;null!==n&&(0,i.kFe)(n)&&n.isSimpleText()&&(e.push(n),!/[\s]/.test(n.getTextContent()));)n=n.getNextSibling();return e}(t);!function(t,e,n){let r=[...t];const i=r.map(t=>t.getTextContent()).join("");let o,s=i,l=0;for(;(o=S(s,e))&&null!==o;){const t=o.index,e=t+o.length;if(w(l+t,l+e,i,r)){const[i,,s,c]=O(r,l+t,l+e),a=M(s,l+t-i,l+e-i,o);r=a?[a,...c]:c,n(o.url,null),l=0}else l+=e;s=s.substring(e)}}(e,n,s)}!function(t,e,n){const r=t.getPreviousSibling(),i=t.getNextSibling(),o=t.getTextContent();var s;!h(r)||r.getIsUnlinked()||k(o)&&(s=o,!(r.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(s):/^\.[a-zA-Z0-9]{1,}/.test(s)))||(r.append(t),P(r,e,n),n(null,r.getURL())),!h(i)||i.getIsUnlinked()||T(o)||(A(i),P(i,e,n),n(null,i.getURL()))}(t,n,s)}}),t.registerCommand(g,t=>{const e=(0,i.vJq)();return!(null!==t||!(0,i.I2P)(e)||(e.extract().forEach(t=>{const e=t.getParent();h(e)&&(e.setIsUnlinked(!e.getIsUnlinked()),e.markDirty())}),1))},i.AcJ))}})},1544(t,e,n){n.d(e,{jL:()=>w,dJ:()=>N,ZI:()=>R});var r=n(1885),i=n(7639),o=n(3105),s=n(8832);function l(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function c(t,e,n){const o=t.getData("application/x-lexical-editor");if(o)try{const t=JSON.parse(o);if(t.namespace===n._config.namespace&&Array.isArray(t.nodes))return a(n,function(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],o=(0,s.GMe)(r);(0,s.kFe)(o)&&(0,i.Xg)(o),e.push(o)}return e}(t.nodes),e)}catch(t){console.error(t)}const l=t.getData("text/html"),c=t.getData("text/plain");if(l&&c!==l)try{const t=(new DOMParser).parseFromString(function(t){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:t=>t}).createHTML(t):t}(l),"text/html");return a(n,(0,r.d)(n,t),e)}catch(t){console.error(t)}const u=c||t.getData("text/uri-list");if(null!=u)if((0,s.I2P)(e)){const t=u.split(/(\r?\n|\t)/);""===t[t.length-1]&&t.pop();for(let e=0;e<t.length;e++){const n=(0,s.vJq)();if((0,s.I2P)(n)){const r=t[e];"\n"===r||"\r\n"===r?n.insertParagraph():"\t"===r?n.insertNodes([(0,s.ev7)()]):n.insertText(r)}}}else e.insertRawText(u)}function a(t,e,n){t.dispatchCommand(s.oqR,{nodes:e,selection:n})||(n.insertNodes(e),function(t){if((0,s.I2P)(t)&&t.isCollapsed()){const e=t.anchor;let n=null;const r=(0,s.Ave)(e,"previous");if(r)if((0,s.rN)(r))n=r.origin;else{const t=(0,s.TJt)(r,(0,s.uwZ)((0,s.NiT)(),"next").getFlipped());for(const e of t){if((0,s.kFe)(e.origin)){n=e.origin;break}if((0,s.ff4)(e.origin)&&!e.origin.isInline())break}}if(n&&(0,s.kFe)(n)){const e=n.getFormat(),r=n.getStyle();t.format===e&&t.style===r||(t.format=e,t.style=r,t.dirty=!0)}}}(n))}function u(t,e,n,r=[]){let o=null===e||n.isSelected(e);const c=(0,s.ff4)(n)&&n.excludeFromCopy("html");let a=n;null!==e&&(0,s.kFe)(a)&&(a=(0,i.SD)(e,a,"clone"));const d=(0,s.ff4)(a)?a.getChildren():[],f=function(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&l(58,n.name),(0,s.ff4)(t)){const t=e.children;Array.isArray(t)||l(59,n.name)}return e}(a);(0,s.kFe)(a)&&0===a.getTextContentSize()&&(o=!1);for(let r=0;r<d.length;r++){const i=d[r],l=u(t,e,i,f.children);!o&&(0,s.ff4)(n)&&l&&n.extractWithChild(i,e,"clone")&&(o=!0)}if(o&&!c)r.push(f);else if(Array.isArray(f.children))for(let t=0;t<f.children.length;t++){const e=f.children[t];r.push(e)}return o}let d=null;async function f(t,e,n){if(null!==d)return!1;if(null!==e)return new Promise((r,i)=>{t.update(()=>{r(h(t,e,n))})});const r=t.getRootElement(),i=t._window||window,l=i.document,c=(0,s.peL)(i);if(null===r||null===c)return!1;const a=l.createElement("span");a.style.cssText="position: fixed; top: -1000px;",a.append(l.createTextNode("#")),r.append(a);const u=new Range;return u.setStart(a,0),u.setEnd(a,1),c.removeAllRanges(),c.addRange(u),new Promise((e,r)=>{const c=t.registerCommand(s.u5G,r=>((0,o.xj)(r,ClipboardEvent)&&(c(),null!==d&&(i.clearTimeout(d),d=null),e(h(t,r,n))),!0),s.da8);d=i.setTimeout(()=>{c(),d=null,e(!1)},50),l.execCommand("copy"),a.remove()})}function h(t,e,n){if(void 0===n){const e=(0,s.peL)(t._window),r=(0,s.vJq)();if(!r||r.isCollapsed())return!1;if(!e)return!1;const i=e.anchorNode,o=e.focusNode;if(null!==i&&null!==o&&!(0,s.LYZ)(t,i,o))return!1;n=function(t=(0,s.vJq)()){const e={"text/plain":t?t.getTextContent():""};if(t){const n=(0,s.i0_)();for(const[r,i]of g){const o=i(n,t);null!==o&&(e[r]=o)}}return e}(r)}e.preventDefault();const r=e.clipboardData;return null!==r&&(function(t,e){for(const[n]of g)void 0===e[n]&&t.setData(n,"");for(const n in e){const r=e[n];void 0!==r&&t.setData(n,r)}}(r,n),!0)}const g=[["text/html",function(t,e=(0,s.vJq)()){return null==e&&l(166),(0,s.I2P)(e)&&e.isCollapsed()||0===e.getNodes().length?"":(0,r.g)(t,e)}],["application/x-lexical-editor",function(t,e=(0,s.vJq)()){return null==e&&l(166),(0,s.I2P)(e)&&e.isCollapsed()||0===e.getNodes().length?null:JSON.stringify(function(t,e){const n=[],r=(0,s.NiT)().getChildren();for(let i=0;i<r.length;i++)u(t,e,r[i],n);return{namespace:t._config.namespace,nodes:n}}(t,e))}]];var p=n(4785);function m(t,e){if(void 0!==document.caretRangeFromPoint){const n=document.caretRangeFromPoint(t,e);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){const n=document.caretPositionFromPoint(t,e);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}const _="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,y=_&&"documentMode"in document?document.documentMode:null,v=_&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),x=!(!_||!("InputEvent"in window)||y)&&"getTargetRanges"in new window.InputEvent("input"),S=_&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),C=_&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b=_&&/^(?=.*Chrome).*/i.test(navigator.userAgent),T=_&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&v&&!b,k=(0,s.guI)("DRAG_DROP_PASTE_FILE");class N extends s.fGB{static getType(){return"quote"}static clone(t){return new N(t.__key)}createDOM(t){const e=document.createElement("blockquote");return(0,o.ZB)(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:P,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if((0,s.sby)(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();t&&(e.style.textAlign=t);const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){return E().updateFromJSON(t)}insertNewAfter(t,e){const n=(0,s.lJ7)(),r=this.getDirection();return n.setDirection(r),this.insertAfter(n,e),n}collapseAtStart(){const t=(0,s.lJ7)();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}canMergeWhenEmpty(){return!0}}function E(){return(0,s.pTq)(new N)}class w extends s.fGB{__tag;static getType(){return"heading"}static clone(t){return new w(t.__tag,t.__key)}constructor(t,e){super(e),this.__tag=t}getTag(){return this.__tag}setTag(t){const e=this.getWritable();return this.__tag=t,e}createDOM(t){const e=this.__tag,n=document.createElement(e),r=t.theme.heading;if(void 0!==r){const t=r[e];(0,o.ZB)(n,t)}return n}updateDOM(t,e,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:M,priority:0}),h2:t=>({conversion:M,priority:0}),h3:t=>({conversion:M,priority:0}),h4:t=>({conversion:M,priority:0}),h5:t=>({conversion:M,priority:0}),h6:t=>({conversion:M,priority:0}),p:t=>{const e=t.firstChild;return null!==e&&O(e)?{conversion:()=>({node:null}),priority:3}:null},span:t=>O(t)?{conversion:t=>({node:A("h1")}),priority:3}:null}}exportDOM(t){const{element:e}=super.exportDOM(t);if((0,s.sby)(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();t&&(e.style.textAlign=t);const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){return A(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,e=!0){const n=t?t.anchor.offset:0,r=this.getLastDescendant(),i=!r||t&&t.anchor.key===r.getKey()&&n===r.getTextContentSize()||!t?(0,s.lJ7)():A(this.getTag()),o=this.getDirection();if(i.setDirection(o),this.insertAfter(i,e),0===n&&!this.isEmpty()&&t){const t=(0,s.lJ7)();t.select(),this.replace(t,!0)}return i}collapseAtStart(){const t=this.isEmpty()?(0,s.lJ7)():A(this.getTag());return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}extractWithChild(){return!0}}function O(t){return"span"===t.nodeName.toLowerCase()&&"26pt"===t.style.fontSize}function M(t){const e=t.nodeName.toLowerCase();let n=null;return"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e||(n=A(e),null!==t.style&&((0,s.dxY)(t,n),n.setFormat(t.style.textAlign))),{node:n}}function P(t){const e=E();return null!==t.style&&(e.setFormat(t.style.textAlign),(0,s.dxY)(t,e)),{node:e}}function A(t="h1"){return(0,s.pTq)(new w(t))}function D(t){let e=null;if((0,o.xj)(t,DragEvent)?e=t.dataTransfer:(0,o.xj)(t,ClipboardEvent)&&(e=t.clipboardData),null===e)return[!1,[],!1];const n=e.types,r=n.includes("Files"),i=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(e.files),i]}function L(t){const e=(0,s.vJq)();if(!(0,s.I2P)(e))return!1;const n=new Set,r=e.getNodes();for(let e=0;e<r.length;e++){const i=r[e],o=i.getKey();if(n.has(o))continue;const l=(0,s.BtT)(i,t=>(0,s.ff4)(t)&&!t.isInline());if(null===l)continue;const c=l.getKey();l.canIndent()&&!n.has(c)&&(n.add(c),t(l))}return n.size>0}function F(t){const e=(0,s.xL4)(t);return(0,s.Cyw)(e)}function I(t){for(const e of["lowercase","uppercase","capitalize"])t.hasFormat(e)&&t.toggleFormat(e)}function R(t){return(0,o.Sd)(t.registerCommand(s.d8p,t=>{const e=(0,s.vJq)();return!!(0,s.RTZ)(e)&&(e.clear(),!0)},s.jZM),t.registerCommand(s.WuB,t=>{const e=(0,s.vJq)();return(0,s.I2P)(e)?(e.deleteCharacter(t),!0):!!(0,s.RTZ)(e)&&(e.deleteNodes(),!0)},s.jZM),t.registerCommand(s.hi0,t=>{const e=(0,s.vJq)();return!!(0,s.I2P)(e)&&(e.deleteWord(t),!0)},s.jZM),t.registerCommand(s.viC,t=>{const e=(0,s.vJq)();return!!(0,s.I2P)(e)&&(e.deleteLine(t),!0)},s.jZM),t.registerCommand(s.bM3,e=>{const n=(0,s.vJq)();if("string"==typeof e)null!==n&&n.insertText(e);else{if(null===n)return!1;const r=e.dataTransfer;if(null!=r)c(r,n,t);else if((0,s.I2P)(n)){const t=e.data;return t&&n.insertText(t),!0}}return!0},s.jZM),t.registerCommand(s.$ey,()=>{const t=(0,s.vJq)();return!!(0,s.I2P)(t)&&(t.removeText(),!0)},s.jZM),t.registerCommand(s.mB,t=>{const e=(0,s.vJq)();return!!(0,s.I2P)(e)&&(e.formatText(t),!0)},s.jZM),t.registerCommand(s.fUS,t=>{const e=(0,s.vJq)();if(!(0,s.I2P)(e)&&!(0,s.RTZ)(e))return!1;const n=e.getNodes();for(const e of n){const n=(0,s.BtT)(e,t=>(0,s.ff4)(t)&&!t.isInline());null!==n&&n.setFormat(t)}return!0},s.jZM),t.registerCommand(s.FEN,t=>{const e=(0,s.vJq)();return!!(0,s.I2P)(e)&&(e.insertLineBreak(t),!0)},s.jZM),t.registerCommand(s.XKQ,()=>{const t=(0,s.vJq)();return!!(0,s.I2P)(t)&&(t.insertParagraph(),!0)},s.jZM),t.registerCommand(s.YW5,()=>((0,s.H2A)([(0,s.ev7)()]),!0),s.jZM),t.registerCommand(s.PiT,()=>L(t=>{const e=t.getIndent();t.setIndent(e+1)}),s.jZM),t.registerCommand(s.sik,()=>L(t=>{const e=t.getIndent();e>0&&t.setIndent(Math.max(0,e-1))}),s.jZM),t.registerCommand(s.UDz,t=>{const e=(0,s.vJq)();if((0,s.RTZ)(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}else if((0,s.I2P)(e)){const n=(0,s.B$P)(e.focus,!0);if(!t.shiftKey&&(0,s.Cyw)(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1},s.jZM),t.registerCommand(s.bbF,t=>{const e=(0,s.vJq)();if((0,s.RTZ)(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectNext(0,0),!0}else if((0,s.I2P)(e)){if(function(t){const e=t.focus;return"root"===e.key&&e.offset===(0,s.NiT)().getChildrenSize()}(e))return t.preventDefault(),!0;const n=(0,s.B$P)(e.focus,!1);if(!t.shiftKey&&(0,s.Cyw)(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1},s.jZM),t.registerCommand(s.AX0,t=>{const e=(0,s.vJq)();if((0,s.RTZ)(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),(0,i.dt)(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!(0,s.I2P)(e))return!1;if((0,i.Cb)(e,!0)){const n=t.shiftKey;return t.preventDefault(),(0,i.Rk)(e,n,!0),!0}return!1},s.jZM),t.registerCommand(s.JM3,t=>{const e=(0,s.vJq)();if((0,s.RTZ)(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),(0,i.dt)(n[0])?n[0].selectPrevious():n[0].selectNext(0,0),!0}if(!(0,s.I2P)(e))return!1;const n=t.shiftKey;return!!(0,i.Cb)(e,!1)&&(t.preventDefault(),(0,i.Rk)(e,n,!1),!0)},s.jZM),t.registerCommand(s.gCZ,e=>{if(F(e.target))return!1;const n=(0,s.vJq)();if((0,s.I2P)(n)){if(function(t){if(!t.isCollapsed())return!1;const{anchor:e}=t;if(0!==e.offset)return!1;const n=e.getNode();if((0,s.hVZ)(n))return!1;const r=(0,o.mB)(n);return r.getIndent()>0&&(r.is(n)||n.is(r.getFirstDescendant()))}(n))return e.preventDefault(),t.dispatchCommand(s.sik,void 0);if(C&&"ko-KR"===navigator.language)return!1}else if(!(0,s.RTZ)(n))return!1;return e.preventDefault(),t.dispatchCommand(s.WuB,!0)},s.jZM),t.registerCommand(s.w$Z,e=>{if(F(e.target))return!1;const n=(0,s.vJq)();return!(!(0,s.I2P)(n)&&!(0,s.RTZ)(n))&&(e.preventDefault(),t.dispatchCommand(s.WuB,!1))},s.jZM),t.registerCommand(s.RTo,e=>{const n=(0,s.vJq)();if(!(0,s.I2P)(n))return!1;if(I(n),null!==e){if((C||S||T)&&x)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(s.FEN,!1)}return t.dispatchCommand(s.XKQ,void 0)},s.jZM),t.registerCommand(s.Q$N,()=>{const e=(0,s.vJq)();return!!(0,s.I2P)(e)&&(t.blur(),!0)},s.jZM),t.registerCommand(s.Sr4,e=>{const[,n]=D(e);if(n.length>0){const r=m(e.clientX,e.clientY);if(null!==r){const{offset:e,node:i}=r,o=(0,s.xL4)(i);if(null!==o){const t=(0,s.uTE)();if((0,s.kFe)(o))t.anchor.set(o.getKey(),e,"text"),t.focus.set(o.getKey(),e,"text");else{const e=o.getParentOrThrow().getKey(),n=o.getIndexWithinParent()+1;t.anchor.set(e,n,"element"),t.focus.set(e,n,"element")}const n=(0,s.CaD)(t);(0,s.n1P)(n)}t.dispatchCommand(k,n)}return e.preventDefault(),!0}const r=(0,s.vJq)();return!!(0,s.I2P)(r)},s.jZM),t.registerCommand(s.TgX,t=>{const[e]=D(t),n=(0,s.vJq)();return!(e&&!(0,s.I2P)(n))},s.jZM),t.registerCommand(s.riq,t=>{const[e]=D(t),n=(0,s.vJq)();if(e&&!(0,s.I2P)(n))return!1;const r=m(t.clientX,t.clientY);if(null!==r){const e=(0,s.xL4)(r.node);(0,s.Cyw)(e)&&t.preventDefault()}return!0},s.jZM),t.registerCommand(s.HYn,()=>((0,s.e1k)(),!0),s.jZM),t.registerCommand(s.u5G,e=>(f(t,(0,o.xj)(e,ClipboardEvent)?e:null),!0),s.jZM),t.registerCommand(s.VSO,e=>(async function(t,e){await f(e,(0,o.xj)(t,ClipboardEvent)?t:null),e.update(()=>{const t=(0,s.vJq)();(0,s.I2P)(t)?t.removeText():(0,s.RTZ)(t)&&t.getNodes().forEach(t=>t.remove())})}(e,t),!0),s.jZM),t.registerCommand(s.waI,e=>{const[,n,r]=D(e);return n.length>0&&!r?(t.dispatchCommand(k,n),!0):!((0,s.vAA)(e.target)&&(0,s.Z$U)(e.target)||null===(0,s.vJq)()||(function(t,e){t.preventDefault(),e.update(()=>{const n=(0,s.vJq)(),r=(0,o.xj)(t,InputEvent)||(0,o.xj)(t,KeyboardEvent)?null:t.clipboardData;null!=r&&null!==n&&c(r,n,e)},{tag:s.fwY})}(e,t),0))},s.jZM),t.registerCommand(s.Huu,t=>{const e=(0,s.vJq)();return(0,s.I2P)(e)&&I(e),!1},s.jZM),t.registerCommand(s.OXk,t=>{const e=(0,s.vJq)();return(0,s.I2P)(e)&&I(e),!1},s.jZM))}(0,s.vE9)({conflictsWith:["@lexical/plain-text"],dependencies:[p.P],name:"@lexical/rich-text",nodes:()=>[w,N],register:R})},1885(t,e,n){n.d(e,{d:()=>o,g:()=>s});var r=n(7639),i=n(8832);function o(t,e){const n=(0,i.mB$)(e)?e.body.childNodes:e.childNodes;let r=[];const o=[];for(const e of n)if(!c.has(e.nodeName)){const n=a(e,t,o,!1);null!==n&&(r=r.concat(n))}return function(t){for(const e of t)e.getNextSibling()instanceof i.A7V&&e.insertAfter((0,i.WKo)());for(const e of t){const t=e.getChildren();for(const n of t)e.insertBefore(n);e.remove()}}(o),r}function s(t,e){if("undefined"==typeof document||"undefined"==typeof window&&void 0===globalThis.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=(0,i.NiT)().getChildren();for(let i=0;i<r.length;i++)l(t,r[i],n,e);return n.innerHTML}function l(t,e,n,o=null){let s=null===o||e.isSelected(o);const c=(0,i.ff4)(e)&&e.excludeFromCopy("html");let a=e;null!==o&&(0,i.kFe)(e)&&(a=(0,r.SD)(o,e,"clone"));const u=(0,i.ff4)(a)?a.getChildren():[],d=(0,i.Jvg)(t,a.getType());let f;f=d&&void 0!==d.exportDOM?d.exportDOM(t,a):a.exportDOM(t);const{element:h,after:g}=f;if(!h)return!1;const p=document.createDocumentFragment();for(let n=0;n<u.length;n++){const r=u[n],c=l(t,r,p,o);!s&&(0,i.ff4)(e)&&c&&e.extractWithChild(r,o,"html")&&(s=!0)}if(s&&!c){if(((0,i.sby)(h)||(0,i.K8K)(h))&&h.append(p),n.append(h),g){const t=g.call(a,h);t&&((0,i.K8K)(h)?h.replaceChildren(t):h.replaceWith(t))}}else n.append(p);return s}const c=new Set(["STYLE","SCRIPT"]);function a(t,e,n,r,o=new Map,s){let l=[];if(c.has(t.nodeName))return l;let u=null;const d=function(t,e){const{nodeName:n}=t,r=e._htmlConversions.get(n.toLowerCase());let i=null;if(void 0!==r)for(const e of r){const n=e(t);null!==n&&(null===i||(i.priority||0)<=(n.priority||0))&&(i=n)}return null!==i?i.conversion:null}(t,e),f=d?d(t):null;let h=null;if(null!==f){h=f.after;const e=f.node;if(u=Array.isArray(e)?e[e.length-1]:e,null!==u){for(const[,t]of o)if(u=t(u,s),!u)break;u&&l.push(...Array.isArray(e)?e:[u])}null!=f.forChild&&o.set(t.nodeName,f.forChild)}const g=t.childNodes;let p=[];const m=(null==u||!(0,i.IqF)(u))&&(null!=u&&(0,i.y68)(u)||r);for(let t=0;t<g.length;t++)p.push(...a(g[t],e,n,m,new Map(o),u));return null!=h&&(p=h(p)),(0,i.a9V)(t)&&(p=function(t,e,n){const r=t.style.textAlign,o=[];let s=[];for(let t=0;t<e.length;t++){const l=e[t];if((0,i.y68)(l))r&&!l.getFormat()&&l.setFormat(r),o.push(l);else if(s.push(l),t===e.length-1||t<e.length-1&&(0,i.y68)(e[t+1])){const t=n();t.setFormat(r),t.append(...s),o.push(t),s=[]}}return o}(t,p,m?()=>{const t=new i.A7V;return n.push(t),t}:i.lJ7)),null==u?p.length>0?l=l.concat(p):(0,i.a9V)(t)&&function(t){return null!=t.nextSibling&&null!=t.previousSibling&&(0,i._On)(t.nextSibling)&&(0,i._On)(t.previousSibling)}(t)&&(l=l.concat((0,i.WKo)())):(0,i.ff4)(u)&&u.append(...p),l}},3105(t,e,n){n.d(e,{HE:()=>u,OV:()=>m,Sd:()=>c,ZB:()=>a,eu:()=>d,mB:()=>f,xj:()=>h,zD:()=>g});var r=n(8832);const i="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,o=i&&"documentMode"in document?document.documentMode:null,s=(i&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),i&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent));!(!i||!("InputEvent"in window)||o)&&new window.InputEvent("input"),i&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),i&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,i&&/Android/.test(navigator.userAgent),i&&/^(?=.*Chrome).*/i.test(navigator.userAgent);function l(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}function c(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function a(t,...e){const n=l(...e);n.length>0&&t.classList.add(...n)}function u(t,...e){const n=l(...e);n.length>0&&t.classList.remove(...n)}function d(t,e){let n=t;for(;null!=n;){if(n instanceof e)return n;n=n.getParent()}return null}function f(t){const e=(0,r.BtT)(t,t=>(0,r.ff4)(t)&&!t.isInline());return(0,r.ff4)(e)||function(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,t.__key),e}function h(t,e){return null!==t&&Object.getPrototypeOf(t).constructor.name===e.name}function g(t,e){const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);null!==i&&n.push(i)}return n}i&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);let p=!(s||!i)&&void 0;function m(t){let e=1;if(function(){if(void 0===p){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const e=t.getBoundingClientRect();t.style.setProperty("zoom","2"),p=t.getBoundingClientRect().width===e.width,document.body.removeChild(t)}return p}())for(;t;)e*=Number(window.getComputedStyle(t).getPropertyValue("zoom")),t=t.parentElement;return e}},3439(t,e,n){n.d(e,{W:()=>l});var r=n(8129),i=n(1497),o=n(4439),s=n(1609);function l({validateUrl:t,attributes:e}){const[n]=(0,o.DF)();return(0,s.useEffect)(()=>{if(!n.hasNodes([i.Db]))throw new Error("LinkPlugin: LinkNode not registered on editor")}),(0,s.useEffect)(()=>(0,i.Ou)(n,(0,r.v)({attributes:e,validateUrl:t})),[n,t,e]),null}},3570(t,e,n){n.d(e,{$:()=>x});var r=n(4439),i=n(1609);const o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function s(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}var l=n(8129);const c=(0,n(8832).vE9)({name:"@lexical/react/ReactProvider"});var a=n(5795),u=n(790),d=n(5745),f=n(3105),h=n(4785),g=n(1544);function p(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const m="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function _({editor:t,ErrorBoundary:e}){return function(t,e){const[n,r]=(0,i.useState)(()=>t.getDecorators());return m(()=>t.registerDecoratorListener(t=>{(0,a.flushSync)(()=>{r(t)})}),[t]),(0,i.useEffect)(()=>{r(t.getDecorators())},[t]),(0,i.useMemo)(()=>{const r=[],o=Object.keys(n);for(let s=0;s<o.length;s++){const l=o[s],c=(0,u.jsx)(e,{onError:e=>t._onError(e),children:(0,u.jsx)(i.Suspense,{fallback:null,children:n[l]})}),d=t.getElementByKey(l);null!==d&&r.push((0,a.createPortal)(c,d,l))}return r},[e,n,t])}(t,e)}function y({editor:t,ErrorBoundary:e}){return function(t){const e=l.iZ.maybeFromEditor(t);if(e&&e.hasExtensionByName(c.name)){for(const t of["@lexical/plain-text","@lexical/rich-text"])e.hasExtensionByName(t)&&p(320,t);return!0}return!1}(t)?null:(0,u.jsx)(_,{editor:t,ErrorBoundary:e})}function v(t){return t.getEditorState().read((0,d.yl)(t.isComposing()))}function x({contentEditable:t,placeholder:e=null,ErrorBoundary:n}){const[i]=(0,r.DF)();return m(()=>(0,f.Sd)((0,g.ZI)(o),(0,h.U)(o)),[o=i]),(0,u.jsxs)(u.Fragment,{children:[t,(0,u.jsx)(S,{content:e}),(0,u.jsx)(y,{editor:i,ErrorBoundary:n})]});var o}function S({content:t}){const[e]=(0,r.DF)(),n=function(t){const[e,n]=(0,i.useState)(()=>v(t));return m(()=>{function e(){const e=v(t);n(e)}return e(),(0,f.Sd)(t.registerUpdateListener(()=>{e()}),t.registerEditableListener(()=>{e()}))},[t]),e}(e),l=function(t){const[e]=(0,r.DF)(),n=(0,i.useMemo)(()=>t(e),[e,t]),[s,l]=(0,i.useState)(()=>n.initialValueFn()),c=(0,i.useRef)(s);return o(()=>{const{initialValueFn:t,subscribe:e}=n,r=t();return c.current!==r&&(c.current=r,l(r)),e(t=>{c.current=t,l(t)})},[n,t]),s}(s);return n?"function"==typeof t?t(l):t:null}},4439(t,e,n){n.d(e,{DF:()=>s,Gu:()=>i,Mx:()=>o});var r=n(1609);const i=(0,r.createContext)(null);function o(t,e){let n=null;return null!=t&&(n=t[1]),{getTheme:function(){return null!=e?e:null!=n?n.getTheme():null}}}function s(){const t=(0,r.useContext)(i);return null==t&&function(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),t}},4785(t,e,n){n.d(e,{P:()=>s,U:()=>o});var r=n(8129),i=n(8832);function o(t){const e=window.location.origin,n=n=>{if(n.origin!==e)return;const r=t.getRootElement();if(document.activeElement!==r)return;const o=n.data;if("string"==typeof o){let e;try{e=JSON.parse(o)}catch(t){return}if(e&&"nuanria_messaging"===e.protocol&&"request"===e.type){const r=e.payload;if(r&&"makeChanges"===r.functionId){const e=r.args;if(e){const[r,o,s,l,c]=e;t.update(()=>{const t=(0,i.vJq)();if((0,i.I2P)(t)){const e=t.anchor;let a=e.getNode(),u=0,d=0;if((0,i.kFe)(a)&&r>=0&&o>=0&&(u=r,d=r+o,t.setTextNodeRange(a,u,a,d)),u===d&&""===s||(t.insertRawText(s),a=e.getNode()),(0,i.kFe)(a)){u=l,d=l+c;const e=a.getTextContentSize();u=u>e?e:u,d=d>e?e:d,t.setTextNodeRange(a,u,a,d)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const s=(0,i.vE9)({build:(t,e,n)=>(0,r.v)(e),config:(0,i.lVE)({disabled:"undefined"==typeof window}),name:"@lexical/dragon",register:(t,e,n)=>(0,r.QZ)(()=>n.getOutput().disabled.value?void 0:o(t))})},5745(t,e,n){n.d(e,{yl:()=>i});var r=n(8832);function i(t){return()=>function(t){if(!function(t,e=!0){if(t)return!1;let n=(0,r.NiT)().getTextContent();return e&&(n=n.trim()),""===n}(t,!1))return!1;const e=(0,r.NiT)().getChildren(),n=e.length;if(n>1)return!1;for(let t=0;t<n;t++){const n=e[t];if((0,r.Cyw)(n))return!1;if((0,r.ff4)(n)){if(!(0,r.bSg)(n))return!1;if(0!==n.__indent)return!1;const e=n.getChildren(),i=e.length;for(let n=0;n<i;n++){const n=e[t];if(!(0,r.kFe)(n))return!1}}}return!0}(t)}},5838(t,e,n){n.d(e,{D:()=>l});var r=n(4439),i=n(8832),o=n(1609);const s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;function l({ignoreHistoryMergeTagChange:t=!0,ignoreSelectionChange:e=!1,onChange:n}){const[o]=(0,r.DF)();return s(()=>{if(n)return o.registerUpdateListener(({editorState:r,dirtyElements:s,dirtyLeaves:l,prevEditorState:c,tags:a})=>{e&&0===s.size&&0===l.size||t&&a.has(i.T40)||c.isEmpty()||n(r,o,a)})},[o,t,e,n]),null}},6246(t,e,n){n.d(e,{n:()=>u});var r=n(4439),i=n(8832),o=n(1609),s=n(790);const l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,c=l?o.useLayoutEffect:o.useEffect,a={tag:i.T40};function u({initialConfig:t,children:e}){const n=(0,o.useMemo)(()=>{const{theme:e,namespace:n,nodes:o,onError:s,editorState:c,html:u}=t,d=(0,r.Mx)(null,e),f=(0,i.ieJ)({editable:t.editable,html:u,namespace:n,nodes:o,onError:t=>s(t,f),theme:e});return function(t,e){if(null!==e)if(void 0===e)t.update(()=>{const e=(0,i.NiT)();if(e.isEmpty()){const n=(0,i.lJ7)();e.append(n);const r=l?document.activeElement:null;(null!==(0,i.vJq)()||null!==r&&r===t.getRootElement())&&n.select()}},a);else if(null!==e)switch(typeof e){case"string":{const n=t.parseEditorState(e);t.setEditorState(n,a);break}case"object":t.setEditorState(e,a);break;case"function":t.update(()=>{(0,i.NiT)().isEmpty()&&e(t)},a)}}(f,c),[f,d]},[]);return c(()=>{const e=t.editable,[r]=n;r.setEditable(void 0===e||e)},[]),(0,s.jsx)(r.Gu.Provider,{value:n,children:e})}},7639(t,e,n){n.d(e,{Cb:()=>g,Rk:()=>m,SD:()=>u,Wh:()=>s,Xg:()=>d,dt:()=>a});var r=n(8832);const i=new Map;function o(t){const e={};if(!t)return e;const n=t.split(";");for(const t of n)if(""!==t){const[n,r]=t.split(/:([^]+)/);n&&r&&(e[n.trim()]=r.trim())}return e}function s(t){let e=i.get(t);return void 0===e&&(e=o(t),i.set(t,e)),e}function l(t){const e=(0,r.i0_)().getElementByKey(t.getKey());if(null===e)return null;const n=e.ownerDocument.defaultView;return null===n?null:n.getComputedStyle(e)}function c(t){return l((0,r.hVZ)(t)?t:t.getParentOrThrow())}function a(t){const e=c(t);return null!==e&&"rtl"===e.direction}function u(t,e,n="self"){const i=t.getStartEndPoints();if(e.isSelected(t)&&!(0,r.Rb_)(e)&&null!==i){const[o,s]=i,l=t.isBackward(),c=o.getNode(),a=s.getNode(),u=e.is(c),d=e.is(a);if(u||d){const[i,o]=(0,r.Cku)(t),s=c.is(a),u=e.is(l?a:c),d=e.is(l?c:a);let f,h=0;s?(h=i>o?o:i,f=i>o?i:o):u?(h=l?o:i,f=void 0):d&&(h=0,f=l?i:o);const g=e.__text.slice(h,f);g!==e.__text&&("clone"===n&&(e=(0,r.U5P)(e)),e.__text=g)}}return e}function d(t){const e=t.getStyle(),n=o(e);i.set(e,n)}function f(t){const e=h(t);return null!==e&&"vertical-rl"===e.writingMode}function h(t){const e=t.anchor.getNode();return(0,r.ff4)(e)?l(e):c(e)}function g(t,e){let n=f(t)?!e:e;p(t)&&(n=!n);const i=(0,r.Ave)(t.focus,n?"previous":"next");if((0,r.pGK)(i))return!1;for(const t of(0,r.mWO)(i)){if((0,r.cmH)(t))return!t.origin.isInline();if(!(0,r.ff4)(t.origin)){if((0,r.Cyw)(t.origin))return!0;break}}return!1}function p(t){const e=h(t);return null!==e&&"rtl"===e.direction}function m(t,e,n){const r=p(t);let i;i=f(t)||r?!n:n,function(t,e,n){t.modify(e?"extend":"move",n,"character")}(t,e,i)}},7704(t,e,n){n.d(e,{R:()=>c});var r=n(1609);const i=(0,r.createContext)(null),o={didCatch:!1,error:null};class s extends r.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=o}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(null!==t){for(var e,n,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];null===(e=(n=this.props).onReset)||void 0===e||e.call(n,{args:i,reason:"imperative-api"}),this.setState(o)}}componentDidCatch(t,e){var n,r;null===(n=(r=this.props).onError)||void 0===n||n.call(r,t,e)}componentDidUpdate(t,e){const{didCatch:n}=this.state,{resetKeys:r}=this.props;var i,s;n&&null!==e.error&&function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length!==e.length||t.some((t,n)=>!Object.is(t,e[n]))}(t.resetKeys,r)&&(null===(i=(s=this.props).onReset)||void 0===i||i.call(s,{next:r,prev:t.resetKeys,reason:"keys"}),this.setState(o))}render(){const{children:t,fallbackRender:e,FallbackComponent:n,fallback:o}=this.props,{didCatch:s,error:l}=this.state;let c=t;if(s){const t={error:l,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof e)c=e(t);else if(n)c=(0,r.createElement)(n,t);else{if(void 0===o)throw l;c=o}}return(0,r.createElement)(i.Provider,{value:{didCatch:s,error:l,resetErrorBoundary:this.resetErrorBoundary}},c)}}var l=n(790);function c({children:t,onError:e}){return(0,l.jsx)(s,{fallback:(0,l.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:t})}},8129(t,e,n){n.d(e,{QZ:()=>k,iZ:()=>Z,v:()=>N,vA:()=>l,xT:()=>q});var r=n(8832),i=n(3105);const o=Symbol.for("preact-signals");function s(){if(d>1)return void d--;let t,e=!1;for(;void 0!==a;){let n=a;for(a=void 0,f++;void 0!==n;){const r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&_(n))try{n.c()}catch(n){e||(t=n,e=!0)}n=r}}if(f=0,d--,e)throw t}function l(t){if(d>0)return t();d++;try{return t()}finally{s()}}let c,a;function u(t){const e=c;c=void 0;try{return t()}finally{c=e}}let d=0,f=0,h=0;function g(t){if(void 0===c)return;let e=t.n;return void 0===e||e.t!==c?(e={i:0,S:t,p:c.s,n:void 0,t:c,e:void 0,x:void 0,r:e},void 0!==c.s&&(c.s.n=e),c.s=e,t.n=e,32&c.f&&t.S(e),e):-1===e.i?(e.i=0,void 0!==e.n&&(e.n.p=e.p,void 0!==e.p&&(e.p.n=e.n),e.p=c.s,e.n=void 0,c.s.n=e,c.s=e),e):void 0}function p(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name}function m(t,e){return new p(t,e)}function _(t){for(let e=t.s;void 0!==e;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function y(t){for(let e=t.s;void 0!==e;e=e.n){const n=e.S.n;if(void 0!==n&&(e.r=n),e.S.n=e,e.i=-1,void 0===e.n){t.s=e;break}}}function v(t){let e,n=t.s;for(;void 0!==n;){const t=n.p;-1===n.i?(n.S.U(n),void 0!==t&&(t.n=n.n),void 0!==n.n&&(n.n.p=t)):e=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=t}t.s=e}function x(t,e){p.call(this,void 0),this.x=t,this.s=void 0,this.g=h-1,this.f=4,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name}function S(t){const e=t.u;if(t.u=void 0,"function"==typeof e){d++;const n=c;c=void 0;try{e()}catch(e){throw t.f&=-2,t.f|=8,C(t),e}finally{c=n,s()}}}function C(t){for(let e=t.s;void 0!==e;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,S(t)}function b(t){if(c!==this)throw new Error("Out-of-order effect");v(this),c=t,this.f&=-2,8&this.f&&C(this),s()}function T(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==e?void 0:e.name}function k(t,e){const n=new T(t,e);try{n.c()}catch(t){throw n.d(),t}const r=n.d.bind(n);return r[Symbol.dispose]=r,r}function N(t,e={}){const n={};for(const r in t){const i=e[r],o=m(void 0===i?t[r]:i);n[r]=o}return n}function E(){const t=(0,r.NiT)(),e=(0,r.vJq)(),n=(0,r.lJ7)();t.clear(),t.append(n),null!==e&&n.select(),(0,r.I2P)(e)&&(e.format=0)}function w(t){return("function"==typeof t.nodes?t.nodes():t.nodes)||[]}function O(t,e){let n;return m(t(),{unwatched(){n&&(n(),n=void 0)},watched(){this.value=t(),n=e(this)}})}p.prototype.brand=o,p.prototype.h=function(){return!0},p.prototype.S=function(t){const e=this.t;e!==t&&void 0===t.e&&(t.x=e,this.t=t,void 0!==e?e.e=t:u(()=>{var t;null==(t=this.W)||t.call(this)}))},p.prototype.U=function(t){if(void 0!==this.t){const e=t.e,n=t.x;void 0!==e&&(e.x=n,t.e=void 0),void 0!==n&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n,void 0===n&&u(()=>{var t;null==(t=this.Z)||t.call(this)}))}},p.prototype.subscribe=function(t){return k(()=>{const e=this.value,n=c;c=void 0;try{t(e)}finally{c=n}},{name:"sub"})},p.prototype.valueOf=function(){return this.value},p.prototype.toString=function(){return this.value+""},p.prototype.toJSON=function(){return this.value},p.prototype.peek=function(){const t=c;c=void 0;try{return this.value}finally{c=t}},Object.defineProperty(p.prototype,"value",{get(){const t=g(this);return void 0!==t&&(t.i=this.i),this.v},set(t){if(t!==this.v){if(f>100)throw new Error("Cycle detected");this.v=t,this.i++,h++,d++;try{for(let t=this.t;void 0!==t;t=t.x)t.t.N()}finally{s()}}}}),x.prototype=new p,x.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===h)return!0;if(this.g=h,this.f|=1,this.i>0&&!_(this))return this.f&=-2,!0;const t=c;try{y(this),c=this;const t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return c=t,v(this),this.f&=-2,!0},x.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(let t=this.s;void 0!==t;t=t.n)t.S.S(t)}p.prototype.S.call(this,t)},x.prototype.U=function(t){if(void 0!==this.t&&(p.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(let t=this.s;void 0!==t;t=t.n)t.S.U(t)}},x.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let t=this.t;void 0!==t;t=t.x)t.t.N()}},Object.defineProperty(x.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const t=g(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v}}),T.prototype.c=function(){const t=this.S();try{if(8&this.f)return;if(void 0===this.x)return;const t=this.x();"function"==typeof t&&(this.u=t)}finally{t()}},T.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,S(this),y(this),d++;const t=c;return c=this,b.bind(this,t)},T.prototype.N=function(){2&this.f||(this.f|=2,this.o=a,a=this)},T.prototype.d=function(){this.f|=8,1&this.f||C(this)},T.prototype.dispose=function(){this.d()},(0,r.vE9)({build:(t,e,n)=>N(e),config:(0,r.lVE)({defaultSelection:"rootEnd",disabled:!1}),name:"@lexical/extension/AutoFocus",register(t,e,n){const r=n.getOutput();return k(()=>r.disabled.value?void 0:t.registerRootListener(e=>{t.focus(()=>{const t=document.activeElement;null===e||null!==t&&e.contains(t)||e.focus({preventScroll:!0})},{defaultSelection:r.defaultSelection.peek()})}))}}),(0,r.vE9)({build:(t,e,n)=>N(e),config:(0,r.lVE)({$onClear:E}),name:"@lexical/extension/ClearEditor",register(t,e,n){const{$onClear:i}=n.getOutput();return k(()=>function(t,e=E){return t.registerCommand(r.SKc,n=>(t.update(e),!0),r.jZM)}(t,i.value))}});const M=(0,r.vE9)({build:t=>O(()=>t.getEditorState(),e=>t.registerUpdateListener(t=>{e.value=t.editorState})),name:"@lexical/extension/EditorState"});function P(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function A(t,e){if(t&&e&&!Array.isArray(e)&&"object"==typeof t&&"object"==typeof e){const n=t,r=e;for(const t in r)n[t]=A(n[t],r[t]);return t}return e}function D(t){return 0===t.id}function L(t){return 2===t.id}const F=new Set;class I{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(t,e){this.builder=t,this.extension=e,this.configs=new Set,this.state={id:0}}mergeConfigs(){let t=this.extension.config||{};const e=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):r.Tc1;for(const n of this.configs)t=e(t,n);return t}init(t){const e=this.state;L(e)||P(306,String(e.id));const n={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},r={...n,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},i=function(t,e,n){return Object.assign(t,{config:e,id:3,registerState:n})}(e,this.mergeConfigs(),n);let o;this.state=i,this.extension.init&&(o=this.extension.init(t,i.config,n)),this.state=function(t,e,n){return Object.assign(t,{id:4,initResult:e,registerState:n})}(i,o,r)}build(t){const e=this.state;let n;4!==e.id&&P(307,String(e.id),String(5)),this.extension.build&&(n=this.extension.build(t,e.config,e.registerState));const r={...e.registerState,getOutput:()=>n,getSignal:this.getSignal.bind(this)};this.state=function(t,e,n){return Object.assign(t,{id:5,output:e,registerState:n})}(e,n,r)}register(t,e){this._signal=e;const n=this.state;5!==n.id&&P(308,String(n.id),String(5));const r=this.extension.register&&this.extension.register(t,n.config,n.registerState);return this.state=function(t){return Object.assign(t,{id:6})}(n),()=>{const t=this.state;7!==t.id&&P(309,String(n.id),String(7)),this.state=function(t){return Object.assign(t,{id:5})}(t),r&&r()}}afterRegistration(t){const e=this.state;let n;return 6!==e.id&&P(310,String(e.id),String(6)),this.extension.afterRegistration&&(n=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=function(t){return Object.assign(t,{id:7})}(e),n}getSignal(){return void 0===this._signal&&P(311),this._signal}getInitResult(){void 0===this.extension.init&&P(312,this.extension.name);const t=this.state;return function(t){return t.id>=4}(t)||P(313,String(t.id),String(4)),t.initResult}getInitPeer(t){const e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0}getExtensionInitDependency(){const t=this.state;return function(t){return t.id>=3}(t)||P(314,String(t.id),String(3)),{config:t.config}}getPeer(t){const e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}getInitDependency(t){const e=this.builder.getExtensionRep(t);return void 0===e&&P(315,this.extension.name,t.name),e.getExtensionInitDependency()}getDependency(t){const e=this.builder.getExtensionRep(t);return void 0===e&&P(315,this.extension.name,t.name),e.getExtensionDependency()}getState(){const t=this.state;return function(t){return t.id>=7}(t)||P(316,String(t.id),String(7)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||F}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([t])=>t)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){const t=this.state;(function(t){return t.id>=5})(t)||P(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}}const R={tag:r.T40};function K(){const t=(0,r.NiT)();t.isEmpty()&&t.append((0,r.lJ7)())}const B=(0,r.vE9)({config:(0,r.lVE)({setOptions:R,updateOptions:R}),init:({$initialEditorState:t=K})=>({$initialEditorState:t,initialized:!1}),afterRegistration(t,{updateOptions:e,setOptions:n},i){const o=i.getInitResult();if(!o.initialized){o.initialized=!0;const{$initialEditorState:i}=o;if((0,r.v0B)(i))t.setEditorState(i,n);else if("function"==typeof i)t.update(()=>{i(t)},e);else if(i&&("string"==typeof i||"object"==typeof i)){const e=t.parseEditorState(i);t.setEditorState(e,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[r.haT,r.Ey8,r.GRK,r.MZu,r.fD3]}),J=Symbol.for("@lexical/extension/LexicalBuilder");function W(){}function z(t){throw t}function U(t){return Array.isArray(t)?t:[t]}const j="0.39.0+prod.esm";class Z{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(t){this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=j,this.roots=t;for(const e of t)this.addExtension(e)}static fromExtensions(t){const e=[U(B)];for(const n of t)e.push(U(n));return new Z(e)}static maybeFromEditor(t){const e=t[J];return e&&(e.PACKAGE_VERSION!==j&&P(292,e.PACKAGE_VERSION,j),e instanceof Z||P(293)),e}static fromEditor(t){const e=Z.maybeFromEditor(t);return void 0===e&&P(294),e}constructEditor(){const{$initialEditorState:t,onError:e,...n}=this.buildCreateEditorArgs(),i=Object.assign((0,r.ieJ)({...n,...e?{onError:t=>{e(t,i)}}:{}}),{[J]:this});for(const t of this.sortedExtensionReps())t.build(i);return i}buildEditor(){let t=W;function e(){try{t()}finally{t=W}}const n=Object.assign(this.constructEditor(),{dispose:e,[Symbol.dispose]:e});return t=(0,i.Sd)(this.registerEditor(n),()=>n.setRootElement(null)),n}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){const e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&P(295,t.name),e}addEdge(t,e,n){const r=this.outgoingConfigEdges.get(t);r?r.set(e,n):this.outgoingConfigEdges.set(t,new Map([[e,n]]));const i=this.incomingEdges.get(e);i?i.add(t):this.incomingEdges.set(e,new Set([t]))}addExtension(t){void 0!==this._sortedExtensionReps&&P(296);const e=U(t),[n]=e;"string"!=typeof n.name&&P(297,typeof n.name);let r=this.extensionNameMap.get(n.name);if(void 0!==r&&r.extension!==n&&P(298,n.name),!r){r=new I(this,n),this.extensionNameMap.set(n.name,r);const t=this.conflicts.get(n.name);"string"==typeof t&&P(299,n.name,t);for(const t of n.conflictsWith||[])this.extensionNameMap.has(t)&&P(299,n.name,t),this.conflicts.set(t,n.name);for(const t of n.dependencies||[]){const e=U(t);this.addEdge(n.name,e[0].name,e.slice(1)),this.addExtension(e)}for(const[t,e]of n.peerDependencies||[])this.addEdge(n.name,t,e?[e]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const t=[],e=(n,r)=>{let i=n.state;if(L(i))return;const o=n.extension.name;var s;D(i)||P(300,o,r||"[unknown]"),D(s=i)||P(304,String(s.id),String(0)),i=Object.assign(s,{id:1}),n.state=i;const l=this.outgoingConfigEdges.get(o);if(l)for(const t of l.keys()){const n=this.extensionNameMap.get(t);n&&e(n,o)}i=function(t){return function(t){return 1===t.id}(t)||P(305,String(t.id),String(1)),Object.assign(t,{id:2})}(i),n.state=i,t.push(n)};for(const t of this.extensionNameMap.values())D(t.state)&&e(t);for(const e of t)for(const[t,n]of this.outgoingConfigEdges.get(e.extension.name)||[])if(n.length>0){const e=this.extensionNameMap.get(t);if(e)for(const t of n)e.configs.add(t)}for(const[t,...e]of this.roots)if(e.length>0){const n=this.extensionNameMap.get(t.name);void 0===n&&P(301,t.name);for(const t of e)n.configs.add(t)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){const e=this.sortedExtensionReps(),n=new AbortController,r=[()=>n.abort()],o=n.signal;for(const n of e){const e=n.register(t,o);e&&r.push(e)}for(const n of e){const e=n.afterRegistration(t);e&&r.push(e)}return(0,i.Sd)(...r)}buildCreateEditorArgs(){const t={},e=new Set,n=new Map,r=new Map,i={},o={},s=this.sortedExtensionReps();for(const l of s){const{extension:s}=l;if(void 0!==s.onError&&(t.onError=s.onError),void 0!==s.disableEvents&&(t.disableEvents=s.disableEvents),void 0!==s.parentEditor&&(t.parentEditor=s.parentEditor),void 0!==s.editable&&(t.editable=s.editable),void 0!==s.namespace&&(t.namespace=s.namespace),void 0!==s.$initialEditorState&&(t.$initialEditorState=s.$initialEditorState),s.nodes)for(const t of w(s)){if("function"!=typeof t){const e=n.get(t.replace);e&&P(302,s.name,t.replace.name,e.extension.name),n.set(t.replace,l)}e.add(t)}if(s.html){if(s.html.export)for(const[t,e]of s.html.export.entries())r.set(t,e);s.html.import&&Object.assign(i,s.html.import)}s.theme&&A(o,s.theme)}Object.keys(o).length>0&&(t.theme=o),e.size&&(t.nodes=[...e]);const l=Object.keys(i).length>0,c=r.size>0;(l||c)&&(t.html={},l&&(t.html.import=i),c&&(t.html.export=r));for(const e of s)e.init(t);return t.onError||(t.onError=z),t}}function q(t,e){const n=Z.fromEditor(t).extensionNameMap.get(e);return n?n.getExtensionDependency():void 0}const $=new Set,V=(0,r.vE9)({build(t,e,n){const i=n.getDependency(M).output,o=m({watchedNodeKeys:new Map}),s=O(()=>{},()=>k(()=>{const t=s.peek(),{watchedNodeKeys:e}=o.value;let n,l=!1;i.value.read(()=>{if((0,r.vJq)())for(const[i,o]of e.entries()){if(0===o.size){e.delete(i);continue}const s=(0,r.nsf)(i),c=s&&s.isSelected()||!1;l=l||c!==(!!t&&t.has(i)),c&&(n=n||new Set,n.add(i))}}),!l&&n&&t&&n.size===t.size||(s.value=n)}));return{watchNodeKey:function(t){const e=function(t){return new x(t,void 0)}(()=>(s.value||$).has(t)),{watchedNodeKeys:n}=o.peek();let r=n.get(t);const i=void 0!==r;return r=r||new Set,r.add(e),i||(n.set(t,r),o.value={watchedNodeKeys:n}),e}}},dependencies:[M],name:"@lexical/extension/NodeSelection"});(0,r.guI)("INSERT_HORIZONTAL_RULE_COMMAND");class H extends r.Kp7{static getType(){return"horizontalrule"}static clone(t){return new H(t.__key)}static importJSON(t){return Y().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:G,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const e=document.createElement("hr");return(0,i.ZB)(e,t.theme.hr),e}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}}function G(){return{node:Y()}}function Y(){return(0,r.phO)(H)}(0,r.vE9)({dependencies:[M,V],name:"@lexical/extension/HorizontalRule",nodes:()=>[H],register(t,e,n){const{watchNodeKey:o}=n.getDependency(V).output,s=m({nodeSelections:new Map}),c=t._config.theme.hrSelected??"selected";return(0,i.Sd)(t.registerCommand(r.d8p,t=>{if((0,r.vAA)(t.target)){const e=(0,r.pJU)(t.target);if(function(t){return t instanceof H}(e))return function(t,e=!1){const n=(0,r.vJq)(),i=t.isSelected(),o=t.getKey();let s;e&&(0,r.RTZ)(n)?s=n:(s=(0,r.rUs)(),(0,r.n1P)(s)),i?s.delete(o):s.add(o)}(e,t.shiftKey),!0}return!1},r.AcJ),t.registerMutationListener(H,(e,n)=>{l(()=>{let n=!1;const{nodeSelections:r}=s.peek();for(const[i,s]of e.entries())if("destroyed"===s)r.delete(i),n=!0;else{const e=r.get(i),s=t.getElementByKey(i);e?e.domNode.value=s:(n=!0,r.set(i,{domNode:m(s),selectedSignal:o(i)}))}n&&(s.value={nodeSelections:r})})}),k(()=>{const t=[];for(const{domNode:e,selectedSignal:n}of s.value.nodeSelections.values())t.push(k(()=>{const t=e.value;t&&(n.value?(0,i.ZB)(t,c):(0,i.HE)(t,c))}));return(0,i.Sd)(...t)}))}}),(0,r.vE9)({build:(t,e,n)=>N(e),config:(0,r.lVE)({disabled:!1,maxIndent:null}),name:"@lexical/extension/TabIndentation",register(t,e,n){const{disabled:o,maxIndent:s}=n.getOutput();return k(()=>{if(!o.value)return function(t,e){return(0,i.Sd)(t.registerCommand(r.OXk,e=>{const n=(0,r.vJq)();if(!(0,r.I2P)(n))return!1;e.preventDefault();const o=function(t){const e=t.getNodes();if((0,i.zD)(e,t=>(0,r.y68)(t)&&t.canIndent()?t:null).length>0)return!0;const n=t.anchor,o=t.focus,s=o.isBefore(n)?o:n,l=s.getNode(),c=(0,i.mB)(l);if(c.canIndent()){const t=c.getKey();let e=(0,r.uTE)();if(e.anchor.set(t,0,"element"),e.focus.set(t,0,"element"),e=(0,r.CaD)(e),e.anchor.is(s))return!0}return!1}(n)?e.shiftKey?r.sik:r.PiT:r.YW5;return t.dispatchCommand(o,void 0)},r.jZM),t.registerCommand(r.PiT,()=>{const t="number"==typeof e?e:e?e.peek():null;if(null==t)return!1;const n=(0,r.vJq)();if(!(0,r.I2P)(n))return!1;const o=n.getNodes().map(t=>(0,i.mB)(t).getIndent());return Math.max(...o)+1>=t},r.da8))}(t,s)})}})},8832(t,e,n){function r(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function i(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);n.search=r.toString(),console.warn(`Minified Lexical warning #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}n.d(e,{$ey:()=>Xt,A7V:()=>hi,AX0:()=>le,AcJ:()=>vi,Ave:()=>Ds,B$P:()=>Co,BtT:()=>ns,CaD:()=>ot,Cku:()=>sr,Cyw:()=>oi,Ey8:()=>In,FEN:()=>Vt,GMe:()=>Zr,GRK:()=>kn,H2A:()=>Nr,HYn:()=>Ee,Huu:()=>fe,I2P:()=>nr,IqF:()=>Ao,JM3:()=>oe,Jvg:()=>Oi,K8K:()=>Wo,KfJ:()=>Pe,Kp7:()=>ii,LYZ:()=>Di,MZu:()=>Vn,MvL:()=>Jt,NiT:()=>to,O0w:()=>qs,OXk:()=>me,PiT:()=>ye,Q$N:()=>ge,RTZ:()=>ir,RTo:()=>de,Rb_:()=>Ki,SKc:()=>we,Sr4:()=>xe,T40:()=>bn,TJt:()=>Ns,Tc1:()=>Vs,TgX:()=>Ce,U5P:()=>Go,UDz:()=>ae,V30:()=>re,VSO:()=>Ne,WKo:()=>En,WWb:()=>Me,WuB:()=>$t,XKQ:()=>Ht,YW5:()=>_e,Z$U:()=>Ai,ZKf:()=>ne,_On:()=>zo,a9V:()=>Uo,bM3:()=>Gt,bMH:()=>Cn,bSg:()=>_i,bbF:()=>ue,cmH:()=>hs,d8p:()=>zt,da8:()=>xi,dxY:()=>Yo,e1k:()=>yo,ev7:()=>Hn,fD3:()=>gi,fGB:()=>ei,fUS:()=>Se,ff4:()=>ni,fwY:()=>Tn,gCZ:()=>he,guI:()=>Bt,hVZ:()=>li,haT:()=>si,hi0:()=>Qt,i0_:()=>Zo,ieJ:()=>bi,jG6:()=>Ui,jZM:()=>yi,kBm:()=>mn,kFe:()=>qn,lJ7:()=>mi,lSZ:()=>Ws,lVE:()=>$s,mB:()=>ee,mB$:()=>Ji,mWO:()=>ks,n0X:()=>Sn,n1P:()=>no,nYP:()=>Ko,nsf:()=>Vi,oqR:()=>Wt,pGK:()=>zs,pJU:()=>Hi,pTq:()=>Do,peL:()=>Ro,phO:()=>es,rN:()=>ds,rUs:()=>_r,riq:()=>be,sTu:()=>Zn,sby:()=>Bo,scG:()=>Fi,sik:()=>ve,t5V:()=>Oe,u5G:()=>ke,uTE:()=>mr,uwZ:()=>Ss,v0B:()=>di,vAA:()=>Jo,vE9:()=>Zs,vJq:()=>vr,viC:()=>te,w$Z:()=>pe,wH$:()=>wn,waI:()=>Yt,wp6:()=>Ls,xL4:()=>Yi,y68:()=>gr});const o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,s=o&&"documentMode"in document?document.documentMode:null,l=o&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),c=o&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),a=!(!o||!("InputEvent"in window)||s)&&"getTargetRanges"in new window.InputEvent("input"),u=o&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),d=o&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,f=o&&/Android/.test(navigator.userAgent),h=o&&/^(?=.*Chrome).*/i.test(navigator.userAgent),g=o&&f&&h,p=o&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&l&&!h;function m(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}const _=0,y=1,v=2,x=1,S=2,C=3,b=4,T=5,k=6,N=u||d||p?"":"",E="\n\n",w=c?"":N,O="---",M="A-Za-z--------",P=(new RegExp("^[^"+M+"]*["+O+"]"),new RegExp("^[^"+O+"]*["+M+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),A={directionless:1,unmergeable:2},D={center:2,end:6,justify:4,left:1,right:3,start:5},L={[S]:"center",[k]:"end",[b]:"justify",[x]:"left",[C]:"right",[T]:"start"},F={normal:0,segmented:2,token:1},I={[_]:"normal",[v]:"segmented",[y]:"token"},R="$config";function K(t,e,n,r,i,o){let s=t.getFirstChild();for(;null!==s;){const t=s.__key;s.__parent===e&&(ni(s)&&K(s,t,n,r,i,o),n.has(t)||o.delete(t),i.push(t)),s=s.getNextSibling()}}let B=!1,J=0;function W(t){J=t.timeStamp}function z(t,e,n){const r="BR"===t.nodeName,i=e.__lexicalLineBreak;return i&&(t===i||r&&t.previousSibling===i)||r&&void 0!==Gi(t,n)}function U(t,e,n){const r=Ro(Po(n));let i=null,o=null;null!==r&&r.anchorNode===t&&(i=r.anchorOffset,o=r.focusOffset);const s=t.nodeValue;null!==s&&ao(e,s,i,o,!1)}function j(t,e,n){if(nr(t)){const e=t.anchor.getNode();if(e.is(n)&&t.format!==e.getFormat())return!1}return Bi(e)&&n.isAttached()}function Z(t,e,n,r){for(let i=t;i&&!Xo(i);i=Eo(i)){const t=Gi(i,e);if(void 0!==t){const e=Vi(t,n);if(e)return oi(e)||!Bo(i)?void 0:[i,e]}else if(i===r)return[r,eo(n)]}}function q(t,e,n){B=!0;const r=performance.now()-J>100;try{Xr(t,()=>{const i=vr()||function(t){return t.getEditorState().read(()=>{const t=vr();return null!==t?t.clone():null})}(t),o=new Map,s=t.getRootElement(),l=t._editorState,a=t._blockCursorElement;let u=!1,d="";for(let n=0;n<e.length;n++){const f=e[n],h=f.type,g=f.target,p=Z(g,t,l,s);if(!p)continue;const[m,_]=p;if("characterData"===h)r&&qn(_)&&Bi(g)&&j(i,g,_)&&U(g,_,t);else if("childList"===h){u=!0;const e=f.addedNodes;for(let n=0;n<e.length;n++){const r=e[n],i=Hi(r),o=r.parentNode;if(null!=o&&r!==a&&null===i&&!z(r,o,t)){if(c){const t=(Bo(r)?r.innerText:null)||r.nodeValue;t&&(d+=t)}o.removeChild(r)}}const n=f.removedNodes,r=n.length;if(r>0){let e=0;for(let i=0;i<r;i++){const r=n[i];(z(r,g,t)||a===r)&&(g.appendChild(r),e++)}r!==e&&o.set(m,_)}}}if(o.size>0)for(const[e,n]of o)n.reconcileObservedMutation(e,t);const f=n.takeRecords();if(f.length>0){for(let e=0;e<f.length;e++){const n=f[e],r=n.addedNodes,i=n.target;for(let e=0;e<r.length;e++){const n=r[e],o=n.parentNode;null==o||"BR"!==n.nodeName||z(n,i,t)||o.removeChild(n)}}n.takeRecords()}null!==i&&(u&&no(i),c&&bo(t)&&i.insertRawText(d))})}finally{B=!1}}function $(t){const e=t._observer;null!==e&&q(t,e.takeRecords(),e)}function V(t){!function(t){0===J&&Po(t).addEventListener("textInput",W,!0)}(t),t._observer=new MutationObserver((e,n)=>{q(t,e,n)})}function H(t){const e=new Map,n=new Set;for(let r="function"==typeof t?t:t.replace;r.prototype&&void 0!==r.prototype.getType;r=Object.getPrototypeOf(r)){const{ownNodeConfig:t}=ts(r);if(t&&t.stateConfigs)for(const r of t.stateConfigs){let t;"stateConfig"in r?(t=r.stateConfig,r.flat&&n.add(t.key)):t=r,e.set(t.key,t)}}return{flatKeys:n,sharedConfigMap:e}}class G{node;knownState;unknownState;sharedNodeState;size;constructor(t,e,n=void 0,r=new Map,i=void 0){this.node=t,this.sharedNodeState=e,this.unknownState=n,this.knownState=r;const{sharedConfigMap:o}=this.sharedNodeState,s=void 0!==i?i:function(t,e,n){let r=n.size;if(e)for(const i in e){const e=t.get(i);e&&n.has(e)||r++}return r}(o,n,r);this.size=s}getValue(t){const e=this.knownState.get(t);if(void 0!==e)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const e=this.unknownState[t.key];void 0!==e&&(n=t.parse(e)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},e={};for(const[e,n]of this.knownState)e.isEqual(n,e.defaultValue)?delete t[e.key]:t[e.key]=e.unparse(n);for(const n of this.sharedNodeState.flatKeys)n in t&&(e[n]=t[n],delete t[n]);return X(t)&&(e.$=t),e}getWritable(t){if(this.node===t)return this;const{sharedNodeState:e,unknownState:n}=this,r=new Map(this.knownState);return new G(t,e,function(t,e,n){let r;if(n)for(const[i,o]of Object.entries(n)){const n=t.get(i);n?e.has(n)||e.set(n,n.parse(o)):(r=r||{},r[i]=o)}return r}(e.sharedConfigMap,r,n),r,this.size)}updateFromKnown(t,e){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:r,unknownState:i}=this;r.has(t)||i&&n in i||(i&&(delete i[n],this.unknownState=X(i)),this.size++),r.set(t,e)}updateFromUnknown(t,e){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e)}updateFromJSON(t){const{knownState:e}=this;for(const t of e.keys())e.set(t,t.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(const[e,n]of Object.entries(t))this.updateFromUnknown(e,n)}}function Y(t){return t.__state?t.__state.sharedNodeState:wi(Zo(),t.getType()).sharedNodeState}function X(t){if(t)for(const e in t)return t}function Q(t,e,n){for(const[r,i]of e.knownState){if(t.has(r.key))continue;t.add(r.key);const e=n?n.getValue(r):r.defaultValue;if(e!==i&&!r.isEqual(e,i))return!0}return!1}function tt(t,e,n){const{unknownState:r}=e,i=n?n.unknownState:void 0;if(r)for(const[e,n]of Object.entries(r))if(!t.has(e)&&(t.add(e),n!==(i?i[e]:void 0)))return!0;return!1}function et(t,e){const n=t.__state;return n&&n.node===t?n.getWritable(e):n}function nt(t,e){const n=t.__mode,r=t.__format,i=t.__style,o=e.__mode,s=e.__format,l=e.__style,c=t.__state,a=e.__state;return(null===n||n===o)&&(null===r||r===s)&&(null===i||i===l)&&(null===t.__state||c===a||function(t,e){if(t===e)return!0;if(t&&e&&t.size!==e.size)return!1;const n=new Set;return!(t&&Q(n,t,e)||e&&Q(n,e,t)||t&&tt(n,t,e)||e&&tt(n,e,t))}(c,a))}function rt(t,e){const n=t.mergeWithSibling(e),r=Jr()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function it(t){let e,n,r=t;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(e=r.getPreviousSibling())&&qn(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(""!==e.__text){if(nt(e,r)){r=rt(e,r);break}break}e.remove()}for(;null!==(n=r.getNextSibling())&&qn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(nt(r,n)){r=rt(r,n);break}break}n.remove()}}else r.remove()}function ot(t){return st(t.anchor),st(t.focus),t}function st(t){for(;"element"===t.type;){const e=t.getNode(),n=t.offset;let r,i;if(n===e.getChildrenSize()?(r=e.getChildAtIndex(n-1),i=!0):(r=e.getChildAtIndex(n),i=!1),qn(r)){t.set(r.__key,i?r.getTextContentSize():0,"text",!0);break}if(!ni(r))break;t.set(r.__key,i?r.getChildrenSize():0,"element",!0)}}let lt,ct,at,ut,dt,ft,ht,gt,pt,mt,_t="",yt=null,vt=null,xt="",St=!1,Ct=!1;function bt(t,e){const n=ht.get(t);if(null!==e){const n=Kt(t);n.parentNode===e&&e.removeChild(n)}if(gt.has(t)||ct._keyToDOMMap.delete(t),ni(n)){const t=Lt(n,ht);Tt(t,0,t.length-1,null)}void 0!==n&&xo(mt,at,ut,n,"destroyed")}function Tt(t,e,n,r){let i=e;for(;i<=n;++i){const e=t[i];void 0!==e&&bt(e,r)}}function kt(t,e){t.setProperty("text-align",e)}function Nt(t,e){const n=lt.theme.indent;if("string"==typeof n){const r=t.classList.contains(n);e>0&&!r?t.classList.add(n):e<1&&r&&t.classList.remove(n)}const r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||"40px";t.style.setProperty("padding-inline-start",0===e?"":`calc(${e} * ${r})`)}function Et(t,e){const n=t.style;0===e?kt(n,""):1===e?kt(n,"left"):2===e?kt(n,"center"):3===e?kt(n,"right"):4===e?kt(n,"justify"):5===e?kt(n,"start"):6===e&&kt(n,"end")}function wt(t,e){const n=function(t){const e=t.__dir;if(null!==e)return e;if(li(t))return null;const n=t.getParentOrThrow();return li(n)&&null===n.__dir?"auto":null}(e);null!==n?t.dir=n:t.removeAttribute("dir")}function Ot(t,e){const n=gt.get(t);void 0===n&&r(60);const i=n.createDOM(lt,ct);if(function(t,e,n){const r=n._keyToDOMMap;(function(t,e,n){t[`__lexicalKey_${e._key}`]=n})(e,n,t),r.set(t,e)}(t,i,ct),qn(n)?i.setAttribute("data-lexical-text","true"):oi(n)&&i.setAttribute("data-lexical-decorator","true"),ni(n)){const t=n.__indent,e=n.__size;if(wt(i,n),0!==t&&Nt(i,t),0!==e){const t=e-1;Mt(Lt(n,gt),n,0,t,n.getDOMSlot(i))}const r=n.__format;0!==r&&Et(i,r),n.isInline()||At(null,n,i),ko(n)&&(_t+=E,xt+=E)}else{const e=n.getTextContent();if(oi(n)){const e=n.decorate(ct,lt);null!==e&&It(t,e),i.contentEditable="false"}_t+=e,xt+=e}return null!==e&&e.insertChild(i),xo(mt,at,ut,n,"created"),i}function Mt(t,e,n,r,i){const o=_t;_t="";let s=n;for(;s<=r;++s){Ot(t[s],i);const e=gt.get(t[s]);null!==e&&qn(e)&&null===yt&&(yt=e.getFormat(),vt=e.getStyle())}ko(e)&&(_t+=E),i.element.__lexicalTextContent=_t,_t=o+_t}function Pt(t,e){if(t){const n=t.__last;if(n){const t=e.get(n);if(t)return wn(t)?"line-break":oi(t)&&t.isInline()?"decorator":null}return"empty"}return null}function At(t,e,n){const r=Pt(t,ht),i=Pt(e,gt);r!==i&&e.getDOMSlot(n).setManagedLineBreak(i)}function Dt(t,e,n){var i;yt=null,vt=null,function(t,e,n){const i=_t,o=t.__size,s=e.__size;_t="";const l=n.element;if(1===o&&1===s){const n=t.__first,r=e.__first;if(n===r)Ft(n,l);else{const t=Kt(n),e=Ot(r,null);try{l.replaceChild(e,t)}catch(i){if("object"==typeof i&&null!=i){const o=`${i.toString()} Parent: ${l.tagName}, new child: {tag: ${e.tagName} key: ${r}}, old child: {tag: ${t.tagName}, key: ${n}}.`;throw new Error(o)}throw i}bt(n,null)}const o=gt.get(r);qn(o)&&null===yt&&(yt=o.getFormat(),vt=o.getStyle())}else{const i=Lt(t,ht),c=Lt(e,gt);if(i.length!==o&&r(227),c.length!==s&&r(228),0===o)0!==s&&Mt(c,e,0,s-1,n);else if(0===s){if(0!==o){const t=null==n.after&&null==n.before&&null==n.element.__lexicalLineBreak;Tt(i,0,o-1,t?null:l),t&&(l.textContent="")}}else!function(t,e,n,r,i,o){const s=r-1,l=i-1;let c,a,u=o.getFirstChild(),d=0,f=0;for(;d<=s&&f<=l;){const t=e[d],r=n[f];if(t===r)u=Rt(Ft(r,o.element)),d++,f++;else{void 0===c&&(c=new Set(e)),void 0===a&&(a=new Set(n));const i=a.has(t),s=c.has(r);if(i)if(s){const t=No(ct,r);t===u?u=Rt(Ft(r,o.element)):(o.withBefore(u).insertChild(t),Ft(r,o.element)),d++,f++}else Ot(r,o.withBefore(u)),f++;else u=Rt(Kt(t)),bt(t,o.element),d++}const i=gt.get(r);null!==i&&qn(i)&&null===yt&&(yt=i.getFormat(),vt=i.getStyle())}const h=d>s,g=f>l;if(h&&!g){const e=n[l+1],r=void 0===e?null:ct.getElementByKey(e);Mt(n,t,f,l,o.withBefore(r))}else g&&!h&&Tt(e,d,s,o.element)}(e,i,c,o,s,n)}ko(e)&&(_t+=E),l.__lexicalTextContent=_t,_t=i+_t}(t,e,e.getDOMSlot(n)),i=e,null==yt||yt===i.__textFormat||Ct||i.setTextFormat(yt),function(t){null==vt||vt===t.__textStyle||Ct||t.setTextStyle(vt)}(e)}function Lt(t,e){const n=[];let i=t.__first;for(;null!==i;){const t=e.get(i);void 0===t&&r(101),n.push(i),i=t.__next}return n}function Ft(t,e){const n=ht.get(t);let i=gt.get(t);void 0!==n&&void 0!==i||r(61);const o=St||ft.has(t)||dt.has(t),s=No(ct,t);if(n===i&&!o){if(ni(n)){const t=s.__lexicalTextContent;void 0!==t&&(_t+=t,xt+=t)}else{const t=n.getTextContent();xt+=t,_t+=t}return s}if(n!==i&&o&&xo(mt,at,ut,i,"updated"),i.updateDOM(n,s,lt)){const n=Ot(t,null);return null===e&&r(62),e.replaceChild(n,s),bt(t,null),n}if(ni(n)&&ni(i)){const t=i.__indent;(St||t!==n.__indent)&&Nt(s,t);const e=i.__format;if((St||e!==n.__format)&&Et(s,e),o&&(Dt(n,i,s),li(i)||i.isInline()||At(n,i,s)),ko(i)&&(_t+=E,xt+=E),(St||i.__dir!==n.__dir)&&(wt(s,i),li(i)&&!St))for(const t of i.getChildren())ni(t)&&wt(No(ct,t.getKey()),t)}else{const e=i.getTextContent();if(oi(i)){const e=i.decorate(ct,lt);null!==e&&It(t,e)}_t+=e,xt+=e}if(!Ct&&li(i)&&i.__cachedText!==xt){const t=i.getWritable();t.__cachedText=xt,i=t}return s}function It(t,e){let n=ct._pendingDecorators;const r=ct._decorators;if(null===n){if(r[t]===e)return;n=Xi(ct)}n[t]=e}function Rt(t){let e=t.nextSibling;return null!==e&&e===ct._blockCursorElement&&(e=e.nextSibling),e}function Kt(t){const e=pt.get(t);return void 0===e&&r(75,t),e}function Bt(t){return{type:t}}const Jt=Bt("SELECTION_CHANGE_COMMAND"),Wt=Bt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),zt=Bt("CLICK_COMMAND"),Ut=Bt("BEFORE_INPUT_COMMAND"),jt=Bt("INPUT_COMMAND"),Zt=Bt("COMPOSITION_START_COMMAND"),qt=Bt("COMPOSITION_END_COMMAND"),$t=Bt("DELETE_CHARACTER_COMMAND"),Vt=Bt("INSERT_LINE_BREAK_COMMAND"),Ht=Bt("INSERT_PARAGRAPH_COMMAND"),Gt=Bt("CONTROLLED_TEXT_INSERTION_COMMAND"),Yt=Bt("PASTE_COMMAND"),Xt=Bt("REMOVE_TEXT_COMMAND"),Qt=Bt("DELETE_WORD_COMMAND"),te=Bt("DELETE_LINE_COMMAND"),ee=Bt("FORMAT_TEXT_COMMAND"),ne=Bt("UNDO_COMMAND"),re=Bt("REDO_COMMAND"),ie=Bt("KEYDOWN_COMMAND"),oe=Bt("KEY_ARROW_RIGHT_COMMAND"),se=Bt("MOVE_TO_END"),le=Bt("KEY_ARROW_LEFT_COMMAND"),ce=Bt("MOVE_TO_START"),ae=Bt("KEY_ARROW_UP_COMMAND"),ue=Bt("KEY_ARROW_DOWN_COMMAND"),de=Bt("KEY_ENTER_COMMAND"),fe=Bt("KEY_SPACE_COMMAND"),he=Bt("KEY_BACKSPACE_COMMAND"),ge=Bt("KEY_ESCAPE_COMMAND"),pe=Bt("KEY_DELETE_COMMAND"),me=Bt("KEY_TAB_COMMAND"),_e=Bt("INSERT_TAB_COMMAND"),ye=Bt("INDENT_CONTENT_COMMAND"),ve=Bt("OUTDENT_CONTENT_COMMAND"),xe=Bt("DROP_COMMAND"),Se=Bt("FORMAT_ELEMENT_COMMAND"),Ce=Bt("DRAGSTART_COMMAND"),be=Bt("DRAGOVER_COMMAND"),Te=Bt("DRAGEND_COMMAND"),ke=Bt("COPY_COMMAND"),Ne=Bt("CUT_COMMAND"),Ee=Bt("SELECT_ALL_COMMAND"),we=Bt("CLEAR_EDITOR_COMMAND"),Oe=Bt("CLEAR_HISTORY_COMMAND"),Me=Bt("CAN_REDO_COMMAND"),Pe=Bt("CAN_UNDO_COMMAND"),Ae=Bt("FOCUS_COMMAND"),De=Bt("BLUR_COMMAND"),Le=Bt("KEY_MODIFIER_COMMAND"),Fe=Object.freeze({}),Ie=[["keydown",function(t,e){Re=t.timeStamp,Ke=t.key,e.isComposing()||To(e,ie,t)}],["pointerdown",function(t,e){const n=t.target,r=t.pointerType;Jo(n)&&"touch"!==r&&"pen"!==r&&0===t.button&&Xr(e,()=>{Pi(n)||(je=!0)})}],["compositionstart",function(t,e){To(e,Zt,t)}],["compositionend",function(t,e){c?qe=!0:d||!u&&!p?To(e,qt,t):($e=!0,Ve=t.data)}],["input",function(t,e){t.stopPropagation(),Xr(e,()=>{e.dispatchCommand(jt,t)},{event:t}),Je=null}],["click",function(t,e){Xr(e,()=>{const n=vr(),r=Ro(Po(e)),i=xr();if(r)if(nr(n)){const e=n.anchor,o=e.getNode();if("element"===e.type&&0===e.offset&&n.isCollapsed()&&!li(o)&&1===to().getChildrenSize()&&o.getTopLevelElementOrThrow().isEmpty()&&null!==i&&n.is(i))r.removeAllRanges(),n.dirty=!0;else if(3===t.detail&&!n.isCollapsed()&&o!==n.focus.getNode()){const t=ns(o,t=>ni(t)&&!t.isInline());ni(t)&&t.select(0)}}else if("touch"===t.pointerType||"pen"===t.pointerType){const n=r.anchorNode;(Bo(n)||Bi(n))&&no(yr(i,r,e,t))}To(e,zt,t)})}],["cut",Fe],["copy",Fe],["dragstart",Fe],["dragover",Fe],["dragend",Fe],["paste",Fe],["focus",Fe],["blur",Fe],["drop",Fe]];a&&Ie.push(["beforeinput",(t,e)=>function(t,e){const n=t.inputType;"deleteCompositionText"===n||c&&bo(e)||"insertCompositionText"!==n&&To(e,Ut,t)}(t,e)]);let Re=0,Ke=null,Be=0,Je=null;const We=new WeakMap,ze=new WeakMap;let Ue=!1,je=!1,Ze=!1,qe=!1,$e=!1,Ve="",He=null,_n=[0,"",0,"root",0];function Ge(t,e,n,r,i){const o=t.anchor,s=t.focus,l=o.getNode(),c=Jr(),u=Ro(Po(c)),d=null!==u?u.anchorNode:null,f=o.key,h=c.getElementByKey(f),g=n.length;return f!==s.key||!qn(l)||(!i&&(!a||Be<r+50)||l.isDirty()&&g<2||io(n))&&o.offset!==s.offset&&!l.isComposing()||Ki(l)||l.isDirty()&&g>1||(i||!a)&&null!==h&&!l.isComposing()&&d!==Wi(h)||null!==u&&null!==e&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||l.getFormat()!==t.format||l.getStyle()!==t.style||function(t,e){if(e.isSegmented())return!0;if(!t.isCollapsed())return!1;const n=t.anchor.offset,r=e.getParentOrThrow(),i=Ri(e);return 0===n?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||i||function(t){const e=t.getPreviousSibling();return(qn(e)||ni(e)&&e.isInline())&&!e.canInsertTextAfter()}(e):n===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||i)}(t,l)}function Ye(t,e){return Bi(t)&&null!==t.nodeValue&&0!==e&&e!==t.nodeValue.length}function Xe(t,e,n){const{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:l}=t;Ue&&(Ue=!1,Ye(i,o)&&Ye(s,l)&&!He)||Xr(e,()=>{if(!n)return void no(null);if(!Di(e,i,s))return;let c=vr();if(He&&nr(c)&&c.isCollapsed()){const t=c.anchor,e=He.anchor;(t.key===e.key&&t.offset===e.offset+1||1===t.offset&&e.getNode().is(t.getNode().getPreviousSibling()))&&(c=He.clone(),no(c))}if(He=null,nr(c)){const n=c.anchor,i=n.getNode();if(c.isCollapsed()){"Range"===t.type&&t.anchorNode===t.focusNode&&(c.dirty=!0);const o=Po(e).event,s=o?o.timeStamp:performance.now(),[l,a,u,d,f]=_n,h=to(),g=!1===e.isComposing()&&""===h.getTextContent();if(s<f+200&&n.offset===u&&n.key===d)Qe(c,l,a);else if("text"===n.type)qn(i)||r(141),tn(c,i);else if("element"===n.type&&!g){ni(i)||r(259);const t=n.getNode();t.isEmpty()?function(t,e){Qe(t,e.getTextFormat(),e.getTextStyle())}(c,t):Qe(c,0,"")}}else{const t=n.key,e=c.focus.key,r=c.getNodes(),i=r.length,s=c.isBackward(),a=s?l:o,u=s?o:l,d=s?e:t,f=s?t:e;let h=2047,g=!1;for(let t=0;t<i;t++){const e=r[t],n=e.getTextContentSize();if(qn(e)&&0!==n&&!(0===t&&e.__key===d&&a===n||t===i-1&&e.__key===f&&0===u)&&(g=!0,h&=e.getFormat(),0===h))break}c.format=g?h:0}}To(e,Jt,void 0)})}function Qe(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0)}function tn(t,e){Qe(t,e.getFormat(),e.getStyle())}function en(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return 0===e.length?null:e[0]}function nn(t){const e=t.inputType,n=en(t),i=Jr(),o=vr();if("deleteContentBackward"===e){if(null===o){const t=xr();if(!nr(t))return!0;no(t.clone())}if(nr(o)){const e=o.anchor.key===o.focus.key;if(s=t.timeStamp,"MediaLast"===Ke&&s<Re+30&&i.isComposing()&&e){if(qi(null),Re=0,setTimeout(()=>{Xr(i,()=>{qi(null)})},30),nr(o)){const t=o.anchor.getNode();t.markDirty(),qn(t)||r(142),tn(o,t)}}else{qi(null),t.preventDefault();const n=o.anchor.getNode(),r=n.getTextContent(),s=n.canInsertTextAfter(),l=0===o.anchor.offset&&o.focus.offset===r.length;let c=g&&e&&!l&&s;if(c&&o.isCollapsed()&&(c=!oi(Co(o.anchor,!0))),!c){To(i,$t,!0);const t=vr();g&&nr(t)&&t.isCollapsed()&&(He=t,setTimeout(()=>He=null))}}return!0}}var s;if(!nr(o))return!0;const l=t.data;null!==Je&&co(!1,i,Je),o.dirty&&null===Je||!o.isCollapsed()||li(o.anchor.getNode())||null===n||o.applyDOMRange(n),Je=null;const c=o.anchor,a=o.focus,u=c.getNode(),f=a.getNode();if("insertText"===e||"insertTranspose"===e){if("\n"===l)t.preventDefault(),To(i,Vt,!1);else if(l===E)t.preventDefault(),To(i,Ht,void 0);else if(null==l&&t.dataTransfer){const e=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(e)}else null!=l&&Ge(o,n,l,t.timeStamp,!0)?(t.preventDefault(),To(i,Gt,l)):Je=l;return Be=t.timeStamp,!0}switch(t.preventDefault(),e){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":To(i,Gt,t);break;case"insertFromComposition":qi(null),To(i,Gt,t);break;case"insertLineBreak":qi(null),To(i,Vt,!1);break;case"insertParagraph":qi(null),Ze&&!d?(Ze=!1,To(i,Vt,!1)):To(i,Ht,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":To(i,Yt,t);break;case"deleteByComposition":(function(t,e){return t!==e||ni(t)||ni(e)||!Ri(t)||!Ri(e)})(u,f)&&To(i,Xt,t);break;case"deleteByDrag":case"deleteByCut":To(i,Xt,t);break;case"deleteContent":To(i,$t,!1);break;case"deleteWordBackward":To(i,Qt,!0);break;case"deleteWordForward":To(i,Qt,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":To(i,te,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":To(i,te,!1);break;case"formatStrikeThrough":To(i,ee,"strikethrough");break;case"formatBold":To(i,ee,"bold");break;case"formatItalic":To(i,ee,"italic");break;case"formatUnderline":To(i,ee,"underline");break;case"historyUndo":To(i,ne,void 0);break;case"historyRedo":To(i,re,void 0)}return!0}function rn(t){if(Bo(t.target)&&Pi(t.target))return!0;const e=Jr(),n=vr(),r=t.data,i=en(t);if(null!=r&&nr(n)&&Ge(n,i,r,t.timeStamp,!1)){qe&&(ln(e,r),qe=!1);const i=n.anchor.getNode(),o=Ro(Po(e));if(null===o)return!0;const s=n.isBackward(),l=s?n.anchor.offset:n.focus.offset,f=s?n.focus.offset:n.anchor.offset;a&&!n.isCollapsed()&&qn(i)&&null!==o.anchorNode&&i.getTextContent().slice(0,l)+r+i.getTextContent().slice(l+f)===lo(o.anchorNode)||To(e,Gt,r);const h=r.length;c&&h>1&&"insertCompositionText"===t.inputType&&!e.isComposing()&&(n.anchor.offset-=h),u||d||p||!e.isComposing()||(Re=0,qi(null))}else co(!1,e,null!==r?r:void 0),qe&&(ln(e,r||void 0),qe=!1);return Rr(),$(Jr()),!0}function on(t){const e=Jr(),n=vr();if(nr(n)&&!e.isComposing()){const r=n.anchor,i=n.anchor.getNode();qi(r.key),(t.timeStamp<Re+30||"element"===r.type||!n.isCollapsed()||i.getFormat()!==n.format||qn(i)&&i.getStyle()!==n.style)&&To(e,Gt,w)}return!0}function sn(t){return ln(Jr(),t.data),!0}function ln(t,e){const n=t._compositionKey;if(qi(null),null!==n&&null!=e){if(""===e){const e=Vi(n),r=Wi(t.getElementByKey(n));return void(null!==r&&null!==r.nodeValue&&qn(e)&&ao(e,r.nodeValue,null,null,!0))}if("\n"===e[e.length-1]){const e=vr();if(nr(e)){const n=e.focus;return e.anchor.set(n.key,n.offset,n.type),void To(t,de,null)}}}co(!0,t,e)}function cn(t){const e=Jr();if(null==t.key)return!0;if($e&&mo(t))return Xr(e,()=>{ln(e,Ve)}),$e=!1,Ve="",!0;if(function(t){return ho(t,"ArrowRight",{shiftKey:"any"})}(t))To(e,oe,t);else if(function(t){return ho(t,"ArrowRight",go)}(t))To(e,se,t);else if(function(t){return ho(t,"ArrowLeft",{shiftKey:"any"})}(t))To(e,le,t);else if(function(t){return ho(t,"ArrowLeft",go)}(t))To(e,ce,t);else if(function(t){return ho(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(t))To(e,ae,t);else if(function(t){return ho(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(t))To(e,ue,t);else if(function(t){return ho(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(t))Ze=!0,To(e,de,t);else if(function(t){return" "===t.key}(t))To(e,fe,t);else if(function(t){return l&&ho(t,"o",{ctrlKey:!0})}(t))t.preventDefault(),Ze=!0,To(e,Vt,!0);else if(function(t){return ho(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(t))Ze=!1,To(e,de,t);else if(function(t){return ho(t,"Backspace",{shiftKey:"any"})||l&&ho(t,"h",{ctrlKey:!0})}(t))mo(t)?To(e,he,t):(t.preventDefault(),To(e,$t,!0));else if(function(t){return"Escape"===t.key}(t))To(e,ge,t);else if(function(t){return ho(t,"Delete",{})||l&&ho(t,"d",{ctrlKey:!0})}(t))!function(t){return"Delete"===t.key}(t)?(t.preventDefault(),To(e,$t,!1)):To(e,pe,t);else if(function(t){return ho(t,"Backspace",po)}(t))t.preventDefault(),To(e,Qt,!0);else if(function(t){return ho(t,"Delete",po)}(t))t.preventDefault(),To(e,Qt,!1);else if(function(t){return l&&ho(t,"Backspace",{metaKey:!0})}(t))t.preventDefault(),To(e,te,!0);else if(function(t){return l&&(ho(t,"Delete",{metaKey:!0})||ho(t,"k",{ctrlKey:!0}))}(t))t.preventDefault(),To(e,te,!1);else if(function(t){return ho(t,"b",go)}(t))t.preventDefault(),To(e,ee,"bold");else if(function(t){return ho(t,"u",go)}(t))t.preventDefault(),To(e,ee,"underline");else if(function(t){return ho(t,"i",go)}(t))t.preventDefault(),To(e,ee,"italic");else if(function(t){return ho(t,"Tab",{shiftKey:"any"})}(t))To(e,me,t);else if(function(t){return ho(t,"z",go)}(t))t.preventDefault(),To(e,ne,void 0);else if(function(t){return l?ho(t,"z",{metaKey:!0,shiftKey:!0}):ho(t,"y",{ctrlKey:!0})||ho(t,"z",{ctrlKey:!0,shiftKey:!0})}(t))t.preventDefault(),To(e,re,void 0);else{const n=e._editorState._selection;null===n||nr(n)?_o(t)&&(t.preventDefault(),To(e,Ee,t)):function(t){return ho(t,"c",go)}(t)?(t.preventDefault(),To(e,ke,t)):function(t){return ho(t,"x",go)}(t)?(t.preventDefault(),To(e,Ne,t)):_o(t)&&(t.preventDefault(),To(e,Ee,t))}return function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey}(t)&&e.dispatchCommand(Le,t),!0}function an(t){let e=t.__lexicalEventHandles;return void 0===e&&(e=[],t.__lexicalEventHandles=e),e}const un=new Map;function dn(t){const e=function(t){const e=Mo(t);return e?e.getSelection():null}(t.target);if(null===e)return;const n=Fi(e.anchorNode);if(null===n)return;je&&(je=!1,Xr(n,()=>{const r=xr(),i=e.anchorNode;(Bo(i)||Bi(i))&&no(yr(r,e,n,t))}));const r=oo(n),i=r[r.length-1],o=i._key,s=un.get(o),l=s||i;l!==n&&Xe(e,l,!1),Xe(e,n,!0),n!==i?un.set(o,n):s&&un.delete(o)}function fn(t){t._lexicalHandled=!0}function hn(t){return!0===t._lexicalHandled}function gn(t){const e=We.get(t);if(void 0===e)return;const n=ze.get(e);if(void 0===n)return;const i=n-1;i>=0||r(164),We.delete(t),ze.set(e,i),0===i&&e.removeEventListener("selectionchange",dn);const o=Ii(t);Li(o)?(function(t){if(null!==t._parentEditor){const e=oo(t),n=e[e.length-1]._key;un.get(n)===t&&un.delete(n)}else un.delete(t._key)}(o),t.__lexicalEditor=null):o&&r(198);const s=an(t);for(let t=0;t<s.length;t++)s[t]();t.__lexicalEventHandles=[]}function pn(t,e,n){Rr();const r=t.__key,i=t.getParent();if(null===i)return;const o=function(t){const e=vr();if(!nr(e)||!ni(t))return e;const{anchor:n,focus:r}=e,i=n.getNode(),o=r.getNode();return Oo(i,t)&&n.set(t.__key,0,"element"),Oo(o,t)&&r.set(t.__key,0,"element"),e}(t);let s=!1;if(nr(o)&&e){const e=o.anchor,n=o.focus;e.key===r&&(br(e,t,i,t.getPreviousSibling(),t.getNextSibling()),s=!0),n.key===r&&(br(n,t,i,t.getPreviousSibling(),t.getNextSibling()),s=!0)}else ir(o)&&e&&t.isSelected()&&t.selectPrevious();if(nr(o)&&e&&!s){const e=t.getIndexWithinParent();ji(t),Sr(o,i,e,-1)}else ji(t);n||Ao(i)||i.canBeEmpty()||!i.isEmpty()||pn(i,e),e&&o&&li(i)&&i.isEmpty()&&i.selectEnd()}function mn(t){return t}const yn=Symbol.for("ephemeral");function vn(t){return t[yn]||!1}class xn{__type;__key;__parent;__prev;__next;__state;static getType(){const{ownNodeType:t}=ts(this);return void 0===t&&r(64,this.name),t}static clone(t){r(65,this.name)}$config(){return{}}config(t,e){const n=e.extends||Object.getPrototypeOf(this.constructor);return Object.assign(e,{extends:n,type:t}),{[t]:e}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}static importDOM;constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(t,e){const n=function(){const t=ki;return ki=null,t}();if(null!=(e=e||n&&n.__key))return void(t.__key=e);Rr(),Kr();const r=Jr(),i=Br(),o=""+Ei++;i._nodeMap.set(o,t),ni(t)?r._dirtyElements.set(o,!0):r._dirtyLeaves.add(o),r._cloneNotNeeded.add(o),r._dirtyType=1,t.__key=o}(this,t)}getType(){return this.__type}isInline(){r(137,this.constructor.name)}isAttached(){let t=this.__key;for(;null!==t;){if("root"===t)return!0;const e=Vi(t);if(null===e)break;t=e.__parent}return!1}isSelected(t){const e=t||vr();if(null==e)return!1;const n=e.getNodes().some(t=>t.__key===this.__key);if(qn(this))return n;if(nr(e)&&"element"===e.anchor.type&&"element"===e.focus.type){if(e.isCollapsed())return!1;const t=this.getParent();if(oi(this)&&this.isInline()&&t){const n=e.isBackward()?e.focus:e.anchor;if(t.is(n.getNode())&&n.offset===t.getChildrenSize()&&this.is(t.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(null===t)return-1;let e=t.getFirstChild(),n=0;for(;null!==e;){if(this.is(e))return n;n++,e=e.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return null===t?null:Vi(t)}getParentOrThrow(){const t=this.getParent();return null===t&&r(66,this.__key),t}getTopLevelElement(){let t=this;for(;null!==t;){const e=t.getParent();if(Ao(e))return ni(t)||t===this&&oi(t)||r(194),t;t=e}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return null===t&&r(67,this.__key),t}getParents(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e),e=e.getParent();return t}getParentKeys(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return null===t?null:Vi(t)}getPreviousSiblings(){const t=[],e=this.getParent();if(null===e)return t;let n=e.getFirstChild();for(;null!==n&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return null===t?null:Vi(t)}getNextSiblings(){const t=[];let e=this.getNextSibling();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){const e=ni(this)?this:this.getParent(),n=ni(t)?t:t.getParent(),r=e&&n?As(e,n):null;return r?r.commonAncestor:null}is(t){return null!=t&&this.__key===t.__key}isBefore(t){const e=As(this,t);return null!==e&&("descendant"===e.type||("branch"===e.type?-1===Os(e):("same"!==e.type&&"ancestor"!==e.type&&r(279),!1)))}isParentOf(t){const e=As(this,t);return null!==e&&"ancestor"===e.type}getNodesBetween(t){const e=this.isBefore(t),n=[],i=new Set;let o=this;for(;null!==o;){const s=o.__key;if(i.has(s)||(i.add(s),n.push(o)),o===t)break;const l=ni(o)?e?o.getFirstChild():o.getLastChild():null;if(null!==l){o=l;continue}const c=e?o.getNextSibling():o.getPreviousSibling();if(null!==c){o=c;continue}const a=o.getParentOrThrow();if(i.has(a.__key)||n.push(a),a===t)break;let u=null,d=a;do{if(null===d&&r(68),u=e?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),null===d)break;null!==u||i.has(d.__key)||n.push(d)}while(null===u);o=u}return e||n.reverse(),n}isDirty(){const t=Jr()._dirtyLeaves;return null!==t&&t.has(this.__key)}getLatest(){if(vn(this))return this;const t=Vi(this.__key);return null===t&&r(113),t}getWritable(){if(vn(this))return this;Rr();const t=Br(),e=Jr(),n=t._nodeMap,r=this.__key,i=this.getLatest(),o=e._cloneNotNeeded,s=vr();if(null!==s&&s.setCachedNodes(null),o.has(r))return Zi(i),i;const l=Ho(i);return o.add(r),Zi(l),n.set(r,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){r(70)}updateDOM(t,e,n){r(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){r(18,this.name)}updateFromJSON(t){return function(t,e){const n=t.getWritable(),r=e.$;let i=r;for(const t of Y(n).flatKeys)t in e&&(void 0!==i&&i!==r||(i={...r}),i[t]=e[t]);return(n.__state||i)&&function(t){const e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new G(e,Y(e));return e.__state=n,n}(t).updateFromJSON(i),n}(this,t)}static transform(){return null}remove(t){pn(this,!0,t)}replace(t,e){Rr();let n=vr();null!==n&&(n=n.clone()),Lo(this,t);const i=this.getLatest(),o=this.__key,s=t.__key,l=t.getWritable(),c=this.getParentOrThrow().getWritable(),a=c.__size;ji(l);const u=i.getPreviousSibling(),d=i.getNextSibling(),f=i.__prev,h=i.__next,g=i.__parent;if(pn(i,!1,!0),null===u?c.__first=s:u.getWritable().__next=s,l.__prev=f,null===d?c.__last=s:d.getWritable().__prev=s,l.__next=h,l.__parent=g,c.__size=a,e&&(ni(this)&&ni(l)||r(139),this.getChildren().forEach(t=>{l.append(t)})),nr(n)){no(n);const t=n.anchor,e=n.focus;t.key===o&&tr(t,l),e.key===o&&tr(e,l)}return $i()===o&&qi(s),l}insertAfter(t,e=!0){Rr(),Lo(this,t);const n=this.getWritable(),r=t.getWritable(),i=r.getParent(),o=vr();let s=!1,l=!1;if(null!==i){const e=t.getIndexWithinParent();if(ji(r),nr(o)){const t=i.__key,n=o.anchor,r=o.focus;s="element"===n.type&&n.key===t&&n.offset===e+1,l="element"===r.type&&r.key===t&&r.offset===e+1}}const c=this.getNextSibling(),a=this.getParentOrThrow().getWritable(),u=r.__key,d=n.__next;if(null===c?a.__last=u:c.getWritable().__prev=u,a.__size++,n.__next=u,r.__next=d,r.__prev=n.__key,r.__parent=n.__parent,e&&nr(o)){const t=this.getIndexWithinParent();Sr(o,a,t+1);const e=a.__key;s&&o.anchor.set(e,t+2,"element"),l&&o.focus.set(e,t+2,"element")}return t}insertBefore(t,e=!0){Rr(),Lo(this,t);const n=this.getWritable(),r=t.getWritable(),i=r.__key;ji(r);const o=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();null===o?s.__first=i:o.getWritable().__next=i,s.__size++,n.__prev=i,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;const a=vr();return e&&nr(a)&&Sr(a,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return mi()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){Rr();const n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(ni(n))return n.select();if(!qn(n)){const t=n.getIndexWithinParent()+1;return r.select(t,t)}return n.select(t,e)}selectNext(t,e){Rr();const n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(ni(n))return n.select(0,0);if(!qn(n)){const t=n.getIndexWithinParent();return r.select(t,t)}return n.select(t,e)}markDirty(){this.getWritable()}reconcileObservedMutation(t,e){this.markDirty()}}const Sn="historic",Cn="history-push",bn="history-merge",Tn="paste";class kn extends xn{static getType(){return"linebreak"}static clone(t){return new kn(t.__key)}constructor(t){super(t)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(t){const e=t.parentElement;if(null!==e&&Uo(e)){const n=e.firstChild;if(n===t||n.nextSibling===t&&On(n)){const n=e.lastChild;if(n===t||n.previousSibling===t&&On(n))return!0}}return!1}(t)||function(t){const e=t.parentElement;if(null!==e&&Uo(e)){const n=e.firstChild;if(n===t||n.nextSibling===t&&On(n))return!1;const r=e.lastChild;if(r===t||r.previousSibling===t&&On(r))return!0}return!1}(t)?null:{conversion:Nn,priority:0}}}static importJSON(t){return En().updateFromJSON(t)}}function Nn(t){return{node:En()}}function En(){return Do(new kn)}function wn(t){return t instanceof kn}function On(t){return Bi(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function Mn(t,e){return 16&e?"code":128&e?"mark":32&e?"sub":64&e?"sup":null}function Pn(t,e){return 1&e?"strong":2&e?"em":"span"}function An(t,e,n,r,i){const o=r.classList;let s=vo(i,"base");void 0!==s&&o.add(...s),s=vo(i,"underlineStrikethrough");let l=!1;const c=8&e&&4&e;void 0!==s&&(8&n&&4&n?(l=!0,c||o.add(...s)):c&&o.remove(...s));for(const t in P){const r=P[t];if(s=vo(i,t),void 0!==s)if(n&r){if(l&&("underline"===t||"strikethrough"===t)){e&r&&o.remove(...s);continue}(0===(e&r)||c&&"underline"===t||"strikethrough"===t)&&o.add(...s)}else e&r&&o.remove(...s)}}function Dn(t,e,n){const r=e.firstChild,i=n.isComposing(),o=t+(i?N:"");if(null==r)e.textContent=o;else{const t=r.nodeValue;if(t!==o)if(i||c){const[e,n,i]=function(t,e){const n=t.length,r=e.length;let i=0,o=0;for(;i<n&&i<r&&t[i]===e[i];)i++;for(;o+i<n&&o+i<r&&t[n-o-1]===e[r-o-1];)o++;return[i,n-i-o,e.slice(i,r-o)]}(t,o);0!==n&&r.deleteData(e,n),r.insertData(e,i)}else r.nodeValue=o}}function Ln(t,e,n,r,i,o){Dn(i,t,e);const s=o.theme.text;void 0!==s&&An(0,0,r,t,s)}function Fn(t,e){const n=document.createElement(e);return n.appendChild(t),n}class In extends xn{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(t){return new In(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",e){super(e),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return I[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===$i()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const e=P[t];return 0!==(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(t,e){return zi(this.getLatest().__format,t,e)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,e){const n=this.__format,r=Mn(0,n),i=Pn(0,n),o=null===r?i:r,s=document.createElement(o);let l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(i),s.appendChild(l)),Ln(l,this,0,n,this.__text,t);const c=this.__style;return""!==c&&(s.style.cssText=c),s}updateDOM(t,e,n){const i=this.__text,o=t.__format,s=this.__format,l=Mn(0,o),c=Mn(0,s),a=Pn(0,o),u=Pn(0,s);if((null===l?a:l)!==(null===c?u:c))return!0;if(l===c&&a!==u){const t=e.firstChild;null==t&&r(48);const o=document.createElement(u);return Ln(o,this,0,s,i,n),e.replaceChild(o,t),!1}let d=e;null!==c&&null!==l&&(d=e.firstChild,null==d&&r(49)),Dn(i,d,this);const f=n.theme.text;void 0!==f&&o!==s&&An(0,o,s,d,f);const h=t.__style,g=this.__style;return h!==g&&(e.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:Wn,priority:0}),b:()=>({conversion:Kn,priority:0}),code:()=>({conversion:jn,priority:0}),em:()=>({conversion:jn,priority:0}),i:()=>({conversion:jn,priority:0}),mark:()=>({conversion:jn,priority:0}),s:()=>({conversion:jn,priority:0}),span:()=>({conversion:Rn,priority:0}),strong:()=>({conversion:jn,priority:0}),sub:()=>({conversion:jn,priority:0}),sup:()=>({conversion:jn,priority:0}),u:()=>({conversion:jn,priority:0})}}static importJSON(t){return Zn().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:e}=super.exportDOM(t);return Bo(e)||r(132),e.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?e.style.textTransform="lowercase":this.hasFormat("uppercase")?e.style.textTransform="uppercase":this.hasFormat("capitalize")&&(e.style.textTransform="capitalize"),this.hasFormat("bold")&&(e=Fn(e,"b")),this.hasFormat("italic")&&(e=Fn(e,"i")),this.hasFormat("strikethrough")&&(e=Fn(e,"s")),this.hasFormat("underline")&&(e=Fn(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,e){}setFormat(t){const e=this.getWritable();return e.__format="string"==typeof t?P[t]:t,e}setDetail(t){const e=this.getWritable();return e.__detail="string"==typeof t?A[t]:t,e}setStyle(t){const e=this.getWritable();return e.__style=t,e}toggleFormat(t){const e=zi(this.getFormat(),t,null);return this.setFormat(e)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const e=F[t];if(this.__mode===e)return this;const n=this.getWritable();return n.__mode=e,n}setTextContent(t){if(this.__text===t)return this;const e=this.getWritable();return e.__text=t,e}select(t,e){Rr();let n=t,r=e;const i=vr(),o=this.getTextContent(),s=this.__key;if("string"==typeof o){const t=o.length;void 0===n&&(n=t),void 0===r&&(r=t)}else n=0,r=0;if(!nr(i))return pr(s,n,s,r,"text","text");{const t=$i();t!==i.anchor.key&&t!==i.focus.key||qi(s),i.setTextNodeRange(this,n,this,r)}return i}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,e,n,r){const i=this.getWritable(),o=i.__text,s=n.length;let l=t;l<0&&(l=s+l,l<0&&(l=0));const c=vr();if(r&&nr(c)){const e=t+s;c.setTextNodeRange(i,e,i,e)}const a=o.slice(0,l)+n+o.slice(l+e);return i.__text=a,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Rr();const e=this.getLatest(),n=e.getTextContent();if(""===n)return[];const r=e.__key,i=$i(),o=n.length;t.sort((t,e)=>t-e),t.push(o);const s=[],l=t.length;for(let e=0,r=0;e<o&&r<=l;r++){const i=t[r];i>e&&(s.push(n.slice(e,i)),e=i)}const c=s.length;if(1===c)return[e];const a=s[0],u=e.getParent();let d;const f=e.getFormat(),h=e.getStyle(),g=e.__detail;let p=!1,m=null,_=null;const y=vr();if(nr(y)){const[t,e]=y.isBackward()?[y.focus,y.anchor]:[y.anchor,y.focus];"text"===t.type&&t.key===r&&(m=t),"text"===e.type&&e.key===r&&(_=e)}e.isSegmented()?(d=Zn(a),d.__format=f,d.__style=h,d.__detail=g,d.__state=et(e,d),p=!0):d=e.setTextContent(a);const v=[d];for(let t=1;t<c;t++){const n=Zn(s[t]);n.__format=f,n.__style=h,n.__detail=g,n.__state=et(e,n);const o=n.__key;i===r&&qi(o),v.push(n)}const x=m?m.offset:null,S=_?_.offset:null;let C=0;for(const t of v){if(!m&&!_)break;const e=C+t.getTextContentSize();if(null!==m&&null!==x&&x<=e&&x>=C&&(m.set(t.getKey(),x-C,"text"),x<e&&(m=null)),null!==_&&null!==S&&S<=e&&S>=C){_.set(t.getKey(),S-C,"text");break}C=e}if(null!==u){!function(t){const e=t.getPreviousSibling(),n=t.getNextSibling();null!==e&&Zi(e),null!==n&&Zi(n)}(this);const t=u.getWritable(),e=this.getIndexWithinParent();p?(t.splice(e,0,v),this.remove()):t.splice(e,1,v),nr(y)&&Sr(y,u,e,c-1)}return v}mergeWithSibling(t){const e=t===this.getPreviousSibling();e||t===this.getNextSibling()||r(50);const n=this.__key,i=t.__key,o=this.__text,s=o.length;$i()===i&&qi(n);const l=vr();if(nr(l)){const r=l.anchor,o=l.focus;null!==r&&r.key===i&&Tr(r,e,n,t,s),null!==o&&o.key===i&&Tr(o,e,n,t,s)}const c=t.__text,a=e?c+o:o+c;this.setTextContent(a);const u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}}function Rn(t){return{forChild:$n(t.style),node:null}}function Kn(t){const e=t,n="normal"===e.style.fontWeight;return{forChild:$n(e.style,n?void 0:"bold"),node:null}}const Bn=new WeakMap;function Jn(t){if(!Bo(t))return!1;if("PRE"===t.nodeName)return!0;const e=t.style.whiteSpace;return"string"==typeof e&&e.startsWith("pre")}function Wn(t){const e=t;null===t.parentElement&&r(129);let n=e.textContent||"";if(null!==function(t){let e,n=t.parentNode;const r=[t];for(;null!==n&&void 0===(e=Bn.get(n))&&!Jn(n);)r.push(n),n=n.parentNode;const i=void 0===e?n:e;for(let t=0;t<r.length;t++)Bn.set(r[t],i);return i}(e)){const t=n.split(/(\r?\n|\t)/),e=[],r=t.length;for(let n=0;n<r;n++){const r=t[n];"\n"===r||"\r\n"===r?e.push(En()):"\t"===r?e.push(Hn()):""!==r&&e.push(Zn(r))}return{node:e}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===n)return{node:null};if(" "===n[0]){let t=e,r=!0;for(;null!==t&&null!==(t=zn(t,!1));){const e=t.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(n=n.slice(1)),r=!1;break}}r&&(n=n.slice(1))}if(" "===n[n.length-1]){let t=e,r=!0;for(;null!==t&&null!==(t=zn(t,!0));)if((t.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}r&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:Zn(n)}}function zn(t,e){let n=t;for(;;){let t;for(;null===(t=e?n.nextSibling:n.previousSibling);){const t=n.parentElement;if(null===t)return null;n=t}if(n=t,Bo(n)){const t=n.style.display;if(""===t&&!zo(n)||""!==t&&!t.startsWith("inline"))return null}let r=n;for(;null!==(r=e?n.firstChild:n.lastChild);)n=r;if(Bi(n))return n;if("BR"===n.nodeName)return null}}const Un={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function jn(t){const e=Un[t.nodeName.toLowerCase()];return void 0===e?{node:null}:{forChild:$n(t.style,e),node:null}}function Zn(t=""){return Do(new In(t))}function qn(t){return t instanceof In}function $n(t,e){const n=t.fontWeight,r=t.textDecoration.split(" "),i="700"===n||"bold"===n,o=r.includes("line-through"),s="italic"===t.fontStyle,l=r.includes("underline"),c=t.verticalAlign;return t=>qn(t)?(i&&!t.hasFormat("bold")&&t.toggleFormat("bold"),o&&!t.hasFormat("strikethrough")&&t.toggleFormat("strikethrough"),s&&!t.hasFormat("italic")&&t.toggleFormat("italic"),l&&!t.hasFormat("underline")&&t.toggleFormat("underline"),"sub"!==c||t.hasFormat("subscript")||t.toggleFormat("subscript"),"super"!==c||t.hasFormat("superscript")||t.toggleFormat("superscript"),e&&!t.hasFormat(e)&&t.toggleFormat(e),t):t}class Vn extends In{static getType(){return"tab"}static clone(t){return new Vn(t.__key)}constructor(t){super("\t",t),this.__detail=2}static importDOM(){return null}createDOM(t){const e=super.createDOM(t),n=vo(t.theme,"tab");return void 0!==n&&e.classList.add(...n),e}static importJSON(t){return Hn().updateFromJSON(t)}setTextContent(t){return"\t"!==t&&""!==t&&i(126),super.setTextContent("\t")}spliceText(t,e,n,i){return""===n&&0===e||"\t"===n&&1===e||r(286),this}setDetail(t){return 2!==t&&r(127),this}setMode(t){return"normal"!==t&&r(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Hn(){return Do(new Vn)}function Gn(t){return t instanceof Vn}class Yn{key;offset;type;_selection;constructor(t,e,n){this._selection=null,this.key=t,this.offset=e,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:ws(Ws(Ds(this,"next")),Ws(Ds(t,"next")))<0}getNode(){const t=Vi(this.key);return null===t&&r(20),t}set(t,e,n,r){const i=this._selection,o=this.key;r&&this.key===t&&this.offset===e&&this.type===n||(this.key=t,this.offset=e,this.type=n,Ir()||($i()===o&&qi(t),null!==i&&(i.setCachedNodes(null),i.dirty=!0)))}}function Xn(t,e,n){return new Yn(t,e,n)}function Qn(t,e){let n=e.__key,r=t.offset,i="element";if(qn(e)){i="text";const t=e.getTextContentSize();r>t&&(r=t)}else if(!ni(e)){const t=e.getNextSibling();if(qn(t))n=t.__key,r=0,i="text";else{const t=e.getParent();t&&(n=t.__key,r=e.getIndexWithinParent()+1)}}t.set(n,r,i)}function tr(t,e){if(ni(e)){const n=e.getLastDescendant();ni(n)||qn(n)?Qn(t,n):Qn(t,e)}else Qn(t,e)}class er{_nodes;_cachedNodes;dirty;constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!ir(t))return!1;const e=this._nodes,n=t._nodes;return e.size===n.size&&Array.from(e).every(t=>n.has(t))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new er(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const e=this.getNodes(),n=e.length,r=e[n-1];let i;if(qn(r))i=r.select();else{const t=r.getIndexWithinParent()+1;i=r.getParentOrThrow().select(t,t)}i.insertNodes(t);for(let t=0;t<n;t++)e[t].remove()}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=this._nodes,n=[];for(const t of e){const e=Vi(t);null!==e&&n.push(e)}return Ir()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let e="";for(let n=0;n<t.length;n++)e+=t[n].getTextContent();return e}deleteNodes(){const t=this.getNodes();if((vr()||xr())===this&&t[0]){const e=_s(t[0],"next");!function(t){const e=vr(),n=nr(e)?e:mr();Fs(n,t),no(n)}(Ns(e,e))}for(const e of t)e.remove()}}function nr(t){return t instanceof rr}class rr{format;style;anchor;focus;_cachedNodes;dirty;constructor(t,e,n,r){this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!nr(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=function(t){const e=[],[n,r]=t.getTextSlices();n&&e.push(n.caret.origin);const i=new Set,o=new Set;for(const n of t)if(hs(n)){const{origin:t}=n;0===e.length?i.add(t):(o.add(t),e.push(t))}else{const{origin:t}=n;ni(t)&&o.has(t)||e.push(t)}if(r&&e.push(r.caret.origin),fs(t.focus)&&ni(t.focus.origin)&&null===t.focus.getNodeAtCaret())for(let n=Ss(t.focus.origin,"previous");hs(n)&&i.has(n.origin)&&!n.origin.isEmpty()&&n.origin.is(e[e.length-1]);n=Cs(n))i.delete(n.origin),e.pop();for(;e.length>1;){const t=e[e.length-1];if(!ni(t)||o.has(t)||t.isEmpty()||i.has(t))break;e.pop()}if(0===e.length&&t.isCollapsed()){const n=Ws(t.anchor),r=Ws(t.anchor.getFlipped()),i=t=>ds(t)?t.origin:t.getNodeAtCaret(),o=i(n)||i(r)||(t.anchor.getNodeAtCaret()?n.origin:r.origin);e.push(o)}return e}(js(Is(this),"next"));return Ir()||(this._cachedNodes=e),e}setTextNodeRange(t,e,n,r){this.anchor.set(t.__key,e,"text"),this.focus.set(n.__key,r,"text")}getTextContent(){const t=this.getNodes();if(0===t.length)return"";const e=t[0],n=t[t.length-1],r=this.anchor,i=this.focus,o=r.isBefore(i),[s,l]=sr(this);let c="",a=!0;for(let u=0;u<t.length;u++){const d=t[u];if(ni(d)&&!d.isInline())a||(c+="\n"),a=!d.isEmpty();else if(a=!1,qn(d)){let t=d.getTextContent();d===e?d===n?"element"===r.type&&"element"===i.type&&i.offset!==r.offset||(t=s<l?t.slice(s,l):t.slice(l,s)):t=o?t.slice(s):t.slice(l):d===n&&(t=o?t.slice(0,l):t.slice(0,s)),c+=t}else!oi(d)&&!wn(d)||d===n&&this.isCollapsed()||(c+=d.getTextContent())}return c}applyDOMRange(t){const e=Jr(),n=e.getEditorState()._selection,r=hr(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,n);if(null===r)return;const[i,o]=r;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(o.key,o.offset,o.type,!0),ot(this)}clone(){const t=this.anchor,e=this.focus;return new rr(Xn(t.key,t.offset,t.type),Xn(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=zi(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const e=P[t];return 0!==(this.format&e)}insertRawText(t){const e=t.split(/(\r?\n|\t)/),n=[],r=e.length;for(let t=0;t<r;t++){const r=e[t];"\n"===r||"\r\n"===r?n.push(En()):"\t"===r?n.push(Hn()):n.push(Zn(r))}this.insertNodes(n)}insertText(t){const e=this.anchor,n=this.focus,i=this.format,o=this.style;let s=e,l=n;!this.isCollapsed()&&n.isBefore(e)&&(s=n,l=e),"element"===s.type&&function(t,e,n,r){const i=t.getNode(),o=i.getChildAtIndex(t.offset),s=Zn();if(s.setFormat(n),s.setStyle(r),_i(o))o.splice(0,0,[s]);else{const t=li(i)?mi().append(s):s;null===o?i.append(t):o.insertBefore(t)}t.is(e)&&e.set(s.__key,0,"text"),t.set(s.__key,0,"text")}(s,l,i,o),"element"===l.type&&Ls(l,Ws(Ds(l,"next")));const c=s.offset;let a=l.offset;const u=this.getNodes(),d=u.length;let f=u[0];qn(f)||r(26);const h=f.getTextContent().length,g=f.getParentOrThrow();let p=u[d-1];if(1===d&&"element"===l.type&&(a=h,l.set(s.key,a,"text")),this.isCollapsed()&&c===h&&(Ki(f)||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&null===f.getNextSibling())){let e=f.getNextSibling();if(qn(e)&&e.canInsertTextBefore()&&!Ki(e)||(e=Zn(),e.setFormat(i),e.setStyle(o),g.canInsertTextAfter()?f.insertAfter(e):g.insertAfter(e)),e.select(0,0),f=e,""!==t)return void this.insertText(t)}else if(this.isCollapsed()&&0===c&&(Ki(f)||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&null===f.getPreviousSibling())){let e=f.getPreviousSibling();if(qn(e)&&!Ki(e)||(e=Zn(),e.setFormat(i),g.canInsertTextBefore()?f.insertBefore(e):g.insertBefore(e)),e.select(),f=e,""!==t)return void this.insertText(t)}else if(f.isSegmented()&&c!==h){const t=Zn(f.getTextContent());t.setFormat(i),f.replace(t),f=t}else if(!this.isCollapsed()&&""!==t){const e=p.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||ni(e)&&(!e.canInsertTextBefore()||!e.canInsertTextAfter()))return this.insertText(""),fr(this.anchor,this.focus,null),void this.insertText(t)}if(1===d){if(Ri(f)){const e=Zn(t);return e.select(),void f.replace(e)}const e=f.getFormat(),n=f.getStyle();if(c!==a||e===i&&n===o){if(Gn(f)){const e=Zn(t);return e.setFormat(i),e.setStyle(o),e.select(),void f.replace(e)}}else{if(""!==f.getTextContent()){const e=Zn(t);if(e.setFormat(i),e.setStyle(o),e.select(),0===c)f.insertBefore(e,!1);else{const[t]=f.splitText(c);t.insertAfter(e,!1)}return void(e.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length))}f.setFormat(i),f.setStyle(o)}const r=a-c;f=f.spliceText(c,r,t,!0),""===f.getTextContent()?f.remove():"text"===this.anchor.type&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=e,this.style=n))}else{const e=new Set([...f.getParentKeys(),...p.getParentKeys()]),n=ni(f)?f:f.getParentOrThrow();let r=ni(p)?p:p.getParentOrThrow(),i=p;if(!n.is(r)&&r.isInline())do{i=r,r=r.getParentOrThrow()}while(r.isInline());if("text"===l.type&&(0!==a||""===p.getTextContent())||"element"===l.type&&p.getIndexWithinParent()<a)if(qn(p)&&!Ri(p)&&a!==p.getTextContentSize()){if(p.isSegmented()){const t=Zn(p.getTextContent());p.replace(t),p=t}li(l.getNode())||"text"!==l.type||(p=p.spliceText(0,a,"")),e.add(p.__key)}else{const t=p.getParentOrThrow();t.canBeEmpty()||1!==t.getChildrenSize()?p.remove():t.remove()}else e.add(p.__key);const o=r.getChildren(),s=new Set(u),g=n.is(r),m=n.isInline()&&null===f.getNextSibling()?n:f;for(let t=o.length-1;t>=0;t--){const e=o[t];if(e.is(f)||ni(e)&&e.isParentOf(f))break;e.isAttached()&&(!s.has(e)||e.is(i)?g||m.insertAfter(e,!1):e.remove())}if(!g){let t=r,n=null;for(;null!==t;){const r=t.getChildren(),i=r.length;(0===i||r[i-1].is(n))&&(e.delete(t.__key),n=t),t=t.getParent()}}if(Ri(f))if(c===h)f.select();else{const e=Zn(t);e.select(),f.replace(e)}else f=f.spliceText(c,h-c,t,!0),""===f.getTextContent()?f.remove():f.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length);for(let t=1;t<d;t++){const n=u[t],r=n.__key;e.has(r)||n.remove()}}}removeText(){const t=vr()===this;Fs(this,Js(Is(this))),t&&vr()!==this&&no(this)}formatText(t,e=null){if(this.isCollapsed())return this.toggleFormat(t),void qi(null);const n=this.getNodes(),r=[];for(const t of n)qn(t)&&r.push(t);const i=e=>{n.forEach(n=>{if(ni(n)){const r=n.getFormatFlags(t,e);n.setTextFormat(r)}})},o=r.length;if(0===o)return this.toggleFormat(t),qi(null),void i(e);const s=this.anchor,l=this.focus,c=this.isBackward(),a=c?l:s,u=c?s:l;let d=0,f=r[0],h="element"===a.type?0:a.offset;if("text"===a.type&&h===f.getTextContentSize()&&(d=1,f=r[1],h=0),null==f)return;const g=f.getFormatFlags(t,e);i(g);const p=o-1;let m=r[p];const _="text"===u.type?u.offset:m.getTextContentSize();if(f.is(m)){if(h===_)return;if(Ki(f)||0===h&&_===f.getTextContentSize())f.setFormat(g);else{const t=f.splitText(h,_),e=0===h?t[0]:t[1];e.setFormat(g),"text"===a.type&&a.set(e.__key,0,"text"),"text"===u.type&&u.set(e.__key,_-h,"text")}return void(this.format=g)}0===h||Ki(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);const y=m.getFormatFlags(t,g);_>0&&(_===m.getTextContentSize()||Ki(m)||([m]=m.splitText(_)),m.setFormat(y));for(let e=d+1;e<p;e++){const n=r[e],i=n.getFormatFlags(t,y);n.setFormat(i)}"text"===a.type&&a.set(f.__key,h,"text"),"text"===u.type&&u.set(m.__key,_,"text"),this.format=g|y}insertNodes(t){if(0===t.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();const e=vr();return nr(e)||r(134),e.insertNodes(t)}const e=(this.isBackward()?this.focus:this.anchor).getNode(),n=ns(e,jo),i=t[t.length-1];if(ni(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const e=Er(this);n.splice(e,0,t),i.selectEnd()}return}if(!t.some(t=>(ni(t)||oi(t))&&!t.isInline())){ni(n)||r(211,e.constructor.name,e.getType());const o=Er(this);return n.splice(o,0,t),void i.selectEnd()}const o=function(t){const e=mi();let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=wn(i);if(o||oi(i)&&i.isInline()||ni(i)&&i.isInline()||qn(i)||i.isParentRequired()){if(null===n&&(n=i.createParentElementNode(),e.append(n),o))continue;null!==n&&n.append(i)}else e.append(i),n=null}return e}(t),s=o.getLastDescendant(),l=o.getChildren(),c=ni(n)&&n.isEmpty()?null:this.insertParagraph(),a=l[l.length-1];let u=l[0];var d;ni(d=u)&&jo(d)&&!d.isEmpty()&&ni(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(ni(n)||r(211,e.constructor.name,e.getType()),n.append(...u.getChildren()),u=l[1]),u&&(null===n&&r(212,e.constructor.name,e.getType()),function(t,e){const n=e.getParentOrThrow().getLastChild();let i=e;const o=[e];for(;i!==n;)i.getNextSibling()||r(140),i=i.getNextSibling(),o.push(i);let s=t;for(const t of o)s=s.insertAfter(t)}(n,u));const f=ns(s,jo);c&&ni(f)&&(c.canMergeWhenEmpty()||jo(a))&&(f.append(...c.getChildren()),c.remove()),ni(n)&&n.isEmpty()&&n.remove(),s.selectEnd();const h=ni(n)?n.getLastChild():null;wn(h)&&f!==n&&h.remove()}insertParagraph(){if("root"===this.anchor.key){const t=mi();return to().splice(this.anchor.offset,0,[t]),t.select(),t}const t=Er(this),e=ns(this.anchor.getNode(),jo);ni(e)||r(213);const n=e.getChildAtIndex(t),i=n?[n,...n.getNextSiblings()]:[],o=e.insertNewAfter(this,!1);return o?(o.append(...i),o.selectStart(),o):null}insertLineBreak(t){const e=En();if(this.insertNodes([e]),t){const t=e.getParentOrThrow(),n=e.getIndexWithinParent();t.select(n,n)}}extract(){const t=[...this.getNodes()],e=t.length;let n=t[0],r=t[e-1];const[i,o]=sr(this),s=this.isBackward(),[l,c]=s?[this.focus,this.anchor]:[this.anchor,this.focus],[a,u]=s?[o,i]:[i,o];if(0===e)return[];if(1===e){if(qn(n)&&!this.isCollapsed()){const t=n.splitText(a,u),e=0===a?t[0]:t[1];return e?(l.set(e.getKey(),0,"text"),c.set(e.getKey(),e.getTextContentSize(),"text"),[e]):[]}return[n]}if(qn(n)&&(a===n.getTextContentSize()?t.shift():0!==a&&([,n]=n.splitText(a),t[0]=n,l.set(n.getKey(),0,"text"))),qn(r)){const e=r.getTextContent().length;0===u?t.pop():u!==e&&([r]=r.splitText(u),t[t.length-1]=r,c.set(r.getKey(),r.getTextContentSize(),"text"))}return t}modify(t,e,n){if(Or(this,t,e,n))return;const r="move"===t,i=Jr(),o=Ro(Po(i));if(!o)return;const s=i._blockCursorElement,l=i._rootElement,c=this.focus.getNode();if(null===l||null===s||!ni(c)||c.isInline()||c.canBeEmpty()||Io(s,i,l),this.dirty){let t=No(i,this.anchor.key),e=No(i,this.focus.key);"text"===this.anchor.type&&(t=Wi(t)),"text"===this.focus.type&&(e=Wi(e)),t&&e&&kr(o,t,this.anchor.offset,e,this.focus.offset)}if(function(t,e,n,r){t.modify(e,n,r)}(o,t,e?"backward":"forward",n),o.rangeCount>0){const t=o.getRangeAt(0),n=this.anchor.getNode(),i=li(n)?n:function(t){let e=t.getParentOrThrow();for(;null!==e;){if(Ao(e))return e;e=e.getParentOrThrow()}return e}(n);if(this.applyDOMRange(t),this.dirty=!0,!r){const n=this.getNodes(),r=[];let s=!1;for(let t=0;t<n.length;t++){const e=n[t];Oo(e,i)?r.push(e):s=!0}if(s&&r.length>0)if(e){const t=r[0];ni(t)?t.selectStart():t.getParentOrThrow().selectStart()}else{const t=r[r.length-1];ni(t)?t.selectEnd():t.getParentOrThrow().selectEnd()}o.anchorNode===t.startContainer&&o.anchorOffset===t.startOffset||function(t){const e=t.focus,n=t.anchor,r=n.key,i=n.offset,o=n.type;n.set(e.key,e.offset,e.type,!0),e.set(r,i,o,!0)}(this)}}"lineboundary"===n&&Or(this,t,e,n,"decorators")}forwardDeletion(t,e,n){if(!n&&("element"===t.type&&ni(e)&&t.offset===e.getChildrenSize()||"text"===t.type&&t.offset===e.getTextContentSize())){const t=e.getParent(),n=e.getNextSibling()||(null===t?null:t.getNextSibling());if(ni(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(t){const e=this.isCollapsed();if(this.isCollapsed()){const e=this.anchor;let n=e.getNode();if(this.forwardDeletion(e,n,t))return;const r=ks(Ds(e,t?"previous":"next"));if(r.getTextSlices().every(t=>null===t||0===t.distance)){let t={type:"initial"};for(const e of r.iterNodeCarets("shadowRoot"))if(hs(e))if(e.origin.isInline());else{if(e.origin.isShadowRoot()){if("merge-block"===t.type)break;if(ni(r.anchor.origin)&&r.anchor.origin.isEmpty()){const t=Ws(e);Fs(this,Ns(t,t)),r.anchor.origin.remove()}return}"merge-next-block"!==t.type&&"merge-block"!==t.type||(t={block:t.block,caret:e,type:"merge-block"})}else{if("merge-block"===t.type)break;if(fs(e)){if(ni(e.origin)){if(e.origin.isInline()){if(!e.origin.isParentOf(r.anchor.origin))break}else t={block:e.origin,type:"merge-next-block"};continue}if(oi(e.origin)){if(e.origin.isIsolated());else if("merge-next-block"===t.type&&(e.origin.isKeyboardSelectable()||!e.origin.isInline())&&ni(r.anchor.origin)&&r.anchor.origin.isEmpty()){r.anchor.origin.remove();const t=_r();t.add(e.origin.getKey()),no(t)}else e.origin.remove();return}break}}if("merge-block"===t.type){const{caret:e,block:n}=t;return Fs(this,Ns(!e.origin.isEmpty()&&n.isEmpty()?Rs(_s(n,e.direction)):r.anchor,e)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&0===e.offset&&lr(this,e.getNode()))return}else{const r="text"===i.type?i.getNode():null;if(n="text"===e.type?e.getNode():null,null!==r&&r.isSegmented()){const e=i.offset,o=r.getTextContentSize();if(r.is(n)||t&&e!==o||!t&&0!==e)return void ar(r,t,e)}else if(null!==n&&n.isSegmented()){const i=e.offset,o=n.getTextContentSize();if(n.is(r)||t&&0!==i||!t&&i!==o)return void ar(n,t,i)}!function(t,e){const n=t.anchor,r=t.focus,i=n.getNode();if(i===r.getNode()&&"text"===n.type&&"text"===r.type){const t=n.offset,o=r.offset,s=t<o,l=s?t:o,c=s?o:t,a=c-1;l!==a&&function(t){return!(io(t)||cr(t))}(i.getTextContent().slice(l,c))&&(e?r.set(r.key,a,r.type):n.set(n.key,a,n.type))}}(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){const t=this.anchor.getNode();t.isEmpty()&&li(t.getParent())&&null===t.getPreviousSibling()&&lr(this,t)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const e=this.anchor,n=e.getNode();if(this.forwardDeletion(e,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ir(t){return t instanceof er}function or(t){const e=t.offset;if("text"===t.type)return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function sr(t){const e=t.getStartEndPoints();if(null===e)return[0,0];const[n,r]=e;return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[or(n),or(r)]}function lr(t,e){for(let n=e;n;n=n.getParent()){if(ni(n)){if(n.collapseAtStart(t))return!0;if(Ao(n))break}if(n.getPreviousSibling())break}return!1}const cr=(()=>{try{const t=new RegExp("\\p{Emoji}","u"),e=t.test.bind(t);if(e("")&&e("#")&&e(""))return e}catch(t){}return()=>!1})();function ar(t,e,n){const r=t,i=r.getTextContent().split(/(?=\s)/g),o=i.length;let s=0,l=0;for(let t=0;t<o;t++){const r=t===o-1;if(l=s,s+=i[t].length,e&&s===n||s>n||r){i.splice(t,1),r&&(l=void 0);break}}const c=i.join("").trim();""===c?r.remove():(r.setTextContent(c),r.select(l,l))}function ur(t,e,n,i){let o,s=e;if(Bo(t)){let l=!1;const c=t.childNodes,a=c.length,u=i._blockCursorElement;s===a&&(l=!0,s=a-1);let d=c[s],f=!1;if(d===u)d=c[s+1],f=!0;else if(null!==u){const n=u.parentNode;t===n&&e>Array.prototype.indexOf.call(n.children,u)&&s--}if(o=ro(d),qn(o))s=vs(o,l?"next":"previous");else{let c=ro(t);if(null===c)return null;if(ni(c)){const a=i.getElementByKey(c.getKey());null===a&&r(214);const u=c.getDOMSlot(a);[c,s]=u.resolveChildIndex(c,a,t,e),ni(c)||r(215),l&&s>=c.getChildrenSize()&&(s=Math.max(0,c.getChildrenSize()-1));let d=c.getChildAtIndex(s);if(ni(d)&&function(t,e,n){const r=t.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode()}(d,0,n)){const t=l?d.getLastDescendant():d.getFirstDescendant();null===t?c=d:(d=t,c=ni(d)?d:d.getParentOrThrow()),s=0}qn(d)?(o=d,c=null,s=vs(d,l?"next":"previous")):d!==c&&l&&!f&&(ni(c)||r(216),s=Math.min(c.getChildrenSize(),s+1))}else{const n=c.getIndexWithinParent();s=0===e&&oi(c)&&ro(t)===c?n:n+1,c=c.getParentOrThrow()}if(ni(c))return Xn(c.__key,s,"element")}}else o=ro(t);return qn(o)?Xn(o.__key,vs(o,s,"clamp"),"text"):null}function dr(t,e,n){const r=t.offset,i=t.getNode();if(0===r){const r=i.getPreviousSibling(),o=i.getParent();if(e){if((n||!e)&&null===r&&ni(o)&&o.isInline()){const e=o.getPreviousSibling();qn(e)&&t.set(e.__key,e.getTextContent().length,"text")}}else ni(r)&&!n&&r.isInline()?t.set(r.__key,r.getChildrenSize(),"element"):qn(r)&&t.set(r.__key,r.getTextContent().length,"text")}else if(r===i.getTextContent().length){const r=i.getNextSibling(),o=i.getParent();if(e&&ni(r)&&r.isInline())t.set(r.__key,0,"element");else if((n||e)&&null===r&&ni(o)&&o.isInline()&&!o.canInsertTextAfter()){const e=o.getNextSibling();qn(e)&&t.set(e.__key,0,"text")}}}function fr(t,e,n){if("text"===t.type&&"text"===e.type){const r=t.isBefore(e),i=t.is(e);dr(t,r,i),dr(e,!r,i),i&&e.set(t.key,t.offset,t.type);const o=Jr();if(o.isComposing()&&o._compositionKey!==t.key&&nr(n)){const r=n.anchor,i=n.focus;t.set(r.key,r.offset,r.type,!0),e.set(i.key,i.offset,i.type,!0)}}}function hr(t,e,n,r,i,o){if(null===t||null===n||!Di(i,t,n))return null;const s=ur(t,e,nr(o)?o.anchor:null,i);if(null===s)return null;const l=ur(n,r,nr(o)?o.focus:null,i);if(null===l)return null;if("element"===s.type&&"element"===l.type){const e=ro(t),r=ro(n);if(oi(e)&&oi(r))return null}return fr(s,l,o),[s,l]}function gr(t){return ni(t)&&!t.isInline()}function pr(t,e,n,r,i,o){const s=Br(),l=new rr(Xn(t,e,i),Xn(n,r,o),0,"");return l.dirty=!0,s._selection=l,l}function mr(){const t=Xn("root",0,"element"),e=Xn("root",0,"element");return new rr(t,e,0,"")}function _r(){return new er(new Set)}function yr(t,e,n,r){const i=n._window;if(null===i)return null;const o=r||i.event,s=o?o.type:void 0,l="selectionchange"===s,c=!B&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&o&&3===o.detail||"drop"===s||void 0===s);let a,u,d,f;if(nr(t)&&!c)return t.clone();if(null===e)return null;if(a=e.anchorNode,u=e.focusNode,d=e.anchorOffset,f=e.focusOffset,(l||void 0===s)&&nr(t)&&!Di(n,a,u))return t.clone();const h=hr(a,d,u,f,n,t);if(null===h)return null;const[g,p]=h;return new rr(g,p,nr(t)?t.format:0,nr(t)?t.style:"")}function vr(){return Br()._selection}function xr(){return Jr()._editorState._selection}function Sr(t,e,n,r=1){const i=t.anchor,o=t.focus,s=i.getNode(),l=o.getNode();if(!e.is(s)&&!e.is(l))return;const c=e.__key;if(t.isCollapsed()){const e=i.offset;if(n<=e&&r>0||n<e&&r<0){const n=Math.max(0,e+r);i.set(c,n,"element"),o.set(c,n,"element"),Cr(t)}}else{const s=t.isBackward(),l=s?o:i,a=l.getNode(),u=s?i:o,d=u.getNode();if(e.is(a)){const t=l.offset;(n<=t&&r>0||n<t&&r<0)&&l.set(c,Math.max(0,t+r),"element")}if(e.is(d)){const t=u.offset;(n<=t&&r>0||n<t&&r<0)&&u.set(c,Math.max(0,t+r),"element")}}Cr(t)}function Cr(t){const e=t.anchor,n=e.offset,r=t.focus,i=r.offset,o=e.getNode(),s=r.getNode();if(t.isCollapsed()){if(!ni(o))return;const t=o.getChildrenSize(),i=n>=t,s=i?o.getChildAtIndex(t-1):o.getChildAtIndex(n);if(qn(s)){let t=0;i&&(t=s.getTextContentSize()),e.set(s.__key,t,"text"),r.set(s.__key,t,"text")}return}if(ni(o)){const t=o.getChildrenSize(),r=n>=t,i=r?o.getChildAtIndex(t-1):o.getChildAtIndex(n);if(qn(i)){let t=0;r&&(t=i.getTextContentSize()),e.set(i.__key,t,"text")}}if(ni(s)){const t=s.getChildrenSize(),e=i>=t,n=e?s.getChildAtIndex(t-1):s.getChildAtIndex(i);if(qn(n)){let t=0;e&&(t=n.getTextContentSize()),r.set(n.__key,t,"text")}}}function br(t,e,n,r,i){let o=null,s=0,l=null;null!==r?(o=r.__key,qn(r)?(s=r.getTextContentSize(),l="text"):ni(r)&&(s=r.getChildrenSize(),l="element")):null!==i&&(o=i.__key,qn(i)?l="text":ni(i)&&(l="element")),null!==o&&null!==l?t.set(o,s,l):(s=e.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),t.set(n.__key,s,"element"))}function Tr(t,e,n,r,i){"text"===t.type?t.set(n,t.offset+(e?0:i),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element")}function kr(t,e,n,r,i){try{t.setBaseAndExtent(e,n,r,i)}catch(t){}}function Nr(t){let e=vr()||xr();null===e&&(e=to().selectEnd()),e.insertNodes(t)}function Er(t){let e=t;t.isCollapsed()||e.removeText();const n=vr();nr(n)&&(e=n),nr(e)||r(161);const i=e.anchor;let o=i.getNode(),s=i.offset;for(;!jo(o);){const t=o;if([o,s]=wr(o,s),t.is(o))break}return s}function wr(t,e){const n=t.getParent();if(!n){const t=mi();return to().append(t),t.select(),[to(),0]}if(qn(t)){const r=t.splitText(e);if(0===r.length)return[n,t.getIndexWithinParent()];const i=0===e?0:1;return[n,r[0].getIndexWithinParent()+i]}if(!ni(t)||0===e)return[n,t.getIndexWithinParent()];const r=t.getChildAtIndex(e);if(r){const n=new rr(Xn(t.__key,e,"element"),Xn(t.__key,e,"element"),0,""),i=t.insertNewAfter(n);i&&i.append(r,...r.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}function Or(t,e,n,r,i="decorators-and-blocks"){if("move"===e&&"character"===r&&!t.isCollapsed()){const[e,r]=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];return r.set(e.key,e.offset,e.type),!0}const o=Ds(t.focus,n?"previous":"next"),s="lineboundary"===r,l="move"===e;let c=o,a="decorators-and-blocks"===i;if(!zs(c)){for(const t of c){a=!1;const{origin:e}=t;if(!oi(e)||e.isIsolated()||(c=t,!s||!e.isInline()))break}if(a)for(const t of ks(o).iterNodeCarets("extend"===e?"shadowRoot":"root")){if(hs(t))t.origin.isInline()||(c=t);else{if(ni(t.origin))continue;oi(t.origin)&&!t.origin.isInline()&&(c=t)}break}}if(c===o)return!1;if(l&&!s&&oi(c.origin)&&c.origin.isKeyboardSelectable()){const t=_r();return t.add(c.origin.getKey()),no(t),!0}return c=Ws(c),l&&Ls(t.anchor,c),Ls(t.focus,c),a||!s}let Mr=null,Pr=null,Ar=!1,Dr=!1,Lr=0;const Fr={characterData:!0,childList:!0,subtree:!0};function Ir(){return Ar||null!==Mr&&Mr._readOnly}function Rr(){Ar&&r(13)}function Kr(){Lr>99&&r(14)}function Br(){return null===Mr&&r(195,Wr()),Mr}function Jr(){return null===Pr&&r(196,Wr()),Pr}function Wr(){let t=0;const e=new Set,n=Ti.version;if("undefined"!=typeof window)for(const r of document.querySelectorAll("[contenteditable]")){const i=Ii(r);if(Li(i))t++;else if(i){let t=String(i.constructor.version||"<0.17.1");t===n&&(t+=" (separately built, likely a bundler configuration issue)"),e.add(t)}}let r=` Detected on the page: ${t} compatible editor(s) with version ${n}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function zr(t,e,n){const r=e.__type,i=wi(t,r);let o=n.get(r);void 0===o&&(o=Array.from(i.transforms),n.set(r,o));const s=o.length;for(let t=0;t<s&&(o[t](e),e.isAttached());t++);}function Ur(t,e){return void 0!==t&&t.__key!==e&&t.isAttached()}function jr(t,e){if(!e)return;const n=t._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const t of r)n.add(t)}function Zr(t){return qr(t,Jr()._nodes)}function qr(t,e){const n=t.type,i=e.get(n);void 0===i&&r(17,n);const o=i.klass;t.type!==o.getType()&&r(18,o.name);const s=o.importJSON(t),l=t.children;if(ni(s)&&Array.isArray(l))for(let t=0;t<l.length;t++){const n=qr(l[t],e);s.append(n)}return s}function $r(t,e,n){const r=Mr,i=Ar,o=Pr;Mr=e,Ar=!0,Pr=t;try{return n()}finally{Mr=r,Ar=i,Pr=o}}function Vr(t,e){const n=t._pendingEditorState,r=t._rootElement,i=t._headless||null===r;if(null===n)return;const o=t._editorState,s=o._selection,l=n._selection,c=0!==t._dirtyType,a=Mr,u=Ar,d=Pr,f=t._updating,h=t._observer;let g=null;if(t._pendingEditorState=null,t._editorState=n,!i&&c&&null!==h){Pr=t,Mr=n,Ar=!1,t._updating=!0;try{const e=t._dirtyType,r=t._dirtyElements,i=t._dirtyLeaves;h.disconnect(),g=function(t,e,n,r,i,o){_t="",xt="",St=2===r,ct=n,lt=n._config,at=n._nodes,ut=ct._listeners.mutation,dt=i,ft=o,ht=t._nodeMap,gt=e._nodeMap,Ct=e._readOnly,pt=new Map(n._keyToDOMMap);const s=new Map;return mt=s,Ft("root",null),ct=void 0,at=void 0,dt=void 0,ft=void 0,ht=void 0,gt=void 0,lt=void 0,pt=void 0,mt=void 0,s}(o,n,t,e,r,i)}catch(e){if(e instanceof Error&&t._onError(e),Dr)throw e;return Si(t,null,r,n),V(t),t._dirtyType=2,Dr=!0,Vr(t,o),void(Dr=!1)}finally{h.observe(r,Fr),t._updating=f,Mr=a,Ar=u,Pr=d}}n._readOnly||(n._readOnly=!0);const p=t._dirtyLeaves,_=t._dirtyElements,y=t._normalizedNodes,v=t._updateTags,x=t._deferred;c&&(t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),function(t,e){const n=t._decorators;let r=t._pendingDecorators||n;const i=e._nodeMap;let o;for(o in r)i.has(o)||(r===n&&(r=Xi(t)),delete r[o])}(t,n);const S=i?null:Ro(Po(t));if(t._editable&&null!==S&&(c||null===l||l.dirty||!l.is(s))&&null!==r&&!v.has("skip-dom-selection")){Pr=t,Mr=n;try{if(null!==h&&h.disconnect(),c||null===l||l.dirty){const e=t._blockCursorElement;null!==e&&Io(e,t,r),function(t,e,n,r,i,o){const s=r.anchorNode,l=r.focusNode,c=r.anchorOffset,a=r.focusOffset,u=document.activeElement;if(i.has("collaboration")&&u!==o||null!==u&&Ai(u))return;if(!nr(e))return void(null!==t&&Di(n,s,l)&&r.removeAllRanges());const d=e.anchor,f=e.focus,h=d.key,g=f.key,p=No(n,h),m=No(n,g),_=d.offset,y=f.offset,v=e.format,x=e.style,S=e.isCollapsed();let C=p,b=m,T=!1;if("text"===d.type){C=Wi(p);const t=d.getNode();T=t.getFormat()!==v||t.getStyle()!==x}else nr(t)&&"text"===t.anchor.type&&(T=!0);var k,N,E,w,O;if("text"===f.type&&(b=Wi(m)),null!==C&&null!==b&&(S&&(null===t||T||nr(t)&&(t.format!==v||t.style!==x))&&(k=v,N=x,E=_,w=h,O=performance.now(),_n=[k,N,E,w,O]),c!==_||a!==y||s!==C||l!==b||"Range"===r.type&&S||(null!==u&&o.contains(u)||i.has("skip-selection-focus")||o.focus({preventScroll:!0}),"element"===d.type))){if(kr(r,C,_,b,y),!i.has("skip-scroll-into-view")&&e.isCollapsed()&&null!==o&&o===document.activeElement){const t=nr(e)&&"element"===e.anchor.type?C.childNodes[_]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==t){let e;if(t instanceof Text){const n=document.createRange();n.selectNode(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();!function(t,e,n){const r=wo(n),i=Mo(r);if(null===r||null===i)return;let{top:o,bottom:s}=e,l=0,c=0,a=n;for(;null!==a;){const e=a===r.body;if(e)l=0,c=Po(t).innerHeight;else{const t=a.getBoundingClientRect();l=t.top,c=t.bottom}let n=0;if(o<l?n=-(l-o):s>c&&(n=s-c),0!==n)if(e)i.scrollBy(0,n);else{const t=a.scrollTop;a.scrollTop+=n;const e=a.scrollTop-t;o-=e,s-=e}if(e)break;a=Eo(a)}}(n,e,o)}}Ue=!0}}(s,l,t,S,v,r)}!function(t,e,n){let r=t._blockCursorElement;if(nr(n)&&n.isCollapsed()&&"element"===n.anchor.type&&e.contains(document.activeElement)){const i=n.anchor,o=i.getNode(),s=i.offset;let l=!1,c=null;if(s===o.getChildrenSize())Fo(o.getChildAtIndex(s-1))&&(l=!0);else{const e=o.getChildAtIndex(s);if(null!==e&&Fo(e)){const n=e.getPreviousSibling();(null===n||Fo(n))&&(l=!0,c=t.getElementByKey(e.__key))}}if(l){const n=t.getElementByKey(o.__key);return null===r&&(t._blockCursorElement=r=function(t){const e=t.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let r=e.blockCursor;if(void 0!==r){if("string"==typeof r){const t=m(r);r=e.blockCursor=t}void 0!==r&&n.classList.add(...r)}return n}(t._config)),e.style.caretColor="transparent",void(null===c?n.appendChild(r):n.insertBefore(r,c))}}null!==r&&Io(r,t,e)}(t,r,l)}finally{null!==h&&h.observe(r,Fr),Pr=d,Mr=a}}null!==g&&function(t,e,n,r,i){const o=Array.from(t._listeners.mutation),s=o.length;for(let t=0;t<s;t++){const[s,l]=o[t];for(const t of l){const o=e.get(t);void 0!==o&&s(o,{dirtyLeaves:r,prevEditorState:i,updateTags:n})}}}(t,g,v,p,o),nr(l)||null===l||null!==s&&s.is(l)||t.dispatchCommand(Jt,void 0);const C=t._pendingDecorators;null!==C&&(t._decorators=C,t._pendingDecorators=null,Hr("decorator",t,!0,C)),function(t,e,n){const r=Qi(e),i=Qi(n);r!==i&&Hr("textcontent",t,!0,i)}(t,e||o,n),Hr("update",t,!0,{dirtyElements:_,dirtyLeaves:p,editorState:n,mutatedNodes:g,normalizedNodes:y,prevEditorState:e||o,tags:v}),function(t,e){if(t._deferred=[],0!==e.length){const n=t._updating;t._updating=!0;try{for(let t=0;t<e.length;t++)e[t]()}finally{t._updating=n}}}(t,x),function(t){const e=t._updates;if(0!==e.length){const n=e.shift();if(n){const[e,r]=n;Yr(t,e,r)}}}(t)}function Hr(t,e,n,...r){const i=e._updating;e._updating=n;try{const n=Array.from(e._listeners[t]);for(let t=0;t<n.length;t++)n[t].apply(null,r)}finally{e._updating=i}}function Gr(t,e){const n=t._updates;let i=e||!1;for(;0!==n.length;){const e=n.shift();if(e){const[n,o]=e,s=t._pendingEditorState;let l;void 0!==o&&(l=o.onUpdate,o.skipTransforms&&(i=!0),o.discrete&&(null===s&&r(191),s._flushSync=!0),l&&t._deferred.push(l),jr(t,o.tag)),null==s?Yr(t,n,o):n()}}return i}function Yr(t,e,n){const i=t._updateTags;let o,s=!1,l=!1;void 0!==n&&(o=n.onUpdate,jr(t,n.tag),s=n.skipTransforms||!1,l=n.discrete||!1),o&&t._deferred.push(o);const c=t._editorState;let a=t._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=t._pendingEditorState=ci(a||c),u=!0),a._flushSync=l;const d=Mr,f=Ar,h=Pr,g=t._updating;Mr=a,Ar=!1,t._updating=!0,Pr=t;const p=t._headless||null===t.getRootElement();Ni(null);try{u&&(p?null!==c._selection&&(a._selection=c._selection.clone()):a._selection=function(t,e){const n=t.getEditorState()._selection,r=Ro(Po(t));return nr(n)||null==n?yr(n,r,t,e):n.clone()}(t,n&&n.event||null));const i=t._compositionKey;e(),s=Gr(t,s),function(t,e){const n=e.getEditorState()._selection,r=t._selection;if(nr(r)){const t=r.anchor,e=r.focus;let i;if("text"===t.type&&(i=t.getNode(),i.selectionTransform(n,r)),"text"===e.type){const t=e.getNode();i!==t&&t.selectionTransform(n,r)}}}(a,t),0!==t._dirtyType&&(s?function(t,e){const n=e._dirtyLeaves,r=t._nodeMap;for(const t of n){const e=r.get(t);qn(e)&&e.isAttached()&&e.isSimpleText()&&!e.isUnmergeable()&&it(e)}}(a,t):function(t,e){const n=e._dirtyLeaves,r=e._dirtyElements,i=t._nodeMap,o=$i(),s=new Map;let l=n,c=l.size,a=r,u=a.size;for(;c>0||u>0;){if(c>0){e._dirtyLeaves=new Set;for(const t of l){const r=i.get(t);qn(r)&&r.isAttached()&&r.isSimpleText()&&!r.isUnmergeable()&&it(r),void 0!==r&&Ur(r,o)&&zr(e,r,s),n.add(t)}if(l=e._dirtyLeaves,c=l.size,c>0){Lr++;continue}}e._dirtyLeaves=new Set,e._dirtyElements=new Map,a.delete("root")&&a.set("root",!0);for(const t of a){const n=t[0],l=t[1];if(r.set(n,l),!l)continue;const c=i.get(n);void 0!==c&&Ur(c,o)&&zr(e,c,s)}l=e._dirtyLeaves,c=l.size,a=e._dirtyElements,u=a.size,Lr++}e._dirtyLeaves=n,e._dirtyElements=r}(a,t),Gr(t),function(t,e,n,r){const i=t._nodeMap,o=e._nodeMap,s=[];for(const[t]of r){const e=o.get(t);void 0!==e&&(e.isAttached()||(ni(e)&&K(e,t,i,o,s,r),i.has(t)||r.delete(t),s.push(t)))}for(const t of s)o.delete(t);for(const t of n){const e=o.get(t);void 0===e||e.isAttached()||(i.has(t)||n.delete(t),o.delete(t))}}(c,a,t._dirtyLeaves,t._dirtyElements)),i!==t._compositionKey&&(a._flushSync=!0);const o=a._selection;if(nr(o)){const t=a._nodeMap,e=o.anchor.key,n=o.focus.key;void 0!==t.get(e)&&void 0!==t.get(n)||r(19)}else ir(o)&&0===o._nodes.size&&(a._selection=null)}catch(e){return e instanceof Error&&t._onError(e),t._pendingEditorState=c,t._dirtyType=2,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void Vr(t)}finally{Mr=d,Ar=f,Pr=h,t._updating=g,Lr=0}const m=0!==t._dirtyType||t._deferred.length>0||function(t,e){const n=e.getEditorState()._selection,r=t._selection;if(null!==r){if(r.dirty||!r.is(n))return!0}else if(null!==n)return!0;return!1}(a,t);m?a._flushSync?(a._flushSync=!1,Vr(t)):u&&Mi(()=>{Vr(t)}):(a._flushSync=!1,u&&(i.clear(),t._deferred=[],t._pendingEditorState=null))}function Xr(t,e,n){Pr===t&&void 0===n?e():Yr(t,e,n)}class Qr{element;before;after;constructor(t,e,n){this.element=t,this.before=e||null,this.after=n||null}withBefore(t){return new Qr(this.element,t,this.after)}withAfter(t){return new Qr(this.element,this.before,t)}withElement(t){return this.element===t?this:new Qr(t,this.before,this.after)}insertChild(t){const e=this.before||this.getManagedLineBreak();return null!==e&&e.parentElement!==this.element&&r(222),this.element.insertBefore(t,e),this}removeChild(t){return t.parentElement!==this.element&&r(223),this.element.removeChild(t),this}replaceChild(t,e){return e.parentElement!==this.element&&r(224),this.element.replaceChild(t,e),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(null===t)this.removeManagedLineBreak();else{const e="decorator"===t&&(p||d||u);this.insertManagedLineBreak(e)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const e=this.element,n="IMG"===t.nodeName?t.nextSibling:null;n&&e.removeChild(n),e.removeChild(t),e.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const e=this.getManagedLineBreak();if(e){if(t===("IMG"===e.nodeName))return;this.removeManagedLineBreak()}const n=this.element,r=this.before,i=document.createElement("br");if(n.insertBefore(i,r),t){const t=document.createElement("img");t.setAttribute("data-lexical-linebreak","true"),t.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",t.alt="",n.insertBefore(t,i),n.__lexicalLineBreak=t}else n.__lexicalLineBreak=i}getFirstChildOffset(){let t=0;for(let e=this.after;null!==e;e=e.previousSibling)t++;return t}resolveChildIndex(t,e,n,r){if(n===this.element){const e=this.getFirstChildOffset();return[t,Math.min(e+t.getChildrenSize(),Math.max(e,r))]}const i=ti(e,n);i.push(r);const o=ti(e,this.element);let s=t.getIndexWithinParent();for(let t=0;t<o.length;t++){const e=i[t],n=o[t];if(void 0===e||e<n)break;if(e>n){s+=1;break}}return[t.getParentOrThrow(),s]}}function ti(t,e){const n=[];let i=e;for(;i!==t&&null!==i;i=i.parentNode){let t=0;for(let e=i.previousSibling;null!==e;e=e.previousSibling)t++;n.push(t)}return i!==t&&r(225),n.reverse()}class ei extends xn{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return L[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getChildrenKeys(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e.__key),e=e.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){const t=Jr()._dirtyElements;return null!==t&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return null!==e&&e.is(t)}getAllTextNodes(){const t=[];let e=this.getFirstChild();for(;null!==e;){if(qn(e)&&t.push(e),ni(e)){const n=e.getAllTextNodes();t.push(...n)}e=e.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;ni(t);){const e=t.getFirstChild();if(null===e)break;t=e}return t}getLastDescendant(){let t=this.getLastChild();for(;ni(t);){const e=t.getLastChild();if(null===e)break;t=e}return t}getDescendantByIndex(t){const e=this.getChildren(),n=e.length;if(t>=n){const t=e[n-1];return ni(t)&&t.getLastDescendant()||t||null}const r=e[t];return ni(r)&&r.getFirstDescendant()||r||null}getFirstChild(){const t=this.getLatest().__first;return null===t?null:Vi(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return null===t&&r(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return null===t?null:Vi(t)}getLastChildOrThrow(){const t=this.getLastChild();return null===t&&r(96,this.__key),t}getChildAtIndex(t){const e=this.getChildrenSize();let n,r;if(t<e/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=t;){if(r===t)return n;n=n.getNextSibling(),r++}return null}for(n=this.getLastChild(),r=e-1;null!==n&&r>=t;){if(r===t)return n;n=n.getPreviousSibling(),r--}return null}getTextContent(){let t="";const e=this.getChildren(),n=e.length;for(let r=0;r<n;r++){const i=e[r];t+=i.getTextContent(),ni(i)&&r!==n-1&&!i.isInline()&&(t+=E)}return t}getTextContentSize(){let t=0;const e=this.getChildren(),n=e.length;for(let r=0;r<n;r++){const i=e[r];t+=i.getTextContentSize(),ni(i)&&r!==n-1&&!i.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(""!==t){const e=D[t];return 0!==(this.getFormat()&e)}return!1}hasTextFormat(t){const e=P[t];return 0!==(this.getTextFormat()&e)}getFormatFlags(t,e){return zi(this.getLatest().__textFormat,t,e)}getTextStyle(){return this.getLatest().__textStyle}select(t,e){Rr();const n=vr();let r=t,i=e;const o=this.getChildrenSize();if(!this.canBeEmpty())if(0===t&&0===e){const t=this.getFirstChild();if(qn(t)||ni(t))return t.select(0,0)}else if(!(void 0!==t&&t!==o||void 0!==e&&e!==o)){const t=this.getLastChild();if(qn(t)||ni(t))return t.select()}void 0===r&&(r=o),void 0===i&&(i=o);const s=this.__key;return nr(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,i,"element"),n.dirty=!0,n):pr(s,r,s,i,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(t=>t.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const e=this.getWritable();return e.__dir=t,e}setFormat(t){return this.getWritable().__format=""!==t?D[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const e=this.getWritable();return e.__textFormat=t,e}setTextStyle(t){const e=this.getWritable();return e.__textStyle=t,e}setIndent(t){return this.getWritable().__indent=t,this}splice(t,e,n){vn(this)&&r(324,this.__key,this.__type);const i=this.getChildrenSize(),o=this.getWritable();t+e<=i||r(226,String(t),String(e),String(i));const s=o.__key,l=[],c=[],a=this.getChildAtIndex(t+e);let u=null,d=i-e+n.length;if(0!==t)if(t===i)u=this.getLastChild();else{const e=this.getChildAtIndex(t);null!==e&&(u=e.getPreviousSibling())}if(e>0){let t=null===u?this.getFirstChild():u.getNextSibling();for(let n=0;n<e;n++){null===t&&r(100);const e=t.getNextSibling(),n=t.__key;ji(t.getWritable()),c.push(n),t=e}}let f=u;for(const t of n){null!==f&&t.is(f)&&(u=f=f.getPreviousSibling());const e=t.getWritable();e.__parent===s&&d--,ji(e);const n=t.__key;if(null===f)o.__first=n,e.__prev=null;else{const t=f.getWritable();t.__next=n,e.__prev=t.__key}t.__key===s&&r(76),e.__parent=s,l.push(n),f=t}if(t+e===i)null!==f&&(f.getWritable().__next=null,o.__last=f.__key);else if(null!==a){const t=a.getWritable();if(null!==f){const e=f.getWritable();t.__prev=f.__key,e.__next=a.__key}else t.__prev=null}if(o.__size=d,c.length){const t=vr();if(nr(t)){const e=new Set(c),n=new Set(l),{anchor:r,focus:i}=t;ri(r,e,n)&&br(r,r.getNode(),this,u,a),ri(i,e,n)&&br(i,i.getNode(),this,u,a),0!==d||this.canBeEmpty()||Ao(this)||this.remove()}}return o}getDOMSlot(t){return new Qr(t)}exportDOM(t){const{element:e}=super.exportDOM(t);if(Bo(e)){const t=this.getIndent();t>0&&(e.style.paddingInlineStart=40*t+"px");const n=this.getDirection();n&&(e.dir=n)}return{element:e}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},e=this.getTextFormat(),n=this.getTextStyle();return 0===e&&""===n||Ao(this)||this.getChildren().some(qn)||(0!==e&&(t.textFormat=e),""!==n&&(t.textStyle=n)),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,e){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,e,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,e){const n=this.getDOMSlot(t);let r=n.getFirstChild();for(let t=this.getFirstChild();t;t=t.getNextSibling()){const i=e.getElementByKey(t.getKey());null!==i&&(null==r?(n.insertChild(i),r=i):r!==i&&n.replaceChild(i,r),r=r.nextSibling)}}}function ni(t){return t instanceof ei}function ri(t,e,n){let r=t.getNode();for(;r;){const t=r.__key;if(e.has(t)&&!n.has(t))return!0;r=r.getParent()}return!1}class ii extends xn{decorate(t,e){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function oi(t){return t instanceof ii}class si extends ei{__cachedText;static getType(){return"root"}static clone(){return new si}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){r(51)}getTextContent(){const t=this.__cachedText;return!Ir()&&0!==Jr()._dirtyType||null===t?super.getTextContent():t}remove(){r(52)}replace(t){r(53)}insertBefore(t){r(54)}insertAfter(t){r(55)}updateDOM(t,e){return!1}splice(t,e,n){for(const t of n)ni(t)||oi(t)||r(282);return super.splice(t,e,n)}static importJSON(t){return to().updateFromJSON(t)}collapseAtStart(){return!0}}function li(t){return t instanceof si}function ci(t){return new fi(new Map(t._nodeMap))}function ai(){return new fi(new Map([["root",new si]]))}function ui(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&r(130,n.name),ni(t)){const i=e.children;Array.isArray(i)||r(59,n.name);const o=t.getChildren();for(let t=0;t<o.length;t++){const e=ui(o[t]);i.push(e)}}return e}function di(t){return t instanceof fi}class fi{_nodeMap;_selection;_flushSync;_readOnly;constructor(t,e){this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(t,e){return $r(e&&e.editor||null,this,t)}clone(t){const e=new fi(this._nodeMap,void 0===t?this._selection:t);return e._readOnly=!0,e}toJSON(){return $r(null,this,()=>({root:ui(to())}))}}class hi extends ei{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class gi extends ei{static getType(){return"paragraph"}static clone(t){return new gi(t.__key)}createDOM(t){const e=document.createElement("p"),n=vo(t.theme,"paragraph");return void 0!==n&&e.classList.add(...n),e}updateDOM(t,e,n){return!1}static importDOM(){return{p:t=>({conversion:pi,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if(Bo(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();t&&(e.style.textAlign=t)}return{element:e}}static importJSON(t){return mi().updateFromJSON(t)}exportJSON(){const t=super.exportJSON();if(void 0===t.textFormat||void 0===t.textStyle){const e=this.getChildren().find(qn);e?(t.textFormat=e.getFormat(),t.textStyle=e.getStyle()):(t.textFormat=this.getTextFormat(),t.textStyle=this.getTextStyle())}return t}insertNewAfter(t,e){const n=mi();n.setTextFormat(t.format),n.setTextStyle(t.style);const r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,e),n}collapseAtStart(){const t=this.getChildren();if(0===t.length||qn(t[0])&&""===t[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function pi(t){const e=mi();return t.style&&(e.setFormat(t.style.textAlign),Yo(t,e)),{node:e}}function mi(){return Do(new gi)}function _i(t){return t instanceof gi}const yi=0,vi=1,xi=4;function Si(t,e,n,r){const i=t._keyToDOMMap;i.clear(),t._editorState=ai(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const o=t._observer;null!==o&&(o.disconnect(),t._observer=null),null!==e&&(e.textContent=""),null!==n&&(n.textContent="",i.set("root",n))}function Ci(t){const e=new Set,n=new Set;let r=t;for(;r;){const{ownNodeConfig:t}=ts(r),i=r.transform;if(!n.has(i)){n.add(i);const t=r.transform();t&&e.add(t)}if(t){const n=t.$transform;n&&e.add(n),r=t.extends}else{const t=Object.getPrototypeOf(r);r=t.prototype instanceof xn&&t!==xn?t:void 0}}return e}function bi(t){const e=t||{},n=Pr,r=e.theme||{},i=void 0===t?n:e.parentEditor||null,o=e.disableEvents||!1,s=ai(),l=e.namespace||(null!==i?i._config.namespace:so()),c=e.editorState,a=[si,In,kn,Vn,gi,hi,...e.nodes||[]],{onError:u,html:d}=e,f=void 0===e.editable||e.editable;let h;if(void 0===t&&null!==n)h=n._nodes;else{h=new Map;for(let t=0;t<a.length;t++){let e=a[t],n=null,r=null;if("function"!=typeof e){const t=e;e=t.replace,n=t.with,r=t.withKlass||null}ts(e);const i=e.getType(),o=Ci(e);h.set(i,{exportDOM:d&&d.export?d.export.get(e):void 0,klass:e,replace:n,replaceWithKlass:r,sharedNodeState:H(a[t]),transforms:o})}}const g=new Ti(s,i,h,{disableEvents:o,namespace:l,theme:r},u||console.error,function(t,e){const n=new Map,r=new Set,i=t=>{Object.keys(t).forEach(e=>{let r=n.get(e);void 0===r&&(r=[],n.set(e,r)),r.push(t[e])})};return t.forEach(t=>{const e=t.klass.importDOM;if(null==e||r.has(e))return;r.add(e);const n=e.call(t.klass);null!==n&&i(n)}),e&&i(e),n}(h,d?d.import:void 0),f,t);return void 0!==c&&(g._pendingEditorState=c,g._dirtyType=2),function(t){t.registerCommand(Ut,nn,yi),t.registerCommand(jt,rn,yi),t.registerCommand(Zt,on,yi),t.registerCommand(qt,sn,yi),t.registerCommand(ie,cn,yi)}(g),g}class Ti{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(t,e,n,r,i,o,s,l){this._createEditorArgs=l,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=so(),this._onError=i,this._htmlConversions=o,this._editable=s,this._headless=null!==e&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(t){const e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){const e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){const e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){const e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){const e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,n){void 0===n&&r(35);const i=this._commands;i.has(t)||i.set(t,[new Set,new Set,new Set,new Set,new Set]);const o=i.get(t);void 0===o&&r(36,String(t));const s=o[n];return s.add(e),()=>{s.delete(e),o.every(t=>0===t.size)&&i.delete(t)}}registerMutationListener(t,e,n){const r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,i=this._listeners.mutation;let o=i.get(e);void 0===o&&(o=new Set,i.set(e,o)),o.add(r);const s=n&&n.skipInitialization;return void 0!==s&&s||this.initializeMutationListener(e,r),()=>{o.delete(r),0===o.size&&i.delete(e)}}getRegisteredNode(t){const e=this._nodes.get(t.getType());return void 0===e&&r(37,t.name),e}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,e){const n=this._editorState,r=Vo(n).get(e.getType());if(!r)return;const i=new Map;for(const t of r.keys())i.set(t,"created");i.size>0&&t(i,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,e){const n=this.getRegisteredNode(t);return n.transforms.add(e),n}registerNodeTransform(t,e){const n=this.registerNodeTransformToKlass(t,e),r=[n],i=n.replaceWithKlass;if(null!=i){const t=this.registerNodeTransformToKlass(i,e);r.push(t)}return function(t,e){const n=Vo(t.getEditorState()),r=[];for(const t of e){const e=n.get(t);e&&r.push(e)}0!==r.length&&t.update(()=>{for(const t of r)for(const e of t.keys()){const t=Vi(e);t&&t.markDirty()}},null===t._pendingEditorState?{tag:bn}:void 0)}(this,r.map(t=>t.klass.getType())),()=>{r.forEach(t=>t.transforms.delete(e))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return To(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const e=this._rootElement;if(t!==e){const n=vo(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=t,Si(this,e,t,r),null!==e&&(this._config.disableEvents||gn(e),null!=n&&e.classList.remove(...n)),null!==t){const e=Mo(t),r=t.style;r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=e,this._dirtyType=2,V(this),this._updateTags.add(bn),Vr(this),this._config.disableEvents||function(t,e){const n=t.ownerDocument;We.set(t,n);const r=ze.get(n)??0;r<1&&n.addEventListener("selectionchange",dn),ze.set(n,r+1),t.__lexicalEditor=e;const i=an(t);for(let n=0;n<Ie.length;n++){const[r,o]=Ie[n],s="function"==typeof o?t=>{hn(t)||(fn(t),(e.isEditable()||"click"===r)&&o(t,e))}:t=>{if(hn(t))return;fn(t);const n=e.isEditable();switch(r){case"cut":return n&&To(e,Ne,t);case"copy":return To(e,ke,t);case"paste":return n&&To(e,Yt,t);case"dragstart":return n&&To(e,Ce,t);case"dragover":return n&&To(e,be,t);case"dragend":return n&&To(e,Te,t);case"focus":return n&&To(e,Ae,t);case"blur":return n&&To(e,De,t);case"drop":return n&&To(e,xe,t)}};t.addEventListener(r,s),i.push(()=>{t.removeEventListener(r,s)})}}(t,this),null!=n&&t.classList.add(...n)}else this._window=null,this._updateTags.add(bn),Vr(this);Hr("root",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&r(38);let n=t;n._readOnly&&(n=ci(t),n._selection=t._selection?t._selection.clone():null),$(this);const i=this._pendingEditorState,o=this._updateTags,s=void 0!==e?e.tag:null;null===i||i.isEmpty()||(null!=s&&o.add(s),Vr(this)),this._pendingEditorState=n,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&o.add(s),this._updating||Vr(this)}parseEditorState(t,e){return function(t,e,n){const r=ai(),i=Mr,o=Ar,s=Pr,l=e._dirtyElements,c=e._dirtyLeaves,a=e._cloneNotNeeded,u=e._dirtyType;e._dirtyElements=new Map,e._dirtyLeaves=new Set,e._cloneNotNeeded=new Set,e._dirtyType=0,Mr=r,Ar=!1,Pr=e,Ni(null);try{const i=e._nodes;qr(t.root,i),n&&n(),r._readOnly=!0}catch(t){t instanceof Error&&e._onError(t)}finally{e._dirtyElements=l,e._dirtyLeaves=c,e._cloneNotNeeded=a,e._dirtyType=u,Mr=i,Ar=o,Pr=s}return r}("string"==typeof t?JSON.parse(t):t,this,e)}read(t){return Vr(this),this.getEditorState().read(t,{editor:this})}update(t,e){!function(t,e,n){t._updating?t._updates.push([e,n]):Yr(t,e,n)}(this,t,e)}focus(t,e={}){const n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),Xr(this,()=>{const r=vr(),i=to();null!==r?r.dirty||no(r.clone()):0!==i.getChildrenSize()&&("rootStart"===e.defaultSelection?i.selectStart():i.selectEnd()),Rr(),Jr()._updateTags.add("focus"),function(t){Rr(),Jr()._deferred.push(t)}(()=>{n.removeAttribute("autocapitalize"),t&&t()})}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;null!==t&&t.blur();const e=Ro(this._window);null!==e&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Hr("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}Ti.version="0.39.0+prod.esm";let ki=null;function Ni(t){ki=t}let Ei=1;function wi(t,e){const n=Oi(t,e);return void 0===n&&r(30,e),n}function Oi(t,e){return t._nodes.get(e)}const Mi="function"==typeof queueMicrotask?queueMicrotask:t=>{Promise.resolve().then(t)};function Pi(t){return oi(Yi(t))}function Ai(t){const e=document.activeElement;if(!Bo(e))return!1;const n=e.nodeName;return oi(Yi(t))&&("INPUT"===n||"TEXTAREA"===n||"true"===e.contentEditable&&null==Ii(e))}function Di(t,e,n){const r=t.getRootElement();try{return null!==r&&r.contains(e)&&r.contains(n)&&null!==e&&!Ai(e)&&Fi(e)===t}catch(t){return!1}}function Li(t){return t instanceof Ti}function Fi(t){let e=t;for(;null!=e;){const t=Ii(e);if(Li(t))return t;e=Eo(e)}return null}function Ii(t){return t?t.__lexicalEditor:null}function Ri(t){return Gn(t)||t.isToken()}function Ki(t){return Ri(t)||t.isSegmented()}function Bi(t){return Jo(t)&&3===t.nodeType}function Ji(t){return Jo(t)&&9===t.nodeType}function Wi(t){let e=t;for(;null!=e;){if(Bi(e))return e;e=e.firstChild}return null}function zi(t,e,n){const r=P[e];if(null!==n&&(t&r)===(n&r))return t;let i=t^r;return"subscript"===e?i&=~P.superscript:"superscript"===e?i&=~P.subscript:"lowercase"===e?(i&=~P.uppercase,i&=~P.capitalize):"uppercase"===e?(i&=~P.lowercase,i&=~P.capitalize):"capitalize"===e&&(i&=~P.lowercase,i&=~P.uppercase),i}function Ui(t){return qn(t)||wn(t)||oi(t)}function ji(t){const e=t.getParent();if(null!==e){const n=t.getWritable(),r=e.getWritable(),i=t.getPreviousSibling(),o=t.getNextSibling(),s=null!==o?o.__key:null,l=null!==i?i.__key:null,c=null!==i?i.getWritable():null,a=null!==o?o.getWritable():null;null===i&&(r.__first=s),null===o&&(r.__last=l),null!==c&&(c.__next=s),null!==a&&(a.__prev=l),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function Zi(t){Kr(),vn(t)&&r(323,t.__key,t.__type);const e=t.getLatest(),n=e.__parent,i=Br(),o=Jr(),s=i._nodeMap,l=o._dirtyElements;null!==n&&function(t,e,n){let r=t;for(;null!==r;){if(n.has(r))return;const t=e.get(r);if(void 0===t)break;n.set(r,!1),r=t.__parent}}(n,s,l);const c=e.__key;o._dirtyType=1,ni(t)?l.set(c,!0):o._dirtyLeaves.add(c)}function qi(t){Rr();const e=Jr(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,null!==n){const t=Vi(n);null!==t&&t.getWritable()}if(null!==t){const e=Vi(t);null!==e&&e.getWritable()}}}function $i(){return Ir()?null:Jr()._compositionKey}function Vi(t,e){const n=(e||Br())._nodeMap.get(t);return void 0===n?null:n}function Hi(t,e){const n=Gi(t,Jr());return void 0!==n?Vi(n,e):null}function Gi(t,e){return t[`__lexicalKey_${e._key}`]}function Yi(t,e){let n=t;for(;null!=n;){const t=Hi(n,e);if(null!==t)return t;n=Eo(n)}return null}function Xi(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function Qi(t){return t.read(()=>to().getTextContent())}function to(){return eo(Br())}function eo(t){return t._nodeMap.get("root")}function no(t){Rr();const e=Br();null!==t&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function ro(t){const e=Jr(),n=function(t,e){let n=t;for(;null!=n;){const t=Gi(n,e);if(void 0!==t)return t;n=Eo(n)}return null}(t,e);return null===n?t===e.getRootElement()?Vi("root"):null:Vi(n)}function io(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function oo(t){const e=[];let n=t;for(;null!==n;)e.push(n),n=n._parentEditor;return e}function so(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function lo(t){return Bi(t)?t.nodeValue:null}function co(t,e,n){const r=Ro(Po(e));if(null===r)return;const i=r.anchorNode;let{anchorOffset:o,focusOffset:s}=r;if(null!==i){let e=lo(i);const r=Yi(i);if(null!==e&&qn(r)){if(e===N&&n){const t=n.length;e=n,o=t,s=t}null!==e&&ao(r,e,o,s,t)}}}function ao(t,e,n,r,i){let o=t;if(o.isAttached()&&(i||!o.isDirty())){const s=o.isComposing();let l=e;(s||i)&&e[e.length-1]===N&&(l=e.slice(0,-1));const c=o.getTextContent();if(i||l!==c){if(""===l){if(qi(null),u||d||p)o.remove();else{const t=Jr();setTimeout(()=>{t.update(()=>{o.isAttached()&&o.remove()})},20)}return}const e=o.getParent(),i=xr(),c=o.getTextContentSize(),a=$i(),f=o.getKey();if(o.isToken()||null!==a&&f===a&&!s||nr(i)&&(null!==e&&!e.canInsertTextBefore()&&0===i.anchor.offset||i.anchor.key===t.__key&&0===i.anchor.offset&&!o.canInsertTextBefore()&&!s||i.focus.key===t.__key&&i.focus.offset===c&&!o.canInsertTextAfter()&&!s))return void o.markDirty();const h=vr();if(!nr(h)||null===n||null===r)return void uo(o,l,h);if(h.setTextNodeRange(o,n,o,r),o.isSegmented()){const t=Zn(o.getTextContent());o.replace(t),o=t}uo(o,l,h)}}}function uo(t,e,n){if(t.setTextContent(e),nr(n)){const e=t.getKey();for(const r of["anchor","focus"]){const i=n[r];"text"===i.type&&i.key===e&&(i.offset=vs(t,i.offset,"clamp"))}}}function fo(t,e,n){const r=e[n]||!1;return"any"===r||r===t[n]}function ho(t,e,n){return function(t,e){return fo(t,e,"altKey")&&fo(t,e,"ctrlKey")&&fo(t,e,"shiftKey")&&fo(t,e,"metaKey")}(t,n)&&t.key.toLowerCase()===e.toLowerCase()}const go={ctrlKey:!l,metaKey:l},po={altKey:l,ctrlKey:!l};function mo(t){return"Backspace"===t.key}function _o(t){return ho(t,"a",go)}function yo(t){const e=to();if(nr(t)){const e=t.anchor,n=t.focus,r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(r.getKey(),0,"element"),n.set(r.getKey(),r.getChildrenSize(),"element"),ot(t),t}{const t=e.select(0,e.getChildrenSize());return no(ot(t)),t}}function vo(t,e){void 0===t.__lexicalClassNameCache&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,r=n[e];if(void 0!==r)return r;const i=t[e];if("string"==typeof i){const t=m(i);return n[e]=t,t}return i}function xo(t,e,n,i,o){if(0===n.size)return;const s=i.__type,l=i.__key,c=e.get(s);void 0===c&&r(33,s);const a=c.klass;let u=t.get(a);void 0===u&&(u=new Map,t.set(a,u));const d=u.get(l),f="destroyed"===d&&"created"===o;(void 0===d||f)&&u.set(l,f?"updated":o)}function So(t,e,n){const r=t.getParent();let i=n,o=t;return null!==r&&(e&&0===n?(i=o.getIndexWithinParent(),o=r):e||n!==o.getChildrenSize()||(i=o.getIndexWithinParent()+1,o=r)),o.getChildAtIndex(e?i-1:i)}function Co(t,e){const n=t.offset;if("element"===t.type)return So(t.getNode(),e,n);{const r=t.getNode();if(e&&0===n||!e&&n===r.getTextContentSize()){const t=e?r.getPreviousSibling():r.getNextSibling();return null===t?So(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):t}}return null}function bo(t){const e=Po(t).event,n=e&&e.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function To(t,e,n){return function(t,e,n){const r=oo(t);for(let i=4;i>=0;i--)for(let o=0;o<r.length;o++){const s=r[o],l=s._commands.get(e);if(void 0!==l){const e=l[i];if(void 0!==e){const r=Array.from(e),i=r.length;let o=!1;if(Xr(s,()=>{for(let e=0;e<i;e++)if(r[e](n,t))return void(o=!0)}),o)return o}}}return!1}(t,e,n)}function ko(t){return!li(t)&&!t.isLastChild()&&!t.isInline()}function No(t,e){const n=t._keyToDOMMap.get(e);return void 0===n&&r(75,e),n}function Eo(t){const e=t.assignedSlot||t.parentElement;return Wo(e)?e.host:e}function wo(t){return Ji(t)?t:Bo(t)?t.ownerDocument:null}function Oo(t,e){let n=t.getParent();for(;null!==n;){if(n.is(e))return!0;n=n.getParent()}return!1}function Mo(t){const e=wo(t);return e?e.defaultView:null}function Po(t){const e=t._window;return null===e&&r(78),e}function Ao(t){return li(t)||ni(t)&&t.isShadowRoot()}function Do(t){const e=Jr(),n=t.getType(),i=Oi(e,n);void 0===i&&r(200,t.constructor.name,n);const{replace:o,replaceWithKlass:s}=i;if(null!==o){const e=o(t),i=e.constructor;return null!==s?e instanceof s||r(201,s.name,s.getType(),i.name,i.getType(),t.constructor.name,n):e instanceof t.constructor&&i!==t.constructor||r(202,i.name,i.getType(),t.constructor.name,n),e.__key===t.__key&&r(203,t.constructor.name,n,i.name,i.getType()),e}return t}function Lo(t,e){!li(t.getParent())||ni(e)||oi(e)||r(99)}function Fo(t){return(oi(t)||ni(t)&&!t.canBeEmpty())&&!t.isInline()}function Io(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=t.parentElement;null!==r&&r.removeChild(t)}function Ro(t){return o?(t||window).getSelection():null}function Ko(t){return Bo(t)&&"A"===t.tagName}function Bo(t){return Jo(t)&&1===t.nodeType}function Jo(t){return"object"==typeof t&&null!==t&&"nodeType"in t&&"number"==typeof t.nodeType}function Wo(t){return Jo(t)&&11===t.nodeType}function zo(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==t.nodeName.match(e)}function Uo(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==t.nodeName.match(e)}function jo(t){if(oi(t)&&!t.isInline())return!0;if(!ni(t)||Ao(t))return!1;const e=t.getFirstChild(),n=null===e||wn(e)||qn(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n}function Zo(){return Jr()}const qo=new WeakMap,$o=new Map;function Vo(t){if(!t._readOnly&&t.isEmpty())return $o;t._readOnly||r(192);let e=qo.get(t);return e||(e=function(t){const e=new Map;for(const[n,r]of t._nodeMap){const t=r.__type;let i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)}return e}(t),qo.set(t,e)),e}function Ho(t){const e=t.constructor.clone(t);return e.afterCloneFrom(t),e}function Go(t){return(e=Ho(t))[yn]=!0,e;var e}function Yo(t,e){const n=parseInt(t.style.paddingInlineStart,10)||0,r=Math.round(n/40);e.setIndent(r)}function Xo(t){return!0===t.__lexicalUnmanaged}function Qo(t,e){return function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,e)&&t[e]!==xn[e]}function ts(t){const e=R in t.prototype?t.prototype[R]():void 0,n=function(t){if(!(t===xn||t.prototype instanceof xn)){let e="<unknown>",n="<unknown>";try{e=t.getType()}catch(t){}try{Ti.version&&(n=JSON.parse(Ti.version))}catch(t){}r(290,t.name,e,n)}return t===ii||t===ei||t===xn}(t),i=!n&&Qo(t,"getType")?t.getType():void 0;let o,s=i;if(e)if(i)o=e[i];else for(const[t,n]of Object.entries(e))s=t,o=n;if(!n&&s&&(Qo(t,"getType")||(t.getType=()=>s),Qo(t,"clone")||(t.clone=e=>(Ni(e),new t)),Qo(t,"importJSON")||(t.importJSON=o&&o.$importJSON||(e=>(new t).updateFromJSON(e))),!Qo(t,"importDOM")&&o)){const{importDOM:e}=o;e&&(t.importDOM=()=>e)}return{ownNodeConfig:o,ownNodeType:s}}function es(t){const e=Zo();return Rr(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(t)).klass)}const ns=(t,e)=>{let n=t;for(;null!=n&&!li(n);){if(e(n))return n;n=n.getParent()}return null},rs={next:"previous",previous:"next"};class is{origin;constructor(t){this.origin=t}[Symbol.iterator](){return Es({hasNext:fs,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return _s(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return _s(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,e){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(null===n?this.insert(t):n.replace(t,e)),this}splice(t,e,n="next"){const i=n===this.direction?e:Array.from(e).reverse();let o=this;const s=this.getParentAtCaret(),l=new Map;for(let e=o.getAdjacentCaret();null!==e&&l.size<t;e=e.getAdjacentCaret()){const t=e.origin.getWritable();l.set(t.getKey(),t)}for(const t of i){if(l.size>0){const e=o.getNodeAtCaret();if(e)if(l.delete(e.getKey()),l.delete(t.getKey()),e.is(t)||o.origin.is(t));else{const n=t.getParent();n&&n.is(s)&&t.remove(),e.replace(t)}else null===e&&r(263,Array.from(l).join(" "))}else o.insert(t);o=_s(t,this.direction)}for(const t of l.values())t.remove();return this}}class os extends is{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Ss(t,this.direction)}getParentCaret(t="root"){return _s(cs(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=ls(this.direction);return _s(this.getNodeAtCaret(),t)||Ss(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof os&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const ss={root:li,shadowRoot:Ao};function ls(t){return rs[t]}function cs(t,e="root"){return ss[e](t)?null:t}class as extends is{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:_s(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return ni(this.origin)?Ss(this.origin,this.direction):null}getParentCaret(t="root"){return _s(cs(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=ls(this.direction);return _s(this.getNodeAtCaret(),t)||Ss(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof as&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof as||t instanceof us)&&this.direction===t.direction&&this.origin.is(t.origin)}}class us extends is{type="text";offset;constructor(t,e){super(t),this.offset=e}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ys(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return _s(cs(this.getParentAtCaret(),t),this.direction)}getFlipped(){return ys(this.origin,ls(this.direction),this.offset)}isSamePointCaret(t){return t instanceof us&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof as||t instanceof us)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return _s(this.origin,this.direction)}}function ds(t){return t instanceof us}function fs(t){return t instanceof as}function hs(t){return t instanceof os}const gs={next:class extends us{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends us{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},ps={next:class extends as{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends as{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},ms={next:class extends os{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends os{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function _s(t,e){return t?new ps[e](t):null}function ys(t,e,n){return t?new gs[e](t,vs(t,n)):null}function vs(t,e,n="error"){const r=t.getTextContentSize();let o="next"===e?r:"previous"===e?0:e;return(o<0||o>r)&&("clamp"!==n&&i(284,String(e),String(r),t.getKey()),o=o<0?0:r),o}function xs(t,e){return new Ts(t,e)}function Ss(t,e){return ni(t)?new ms[e](t):null}function Cs(t){return t&&function(t){return t&&t.getChildCaret()||t}(t.getAdjacentCaret())}class bs{type="node-caret-range";direction;anchor;focus;constructor(t,e,n){this.anchor=t,this.focus=e,this.direction=n}getLatest(){const t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new bs(t,e,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=t=>{const e=this[t].getLatest();return ds(e)?function(t,e){const{direction:n,origin:r}=t;return xs(t,vs(r,"focus"===e?ls(n):n)-t.offset)}(e,t):null},e=t("anchor"),n=t("focus");if(e&&n){const{caret:t}=e,{caret:r}=n;if(t.isSameNodeCaret(r))return[xs(t,r.offset-t.offset),null]}return[e,n]}iterNodeCarets(t="root"){const e=ds(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),r=ds(n),i=e=>e.isSameNodeCaret(n)?null:Cs(e)||e.getParentCaret(t);return Es({hasNext:t=>null!==t&&!(r&&n.isSameNodeCaret(t)),initial:e.isSameNodeCaret(n)?null:i(e),map:t=>t,step:i})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Ts{type="slice";caret;distance;constructor(t,e){this.caret=t,this.distance=e}getSliceIndices(){const{distance:t,caret:{offset:e}}=this,n=e+t;return n<e?[n,e]:[e,n]}getTextContent(){const[t,e]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,e)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:e}}=this,[n,r]=this.getSliceIndices(),i=t.getTextContent();return ys(t.setTextContent(i.slice(0,n)+i.slice(r)),e,n)}}function ks(t){return Ns(t,_s(to(),t.direction))}function Ns(t,e){return t.direction!==e.direction&&r(265),new bs(t,e,t.direction)}function Es(t){const{initial:e,hasNext:n,step:r,map:i}=t;let o=e;return{[Symbol.iterator](){return this},next(){if(!n(o))return{done:!0,value:void 0};const t={done:!1,value:i(o)};return o=r(o),t}}}function ws(t,e){const n=As(t.origin,e.origin);switch(null===n&&r(275,t.origin.getKey(),e.origin.getKey()),n.type){case"same":{const n="text"===t.type,r="text"===e.type;return n&&r?function(t,e){return Math.sign(t-e)}(t.offset,e.offset):t.type===e.type?0:n?-1:r?1:"child"===t.type?-1:1}case"ancestor":return"child"===t.type?-1:1;case"descendant":return"child"===e.type?1:-1;case"branch":return Os(n)}}function Os(t){const{a:e,b:n}=t,r=e.__key,i=n.__key;let o=e,s=n;for(;o&&s;o=o.getNextSibling(),s=s.getNextSibling()){if(o.__key===i)return-1;if(s.__key===r)return 1}return null===o?1:-1}function Ms(t,e){return e.is(t)}function Ps(t){return ni(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()]}function As(t,e){if(t.is(e))return{commonAncestor:t,type:"same"};const n=new Map;for(let[e,r]=Ps(t);e;r=e,e=e.getParent())n.set(e,r);for(let[i,o]=Ps(e);i;o=i,i=i.getParent()){const s=n.get(i);if(void 0!==s)return null===s?(Ms(t,i)||r(276),{commonAncestor:i,type:"ancestor"}):null===o?(Ms(e,i)||r(277),{commonAncestor:i,type:"descendant"}):((ni(s)||Ms(t,s))&&(ni(o)||Ms(e,o))&&i.is(s.getParent())&&i.is(o.getParent())||r(278),{a:s,b:o,commonAncestor:i,type:"branch"})}return null}function Ds(t,e){const{type:n,key:i,offset:o}=t,s=function(t){const e=Vi(t);return null===e&&r(63,t),e}(t.key);return"text"===n?(qn(s)||r(266,s.getType(),i),ys(s,e,o)):(ni(s)||r(267,s.getType(),i),function(t,e,n){let r=Ss(t,"next");for(let t=0;t<e;t++){const t=r.getAdjacentCaret();if(null===t)break;r=t}return Us(r,n)}(s,t.offset,e))}function Ls(t,e){const{origin:n,direction:i}=e,o="next"===i;ds(e)?t.set(n.getKey(),e.offset,"text"):fs(e)?qn(n)?t.set(n.getKey(),vs(n,i),"text"):t.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(o?1:0),"element"):(hs(e)&&ni(n)||r(268),t.set(n.getKey(),o?0:n.getChildrenSize(),"element"))}function Fs(t,e){Ls(t.anchor,e.anchor),Ls(t.focus,e.focus)}function Is(t){const{anchor:e,focus:n}=t,r=Ds(e,"next"),i=Ds(n,"next"),o=ws(r,i)<=0?"next":"previous";return Ns(Us(r,o),Us(i,o))}function Rs(t){const{direction:e,origin:n}=t,r=_s(n,ls(e)).getNodeAtCaret();return r?_s(r,e):Ss(n.getParentOrThrow(),e)}function Ks(t,e="root"){const n=[t];for(let r=hs(t)?t.getParentCaret(e):t.getSiblingCaret();null!==r;r=r.getParentCaret(e))n.push(Rs(r));return n}function Bs(t){return!!t&&t.origin.isAttached()}function Js(t,e="removeEmptySlices"){if(t.isCollapsed())return t;const n="root",i="next";let o=e;const s=js(t,i),l=Ks(s.anchor,n),c=Ks(s.focus.getFlipped(),n),a=new Set,u=[];for(const t of s.iterNodeCarets(n))if(hs(t))a.add(t.origin.getKey());else if(fs(t)){const{origin:e}=t;ni(e)&&!a.has(e.getKey())||u.push(e)}for(const t of u)t.remove();for(const t of s.getTextSlices()){if(!t)continue;const{origin:e}=t.caret,n=e.getTextContentSize(),r=Rs(_s(e,i)),s=e.getMode();if(Math.abs(t.distance)===n&&"removeEmptySlices"===o||"token"===s&&0!==t.distance)r.remove();else if(0!==t.distance){o="removeEmptySlices";let e=t.removeTextSlice();const n=t.caret.origin;if("segmented"===s){const t=e.origin,n=Zn(t.getTextContent()).setStyle(t.getStyle()).setFormat(t.getFormat());r.replaceOrInsert(n),e=ys(n,i,e.offset)}n.is(l[0].origin)&&(l[0]=e),n.is(c[0].origin)&&(c[0]=e.getFlipped())}}let d,f;for(const t of l)if(Bs(t)){d=Ws(t);break}for(const t of c)if(Bs(t)){f=Ws(t);break}const h=function(t,e,n){if(!t||!e)return null;const r=t.getParentAtCaret(),i=e.getParentAtCaret();if(!r||!i)return null;const o=r.getParents().reverse();o.push(r);const s=i.getParents().reverse();s.push(i);const l=Math.min(o.length,s.length);let c;for(c=0;c<l&&o[c]===s[c];c++);const a=(t,e)=>{let n;for(let r=c;r<t.length;r++){const i=t[r];if(Ao(i))return;!n&&e(i)&&(n=i)}return n},u=a(o,jo),d=u&&a(s,t=>n.has(t.getKey())&&jo(t));return u&&d?[u,d]:null}(d,f,a);if(h){const[t,e]=h;Ss(t,"previous").splice(0,e.getChildren()),e.remove()}const g=[d,f,...l,...c].find(Bs);if(g)return function(t){return Ns(t,t)}(Us(Ws(g),t.direction));r(269,JSON.stringify(l.map(t=>t.origin.__key)))}function Ws(t){const e=function(t){let e=t;for(;hs(e);){const t=Cs(e);if(!hs(t))break;e=t}return e}(t.getLatest()),{direction:n}=e;if(qn(e.origin))return ds(e)?e:ys(e.origin,n,n);const r=e.getAdjacentCaret();return fs(r)&&qn(r.origin)?ys(r.origin,n,ls(n)):e}function zs(t){return ds(t)&&t.offset!==vs(t.origin,t.direction)}function Us(t,e){return t.direction===e?t:t.getFlipped()}function js(t,e){return t.direction===e?t:Ns(Us(t.focus,e),Us(t.anchor,e))}function Zs(t){return t}function qs(...t){return t}function $s(t){return t}function Vs(t,e){if(!e||t===e)return t;for(const n in e)if(t[n]!==e[n])return{...t,...e};return t}},9325(t,e,n){n.d(e,{HY:()=>D,Js:()=>Z,YW:()=>C,cz:()=>j,q7:()=>W,uS:()=>U,v5:()=>E,x:()=>z});var r=n(8129),i=n(3105),o=n(8832),s=n(7639);function l(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const t of e)r.append("v",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function c(t){let e=1,n=t.getParent();for(;null!=n;){if(N(n)){const t=n.getParent();if(D(t)){e++,n=t.getParent();continue}l(40)}return e}return e}function a(t){let e=t.getParent();D(e)||l(40);let n=e;for(;null!==n;)n=n.getParent(),D(n)&&(e=n);return e}function u(t){let e=[];const n=t.getChildren().filter(N);for(let t=0;t<n.length;t++){const r=n[t],i=r.getFirstChild();D(i)?e=e.concat(u(i)):e.push(r)}return e}function d(t){return N(t)&&D(t.getFirstChild())}function f(t){return k().append(t)}function h(t,e){return N(t)&&(0===e.length||1===e.length&&t.is(e[0])&&0===t.getChildrenSize())}function g(t){const e=(0,o.vJq)();if(null!==e){let n=e.getNodes();if((0,o.I2P)(e)){const r=e.getStartEndPoints();null===r&&l(143);const[i]=r,s=i.getNode(),c=s.getParent();if((0,o.IqF)(s)){const t=s.getFirstChild();if(t)n=t.selectStart().getNodes();else{const t=(0,o.lJ7)();s.append(t),n=t.select().getNodes()}}else if(h(s,n)){const e=A(t);if((0,o.IqF)(c)){s.replace(e);const t=k();(0,o.ff4)(s)&&(t.setFormat(s.getFormatType()),t.setIndent(s.getIndent())),e.append(t)}else if(N(s)){const t=s.getParentOrThrow();p(e,t.getChildren()),t.replace(e)}return}}const r=new Set;for(let e=0;e<n.length;e++){const i=n[e];if((0,o.ff4)(i)&&i.isEmpty()&&!N(i)&&!r.has(i.getKey())){m(i,t);continue}let s=(0,o.jG6)(i)?i.getParent():N(i)&&i.isEmpty()?i:null;for(;null!=s;){const e=s.getKey();if(D(s)){if(!r.has(e)){const n=A(t);p(n,s.getChildren()),s.replace(n),r.add(e)}break}{const n=s.getParent();if((0,o.IqF)(n)&&!r.has(e)){r.add(e),m(s,t);break}s=n}}}}}function p(t,e){t.splice(t.getChildrenSize(),0,e)}function m(t,e){if(D(t))return t;const n=t.getPreviousSibling(),r=t.getNextSibling(),i=k();let o;if(p(i,t.getChildren()),D(n)&&e===n.getListType())n.append(i),D(r)&&e===r.getListType()&&(p(n,r.getChildren()),r.remove()),o=n;else if(D(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(i),o=r;else{const n=A(e);n.append(i),t.replace(n),o=n}return i.setFormat(t.getFormatType()),i.setIndent(t.getIndent()),t.remove(),o}function _(t,e){const n=t.getLastChild(),r=e.getFirstChild();n&&r&&d(n)&&d(r)&&(_(n.getFirstChild(),r.getFirstChild()),r.remove());const i=e.getChildren();i.length>0&&t.append(...i),e.remove()}function y(t){const e="check"!==t.getListType();let n=t.getStart();for(const r of t.getChildren())N(r)&&(r.getValue()!==n&&r.setValue(n),e&&null!=r.getLatest().__checked&&r.setChecked(void 0),D(r.getFirstChild())||n++)}function v(t){const e=new Set;if(d(t)||e.has(t.getKey()))return;const n=t.getParent(),r=t.getNextSibling(),i=t.getPreviousSibling();if(d(r)&&d(i)){const n=i.getFirstChild();if(D(n)){n.append(t);const i=r.getFirstChild();D(i)&&(p(n,i.getChildren()),r.remove(),e.add(r.getKey()))}}else if(d(r)){const e=r.getFirstChild();if(D(e)){const n=e.getFirstChild();null!==n&&n.insertBefore(t)}}else if(d(i)){const e=i.getFirstChild();D(e)&&e.append(t)}else if(D(n)){const e=k().setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle()),o=A(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());e.append(o),o.append(t),i?i.insertAfter(e):r?r.insertBefore(e):n.append(e)}}function x(t){if(d(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(D(n?n.getParent():void 0)&&N(n)&&D(e)){const r=e?e.getFirstChild():void 0,i=e?e.getLastChild():void 0;if(t.is(r))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(i))n.insertAfter(t),e.isEmpty()&&n.remove();else{const r=e.getListType(),i=k(),o=A(r);i.append(o),t.getPreviousSiblings().forEach(t=>o.append(t));const s=k(),l=A(r);s.append(l),p(l,t.getNextSiblings()),n.insertBefore(i),n.insertAfter(s),n.replace(t)}}}function S(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}class C extends o.fGB{__value;__checked;$config(){return this.config("listitem",{$transform:t=>{if(null==t.__checked)return;const e=t.getParent();D(e)&&"check"!==e.getListType()&&null!=t.getChecked()&&t.setChecked(void 0)},extends:o.fGB,importDOM:(0,o.kBm)({li:()=>({conversion:b,priority:0})})})}constructor(t=1,e=void 0,n){super(n),this.__value=void 0===t?1:t,this.__checked=e}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const e=document.createElement("li");return this.updateListItemDOM(null,e,t),e}updateListItemDOM(t,e,n){!function(t,e,n){const r=e.getParent();!D(r)||"check"!==r.getListType()||D(e.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),n&&e.__checked===n.__checked||t.setAttribute("aria-checked",e.getChecked()?"true":"false"))}(e,this,t),e.value=this.__value,function(t,e,n){const r=[],o=[],s=e.list,l=s?s.listitem:void 0;let c;if(s&&s.nested&&(c=s.nested.listitem),void 0!==l&&r.push(...S(l)),s){const t=n.getParent(),e=D(t)&&"check"===t.getListType(),i=n.getChecked();e&&!i||o.push(s.listitemUnchecked),e&&i||o.push(s.listitemChecked),e&&r.push(i?s.listitemChecked:s.listitemUnchecked)}if(void 0!==c){const t=S(c);n.getChildren().some(t=>D(t))?r.push(...t):o.push(...t)}o.length>0&&(0,i.HE)(t,...o),r.length>0&&(0,i.ZB)(t,...r)}(e,n.theme,this);const r=t?t.__style:"",o=this.__style;r!==o&&(""===o?e.removeAttribute("style"):e.style.cssText=o),function(t,e,n){const r=(0,s.Wh)(e.__textStyle);for(const e in r)t.style.setProperty(`--listitem-marker-${e}`,r[e]);if(n)for(const e in(0,s.Wh)(n.__textStyle))e in r||t.style.removeProperty(`--listitem-marker-${e}`)}(e,this,t)}updateDOM(t,e,n){const r=e;return this.updateListItemDOM(t,r,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const e=this.createDOM(t._config),n=this.getFormatType();n&&(e.style.textAlign=n);const r=this.getDirection();return r&&(e.dir=r),{element:e}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let e=0;e<t.length;e++){const n=t[e];if((0,o.ff4)(n)&&this.canMergeWith(n)){const t=n.getChildren();this.append(...t),n.remove()}else super.append(n)}return this}replace(t,e){if(N(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!D(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const e=A(n.getListType());let r=this.getNextSibling();for(;r;){const t=r;r=r.getNextSibling(),e.append(t)}n.insertAfter(t),t.insertAfter(e)}return e&&((0,o.ff4)(t)||l(139),this.getChildren().forEach(e=>{t.append(e)})),this.remove(),0===n.getChildrenSize()&&n.remove(),t}insertAfter(t,e=!0){const n=this.getParentOrThrow();if(D(n)||l(39),N(t))return super.insertAfter(t,e);const r=this.getNextSiblings();if(n.insertAfter(t,e),0!==r.length){const i=A(n.getListType());r.forEach(t=>i.append(t)),t.insertAfter(i,e)}return t}remove(t){const e=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),e&&n&&d(e)&&d(n)&&(_(e.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,e=!0){const n=k().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,e),n}collapseAtStart(t){const e=(0,o.lJ7)();this.getChildren().forEach(t=>e.append(t));const n=this.getParentOrThrow(),r=n.getParentOrThrow(),i=N(r);if(1===n.getChildrenSize())if(i)n.remove(),r.select();else{n.insertBefore(e),n.remove();const r=t.anchor,i=t.focus,o=e.getKey();"element"===r.type&&r.getNode().is(this)&&r.set(o,r.offset,"element"),"element"===i.type&&i.getNode().is(this)&&i.set(o,i.offset,"element")}else n.insertBefore(e),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const e=this.getWritable();return e.__value=t,e}getChecked(){const t=this.getLatest();let e;const n=this.getParent();return D(n)&&(e=n.getListType()),"check"===e?Boolean(t.__checked):void 0}setChecked(t){const e=this.getWritable();return e.__checked=t,e}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(null===t||!this.isAttached())return this.getLatest().__indent;let e=t.getParentOrThrow(),n=0;for(;N(e);)e=e.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){"number"!=typeof t&&l(117),(t=Math.floor(t))>=0||l(199);let e=this.getIndent();for(;e!==t;)e<t?(v(this),e++):(x(this),e--);return this}canInsertAfter(t){return N(t)}canReplaceWith(t){return N(t)}canMergeWith(t){return N(t)||(0,o.bSg)(t)}extractWithChild(t,e){if(!(0,o.I2P)(e))return!1;const n=e.anchor.getNode(),r=e.focus.getNode();return this.isParentOf(n)&&this.isParentOf(r)&&this.getTextContent().length===e.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return A("bullet")}canMergeWhenEmpty(){return!0}}function b(t){if(t.classList.contains("task-list-item"))for(const e of t.children)if("INPUT"===e.tagName)return T(e);if(t.classList.contains("joplin-checkbox"))for(const e of t.children)if(e.classList.contains("checkbox-wrapper")&&e.children.length>0&&"INPUT"===e.children[0].tagName)return T(e.children[0]);const e=t.getAttribute("aria-checked");return{node:k("true"===e||"false"!==e&&void 0)}}function T(t){return"checkbox"!==t.getAttribute("type")?{node:null}:{node:k(t.hasAttribute("checked"))}}function k(t){return(0,o.pTq)(new C(void 0,t))}function N(t){return t instanceof C}class E extends o.fGB{__tag;__start;__listType;$config(){return this.config("list",{$transform:t=>{!function(t){const e=t.getNextSibling();D(e)&&t.getListType()===e.getListType()&&_(t,e)}(t),y(t)},extends:o.fGB,importDOM:(0,o.kBm)({ol:()=>({conversion:M,priority:0}),ul:()=>({conversion:M,priority:0})})})}constructor(t="number",e=1,n){super(n);const r=P[t]||t;this.__listType=r,this.__tag="number"===r?"ol":"ul",this.__start=e}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const e=this.getWritable();return e.__listType=t,e.__tag="number"===t?"ol":"ul",e}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const e=this.getWritable();return e.__start=t,e}createDOM(t,e){const n=this.__tag,r=document.createElement(n);return 1!==this.__start&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,w(r,t.theme,this),r}updateDOM(t,e,n){return t.__tag!==this.__tag||t.__listType!==this.__listType||(w(e,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const e=this.createDOM(t._config,t);return(0,o.sby)(e)&&(1!==this.__start&&e.setAttribute("start",String(this.__start)),"check"===this.__listType&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,e,n){let r=n;for(let t=0;t<n.length;t++){const e=n[t];N(e)||(r===n&&(r=[...n]),r[t]=k().append(!(0,o.ff4)(e)||D(e)||e.isInline()?e:(0,o.sTu)(e.getTextContent())))}return super.splice(t,e,r)}extractWithChild(t){return N(t)}}function w(t,e,n){const r=[],o=[],s=e.list;if(void 0!==s){const t=s[`${n.__tag}Depth`]||[],e=c(n)-1,i=e%t.length,l=t[i],a=s[n.__tag];let u;const d=s.nested,f=s.checklist;if(void 0!==d&&d.list&&(u=d.list),void 0!==a&&r.push(a),void 0!==f&&"check"===n.__listType&&r.push(f),void 0!==l){r.push(...S(l));for(let e=0;e<t.length;e++)e!==i&&o.push(n.__tag+e)}if(void 0!==u){const t=S(u);e>1?r.push(...t):o.push(...t)}}o.length>0&&(0,i.HE)(t,...o),r.length>0&&(0,i.ZB)(t,...r)}function O(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(N(r)){e.push(r);const t=r.getChildren();t.length>1&&t.forEach(t=>{D(t)&&e.push(f(t))})}else e.push(f(r))}return e}function M(t){const e=t.nodeName.toLowerCase();let n=null;return"ol"===e?n=A("number",t.start):"ul"===e&&(n=function(t){if("check"===t.getAttribute("__lexicallisttype")||t.classList.contains("contains-task-list")||"1"===t.getAttribute("data-is-checklist"))return!0;for(const e of t.childNodes)if((0,o.sby)(e)&&e.hasAttribute("aria-checked"))return!0;return!1}(t)?A("check"):A("bullet")),{after:O,node:n}}const P={ol:"number",ul:"bullet"};function A(t="number",e=1){return(0,o.pTq)(new E(t,e))}function D(t){return t instanceof E}const L=(0,o.guI)("INSERT_CHECK_LIST_COMMAND");function F(t,e){const n=t.target;if(!(0,o.sby)(n))return;const r=n.firstChild;if((0,o.sby)(r)&&("UL"===r.tagName||"OL"===r.tagName))return;const s=n.parentNode;if(!s||"check"!==s.__lexicalListType)return;const l=n.getBoundingClientRect(),c=(0,i.OV)(n),a=t.clientX/c,u=window.getComputedStyle?window.getComputedStyle(n,"::before"):{width:"0px"},d=parseFloat(u.width),f="touch"===t.pointerType?32:0;("rtl"===n.dir?a<l.right+f&&a>l.right-d-f:a>l.left-f&&a<l.left+d+f)&&e()}function I(t){F(t,()=>{if((0,o.sby)(t.target)){const e=t.target,n=(0,o.scG)(e);null!=n&&n.isEditable()&&n.update(()=>{const t=(0,o.xL4)(e);N(t)&&(e.focus(),t.toggleChecked())})}})}function R(t){F(t,()=>{t.preventDefault()})}function K(){const t=document.activeElement;return(0,o.sby)(t)&&"LI"===t.tagName&&null!=t.parentNode&&"check"===t.parentNode.__lexicalListType?t:null}function B(t,e,n){const r=K();return null!=r&&e.update(()=>{const i=(0,o.xL4)(r);if(!N(i))return;const s=function(t,e){let n=e?t.getPreviousSibling():t.getNextSibling(),r=t;for(;null==n&&N(r);)r=r.getParentOrThrow().getParent(),null!=r&&(n=e?r.getPreviousSibling():r.getNextSibling());for(;N(n);){const t=e?n.getLastChild():n.getFirstChild();if(!D(t))return n;n=e?t.getLastChild():t.getFirstChild()}return null}(i,n);if(null!=s){s.selectStart();const n=e.getElementByKey(s.__key);null!=n&&(t.preventDefault(),setTimeout(()=>{n.focus()},0))}}),!1}const J=(0,o.guI)("UPDATE_LIST_START_COMMAND"),W=(0,o.guI)("INSERT_UNORDERED_LIST_COMMAND"),z=(0,o.guI)("INSERT_ORDERED_LIST_COMMAND"),U=(0,o.guI)("REMOVE_LIST_COMMAND");function j(t){return(0,i.Sd)(t.registerCommand(z,()=>(g("number"),!0),o.AcJ),t.registerCommand(J,t=>{const{listNodeKey:e,newStart:n}=t,r=(0,o.nsf)(e);return!!D(r)&&("number"===r.getListType()&&(r.setStart(n),y(r)),!0)},o.AcJ),t.registerCommand(W,()=>(g("bullet"),!0),o.AcJ),t.registerCommand(U,()=>(function(){const t=(0,o.vJq)();if((0,o.I2P)(t)){const e=new Set,n=t.getNodes(),r=t.anchor.getNode();if(h(r,n))e.add(a(r));else for(let t=0;t<n.length;t++){const r=n[t];if((0,o.jG6)(r)){const t=(0,i.eu)(r,C);null!=t&&e.add(a(t))}}for(const n of e){let e=n;const r=u(n);for(const n of r){const r=(0,o.lJ7)().setTextStyle(t.style).setTextFormat(t.format);p(r,n.getChildren()),e.insertAfter(r),e=r,n.__key===t.anchor.key&&(0,o.wp6)(t.anchor,(0,o.lSZ)((0,o.uwZ)(r,"next"))),n.__key===t.focus.key&&(0,o.wp6)(t.focus,(0,o.lSZ)((0,o.uwZ)(r,"next"))),n.remove()}n.remove()}}}(),!0),o.AcJ),t.registerCommand(o.XKQ,()=>function(){const t=(0,o.vJq)();if(!(0,o.I2P)(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!N(e)||0!==e.getChildrenSize())return!1;const n=a(e),r=e.getParent();D(r)||l(40);const i=r.getParent();let s;if((0,o.IqF)(i))s=(0,o.lJ7)(),n.insertAfter(s);else{if(!N(i))return!1;s=k(),i.insertAfter(s)}s.setTextStyle(t.style).setTextFormat(t.format).select();const c=e.getNextSiblings();if(c.length>0){const t=A(r.getListType());if(N(s)){const e=k();e.append(t),s.insertAfter(e)}else s.insertAfter(t);t.append(...c)}return function(t){let e=t;for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){const t=e.getParent();if(null==t||!N(t)&&!D(t))break;e=t}e.remove()}(e),!0}(),o.AcJ),t.registerNodeTransform(C,t=>{const e=t.getFirstChild();if(e){if((0,o.kFe)(e)){const n=e.getStyle(),r=e.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==r&&t.setTextFormat(r)}}else{const e=(0,o.vJq)();(0,o.I2P)(e)&&(e.style!==t.getTextStyle()||e.format!==t.getTextFormat())&&e.isCollapsed()&&t.is(e.anchor.getNode())&&t.setTextStyle(e.style).setTextFormat(e.format)}}),t.registerNodeTransform(o.Ey8,t=>{const e=t.getParent();if(N(e)&&t.is(e.getFirstChild())){const n=t.getStyle(),r=t.getFormat();n===e.getTextStyle()&&r===e.getTextFormat()||e.setTextStyle(n).setTextFormat(r)}}))}function Z(t){const e=t=>{const e=t.getParent();if(D(t.getFirstChild())||!D(e))return;const n=(0,o.BtT)(t,t=>N(t)&&D(t.getParent())&&N(t.getPreviousSibling()));if(null===n&&t.getIndent()>0)t.setIndent(0);else if(N(n)){const r=n.getPreviousSibling();if(N(r)){const n=function(t){let e=t,n=e.getFirstChild();for(;D(n);){const t=n.getLastChild();if(!N(t))break;e=t,n=e.getFirstChild()}return e}(r),i=n.getParent();if(D(i)){const n=c(i);n+1<c(e)&&t.setIndent(n)}}}};return t.registerNodeTransform(E,t=>{const n=[t];for(;n.length>0;){const t=n.shift();if(D(t))for(const r of t.getChildren())if(N(r)){e(r);const t=r.getFirstChild();D(t)&&n.push(t)}}})}const q=(0,o.vE9)({build:(t,e,n)=>(0,r.v)(e),config:(0,o.lVE)({hasStrictIndent:!1}),name:"@lexical/list/List",nodes:()=>[E,C],register(t,e,n){const o=n.getOutput();return(0,i.Sd)(j(t),(0,r.QZ)(()=>o.hasStrictIndent.value?Z(t):void 0))}});(0,o.vE9)({dependencies:[q],name:"@lexical/list/CheckList",register:function(t){return(0,i.Sd)(t.registerCommand(L,()=>(g("check"),!0),o.AcJ),t.registerCommand(o.bbF,e=>B(e,t,!1),o.AcJ),t.registerCommand(o.UDz,e=>B(e,t,!0),o.AcJ),t.registerCommand(o.Q$N,()=>{if(null!=K()){const e=t.getRootElement();return null!=e&&e.focus(),!0}return!1},o.AcJ),t.registerCommand(o.Huu,e=>{const n=K();return!(null==n||!t.isEditable()||(t.update(()=>{const t=(0,o.xL4)(n);N(t)&&(e.preventDefault(),t.toggleChecked())}),0))},o.AcJ),t.registerCommand(o.AX0,e=>t.getEditorState().read(()=>{const n=(0,o.vJq)();if((0,o.I2P)(n)&&n.isCollapsed()){const{anchor:r}=n,i="element"===r.type;if(i||0===r.offset){const n=r.getNode(),s=(0,o.BtT)(n,t=>(0,o.ff4)(t)&&!t.isInline());if(N(s)){const r=s.getParent();if(D(r)&&"check"===r.getListType()&&(i||s.getFirstDescendant()===n)){const n=t.getElementByKey(s.__key);if(null!=n&&document.activeElement!==n)return n.focus(),e.preventDefault(),!0}}}}return!1}),o.AcJ),t.registerRootListener((t,e)=>{null!==t&&(t.addEventListener("click",I),t.addEventListener("pointerdown",R)),null!==e&&(e.removeEventListener("click",I),e.removeEventListener("pointerdown",R))}))}})}}]);
//# sourceMappingURL=672.bundle.js.map